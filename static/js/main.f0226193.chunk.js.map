{"version":3,"sources":["assets/click.mp3","App.js","index.js"],"names":["module","exports","MacroStates","PlayerStates","monthLength","ImagePath","process","parseSimpleDate","dateString","year","parseInt","substr","month","SimpleDate","day","this","Day","Month","Year","dayCount","isLeapYear","strMonth","strDay","LoadJson","path","a","res","fetch","then","response","json","generateButtonPress","button","onTime","offTime","count","name","macro","PlayerButton","props","divStyle","background","iconStyle","selected","filter","className","id","style","onClick","e","clickHandler","src","alt","MacroButton","index","ProgressBar","width","percentage","KeyLog","key","ind","pressedKey","start","duration","CheckBox","state","handleChange","bind","event","onChange","paramKey","target","checked","type","React","Component","IntegerInput","value","Math","min","currentTarget","max","readOnly","readonly","DateInput","DropDownList","options","map","string","toString","renderOptions","ParameterInput","active","params","parameters","startDate","eventHandler","daysToAdvance","dateFormat","eggCycles","ability","eggsInBox","StatusTable","status","advanced","undefined","daysAdvanced","current","currentDate","displayText","traded","row","currentRow","column","currentColumn","slot","hatched","InfoOverlay","display_style","display","show","sections","i","length","section","title","text","onMouseDown","onTouchStart","JSONManeger","segments","FstSkip","filename","object","FstSkipUS","FstSkipCHN","AdvDay","AdvDayUS","AdvDayCHN","GetEggs","Recenter","OpenBox","SelectInBox","StartWonder","EndWonder","Hatching","entries","Object","loadedCount","segmentCount","loadConcluded","loadMacro","segment","console","log","JSON","parse","stringify","MacroController","jsonM","icon","jsonManager","paramHandlers","info","progress","handler","getMacro","TimeSkipMacro","currentFormat","onStartDateChange","onDaysToAdvanceChange","onDateFormatChange","text1","dateInfo","newDate","days","format","macroStep","InitMacro","isLastDayOfMonth","increment","AdvanceDay","WonderBoxMacro","onCountChange","phase","dx","dy","waitTime","concat","EggHatcherMacro","onEggCyclesChange","onHasAbilityChange","onEggsInBoxChange","currentBatch","cycles","bool","eggCount","firstEgg","remEggs","eggsInParty","time","hatching","WithdrawBatch","HatchSegment","MacroExecuter","onWait","executing","commands","toExecute","f","abort","steps","reps","j","k","step","command","makeCommand","strength","angle","reset","block","l","push","timedCommand","currentOverallStep","obj","args","o","apply","next","x","coroutine","pressed","blocking","setTimeout","issueCommand","clearTimeout","waitTimeout","MacroPlayer","selectedMacro","playState","macroProgress","macroDuration","macroRunTime","controllers","selectMacro","changeParameter","executer","Audio","clickSound","play","getMacroState","getDuration","macroState","dataArray","controller","getRenderData","currentTime","runResult","checkLoadConcluded","result","update","getMacroProgress","execute","done","KeyLogger","keys","pendingLog","b","y","lsl","lsr","r","rsl","rsr","plus","minus","up","right","left","down","left_stick","right_stick","left_stick_dir","right_stick_dir","home","startTime","log_count","addLogEntry","entry","pressedKeys","Date","getTime","pressKey","releaseKey","render","keyData","keyLogs","App","onButtonEvent","parameterChange","macroPlayer","keyLogger","displayStartM","displayInfo","UpdateTimerId","setInterval","clearInterval","setState","handleSwitchJoySticks","handleSwitchKeys","pressedSM","pause","getPressed","clear","pressedI","joystick","rads","PI","degToRad","window","joyconJS","onRightJoystick","onLeftJoystick","onMinus","onLeftJoystickPressed","onUp","onRight","onDown","onLeft","onL","onLeftSL","onLeftSR","onPlus","onA","onB","onX","onY","onR","onRightSL","onRightSR","onRightJoystickPressed","onHome","data","getAllMacroData","isSelected","getMacroRenderData","onMouseUp","runMins","floor","runSecs","runMili","runTime","durMins","durSecs","durMili","startM","renderStartMessage","macros","renderMacros","renderParameters","renderStatus","renderInfo","renderTime","color","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.f0226193.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/click.a99ad0ce.mp3\";","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport clickSound from \"./assets/click.mp3\";\r\n\r\n//\r\n// - Constants and Globals\r\n//\r\n\r\nconst MacroStates = {\r\n\tINACTIVE: 0,\r\n\tSTARTING: 1,\r\n\tPLAYING:  2,\r\n\tPAUSED:   3,\r\n\tFINISHED: 4\r\n}\r\n\r\nconst PlayerStates = {\r\n\tINACTIVE: 0,\r\n\tWAITING: 1,\r\n\tEXECUTING: 2,\r\n\tPAUSED: 3,\r\n\tCONCLUDED: 4\r\n}\r\n\r\n\r\nconst monthLength = [31,28,31,30,31,30,31,31,30,31,30,31];\r\n\r\nconst ImagePath = process.env.PUBLIC_URL + \"/assets/images/\";\r\nconst MacroPath = process.env.PUBLIC_URL + \"/assets/macros/\";\r\n\r\n\r\n//\r\n// - Simple Date\r\n//\r\n\r\nfunction parseSimpleDate(dateString) {\r\n\tvar year  = parseInt(dateString.substr(0, 4));\r\n\tvar month = parseInt(dateString.substr(5, 6));\r\n\tvar day   = parseInt(dateString.substr(8, 9));\r\n\r\n\treturn [day, month, year];\r\n}\r\n\r\nclass SimpleDate {\r\n\tconstructor(day, month, year) {\r\n\t\tthis.Day   = day;\r\n\t\tthis.Month = month;\r\n\t\tthis.Year = year;\r\n\t}\r\n\r\n\tisLeapYear(year) {\r\n\t\tif (year % 4 === 0) return false;\r\n\t\tif (year % 100 !== 0) return true;\r\n\t\tif (year % 400 !== 0) return false;\r\n\t\treturn true;\r\n    }\r\n\r\n\tisLastDayOfMonth() {\r\n\t\treturn this.Day === monthLength[this.Month - 1];\r\n    }\r\n\r\n\tincrement() {\r\n\t\t// Compute next day\r\n\t\tthis.Day += 1;\r\n\r\n\t\t// Get Month length\r\n\t\tvar dayCount = monthLength[this.Month - 1];\r\n\t\tif (this.Month === 2 && this.isLeapYear(this.Year)) dayCount += 1;\r\n\r\n\t\t// If Month length has been exceeded\r\n\t\tif (this.Day > dayCount) {\r\n\t\t\tthis.Month += 1;\r\n\r\n\t\t\tthis.Day = 1;\r\n\r\n\t\t\t// If Year length has been exceeded\r\n\t\t\tif (this.Month > 12) {\r\n\t\t\t\tthis.Year += 1;\r\n\r\n\t\t\t\tthis.Month = 1;\r\n            }\r\n\t\t}\r\n    }\r\n\r\n\ttoString() {\r\n\t\tvar strMonth = \"\" + this.Month;\r\n\t\tif (this.Month < 10) strMonth = \"0\" + strMonth;\r\n\r\n\t\tvar strDay = \"\" + this.Day;\r\n\t\tif (this.Day < 10) strDay = \"0\" + strDay;\r\n\r\n\t\treturn this.Year + \"-\" + strMonth + \"-\" + strDay;\r\n\t}\r\n\r\n\tdisplayText() {\r\n\t\tvar strMonth = \"\" + this.Month;\r\n\t\tif (this.Month < 10) strMonth = \"0\" + strMonth;\r\n\r\n\t\tvar strDay = \"\" + this.Day;\r\n\t\tif (this.Day < 10) strDay = \"0\" + strDay;\r\n\r\n\t\treturn strDay + \" / \" + strMonth + \" / \"+ this.Year;\r\n    }\r\n}\r\n\r\n\r\n//\r\n// - AUX Functions\r\n//\r\n\r\nfunction degToRad(angle) {\r\n\treturn angle * (Math.PI / 180);\r\n}\r\n\r\nasync function LoadJson(path) {\r\n\tvar res = null;\r\n\r\n\tres = await fetch(path).then(response => { return response.json(); } );\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction generateButtonPress(button, onTime, offTime, count) {\r\n\treturn [\r\n\t\t{\r\n\t\t\tname: \"Press \" + button,\r\n\t\t\tmacro: [\r\n\t\t\t\t{\r\n\t\t\t\t\tbutton  : button,\r\n\t\t\t\t\tonTime  : onTime,\r\n\t\t\t\t\toffTime : offTime,\r\n\t\t\t\t\tcount   : 1\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tcount: count\r\n\t\t}\r\n\t];\r\n}\r\n\r\nfunction generateJoystickPush(side, onTime, offTime, strength, angle) {\r\n\tif(side !== \"left\" && side !== \"right\") return [];\r\n\r\n\treturn [\r\n\t\t{\r\n\t\t\tname: \"Push \" + side + \" analog stick\",\r\n\t\t\tmacro: [\r\n\t\t\t\t{\r\n\t\t\t\t\tbutton   : side + \"_stick_dir\",\r\n\t\t\t\t\tonTime   : onTime,\r\n\t\t\t\t\toffTime  : offTime,\r\n\t\t\t\t\tcount    : 1,\r\n\t\t\t\t\tstrength : strength,\r\n\t\t\t\t\tangle    : angle\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tcount: 1\r\n\t\t}\r\n\t];\r\n}\r\n\r\nfunction playClickSound() {\r\n\tvar audio = new Audio(clickSound);\r\n\taudio.play();\r\n}\r\n\r\n\r\n//\r\n// - React Components\r\n//\r\n\r\nfunction PlayerButton(props) {\r\n\tvar divStyle = { background : \"#FFF\" };\r\n\tvar iconStyle = {};\r\n\r\n\tif(props.selected) {\r\n\t\tdivStyle  = { background : \"#000\" };\r\n\t\ticonStyle = { filter : \"invert(1)\" };\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className = \"player-button\" id = {props.name} style = {divStyle}\r\n\t\t\tonClick = {e => props.clickHandler()} >\r\n\t\t\t<img className = \"icon\" src = {props.src} alt = {props.name + \" Button Icon\"}\r\n\t\t\t\tstyle = {iconStyle} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction MacroButton(props) {\r\n\tvar style = { background : \"white\" };\r\n\tif(props.selected) style = {background : \"black\"};\r\n\r\n\treturn (\r\n\t\t<div className = \"macro\">\r\n\t\t\t<div className = \"macro-button\" id = {props.name} style = {style}\r\n\t\t\t\tonClick = {e => props.clickHandler(props.index)}>\r\n\t\t\t\t<img className = \"icon\" src = {props.src} alt = {\"Icon \" + props.name}/>\r\n\t\t\t</div>\r\n\t\t\t<label className = \"macro-button-label\">\r\n\t\t\t\t{props.name}\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction ProgressBar(props) {\r\n\tconst width = { width : `${props.percentage}%` };\r\n\r\n\treturn (\r\n\t\t<div className = \"progress-bar\">\r\n\t\t\t<div className = \"filler\" style = {width} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction KeyLog(props) {\r\n\treturn (\r\n\t\t<div key = {props.ind} className = \"key-log\">\r\n\t\t\t<b className = \"key-log-cell\"> {props.index} </b>\r\n\t\t\t<b className = \"key-log-cell\"> {props.pressedKey} </b>\r\n\t\t\t<b className = \"key-log-cell\"> {props.start} </b>\r\n\t\t\t<b className = \"key-log-cell\"> {props.duration} </b>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nclass CheckBox extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\treturn this.props.onChange(this.props.paramKey, event.target.checked);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<input type = \"checkbox\" checked = {this.props.checked} onChange = {this.handleChange} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass IntegerInput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tif(event.target.value === \"\") {\r\n\t\t\tthis.props.onChange(1);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet value = Math.min(event.currentTarget.value, this.props.max);\r\n\r\n\t\tthis.props.onChange(parseInt(value));\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<input type = \"number\" className = \"integer-input\"\r\n\t\t\treadOnly = {this.props.readonly}\r\n\t\t\tvalue = {this.props.value} onChange = {this.handleChange}\r\n\t\t\tmax = {this.props.max} min = {this.props.min}/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass DateInput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tif (event.target.value === \"\") {\r\n\t\t\tthis.props.onChange(\"2020-01-01\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet value = event.currentTarget.value;\r\n\r\n\t\tthis.props.onChange(value);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<input type=\"date\" className=\"date-input\"\r\n\t\t\t\treadOnly={this.props.readonly}\r\n\t\t\t\tvalue={this.props.value} onChange={this.handleChange}\r\n\t\t\t\tmax={this.props.max} min={this.props.min} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass DropDownList extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tif(event.target.value === \"\") {\r\n\t\t\tthis.props.onChange(0);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.props.onChange(parseInt(event.currentTarget.value));\r\n\t}\r\n\r\n\trenderOptions() {\r\n\t\treturn this.props.options.map((string, index) => {\r\n\t\t\treturn (\r\n\t\t\t\t<option key = {\"option\" + index.toString()} value={index}>{string}</option>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet options = this.renderOptions();\r\n\r\n\t\treturn (\r\n\t\t\t<select className = \"drop-down-list\" onChange = {this.handleChange}>\r\n\t\t\t  {options}\r\n\t\t\t</select>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nclass ParameterInput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {active : false};\r\n\t}\r\n\r\n\trender() {\r\n\t\tvar params = this.props.parameters;\r\n\r\n\t\tswitch(this.props.macro) {\r\n\t\t\tdefault:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"macro-parameters\" id = \"DefaultParams\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\tcase \"Time Skip\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"macro-parameters\" id=\"TimeSkipParams\">\r\n\t\t\t\t\t\t<div className=\"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className=\"parameter-label\">\r\n\t\t\t\t\t\t\t\tStart Date\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className=\"parameter\">\r\n\t\t\t\t\t\t\t\t<DateInput id=\"startDate\" name=\"start-date\"\r\n\t\t\t\t\t\t\t\t\tvalue={params.startDate}\r\n\t\t\t\t\t\t\t\t\tonChange={value => this.props.eventHandler(\"startDate\", value)}\r\n\t\t\t\t\t\t\t\t\tmin=\"2000-01-01\" max=\"2059-12-31\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className = \"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className = \"parameter-label\">\r\n\t\t\t\t\t\t\t\tSkip Count\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className = \"parameter\">\r\n\t\t\t\t\t\t\t\t<IntegerInput id = \"daysToAdvance\" name = \"days-to-advance\"\r\n\t\t\t\t\t\t\t\t\tvalue = {params.daysToAdvance}\r\n\t\t\t\t\t\t\t\t\tonChange = {value => this.props.eventHandler(\"daysToAdvance\", value)}\r\n\t\t\t\t\t\t\t\t\tmin = \"1\" max = \"1000\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className = \"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className = \"parameter-label\">\r\n\t\t\t\t\t\t\t\tDate Format\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className = \"parameter\">\r\n\t\t\t\t\t\t\t\t<DropDownList id = \"dateFormat\" name = \"date-format\"\r\n\t\t\t\t\t\t\t\t\tvalue    = {params.dateFormat}\r\n\t\t\t\t\t\t\t\t\toptions  = {[\"World\", \"US\", \"Chinese\"]}\r\n\t\t\t\t\t\t\t\t\tonChange = {value => this.props.eventHandler(\"dateFormat\", value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\tcase \"Wonder Box\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"macro-parameters\" id = \"WonderBoxParams\">\r\n\t\t\t\t\t\t<div className = \"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className = \"parameter-label\">\r\n\t\t\t\t\t\t\t\tCount\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className = \"parameter\">\r\n\t\t\t\t\t\t\t\t<IntegerInput id = \"WTradeCount\" name = \"wonder-trade-count\"\r\n\t\t\t\t\t\t\t\t\tvalue = {params.count}\r\n\t\t\t\t\t\t\t\t\tonChange = {value => this.props.eventHandler(\"count\", value)}\r\n\t\t\t\t\t\t\t\t\tmin = \"1\" max = \"30\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\tcase \"Egg Hatcher\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"macro-parameters\" id = \"EggHatcherParams\">\r\n\t\t\t\t\t\t<div className = \"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className = \"parameter-label\">\r\n\t\t\t\t\t\t\t\tEgg Cycles\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className = \"parameter\">\r\n\t\t\t\t\t\t\t\t<DropDownList id = \"eggCycles\" name = \"egg-cycles\"\r\n\t\t\t\t\t\t\t\t\tvalue    = {params.eggCycles.toString()}\r\n\t\t\t\t\t\t\t\t\toptions  = {[\"5\", \"10\", \"15\", \"20\", \"25\", \"30\", \"35\", \"40\"]}\r\n\t\t\t\t\t\t\t\t\tonChange = {value => this.props.eventHandler(\"eggCycles\", value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className = \"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className = \"parameter-label\">\r\n\t\t\t\t\t\t\t\tHatching Ability\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className = \"parameter\">\r\n\t\t\t\t\t\t\t\t<CheckBox id = \"hasHatchAbility\" name = \"hatch-ability\"\r\n\t\t\t\t\t\t\t\t\tchecked  = {params.ability}\r\n\t\t\t\t\t\t\t\t\tparamKey = \"ability\"\r\n\t\t\t\t\t\t\t\t\tonChange = {this.props.eventHandler}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className = \"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className = \"parameter-label\">\r\n\t\t\t\t\t\t\t\tEggs in Box\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className = \"parameter\">\r\n\t\t\t\t\t\t\t\t<IntegerInput id = \"eggsInBox\" name = \"eggs-in-box\"\r\n\t\t\t\t\t\t\t\t\tvalue = {params.eggsInBox}\r\n\t\t\t\t\t\t\t\t\tonChange = {value => this.props.eventHandler(\"eggsInBox\", value)}\r\n\t\t\t\t\t\t\t\t\tmin = \"1\" max = \"30\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass StatusTable extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = { active: false };\r\n\t}\r\n\r\n\trender() {\r\n\t\tvar status = this.props.status;\r\n\r\n\t\tswitch (this.props.macro) {\r\n\t\t\tdefault:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"macro-status\" id=\"DefaultStatus\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\tcase \"Time Skip\":\r\n\t\t\t\tvar advanced = 0;\r\n\t\t\t\tif (status.daysAdvanced !== undefined) advanced = status.daysAdvanced;\r\n\r\n\t\t\t\tvar current = \"01 / 01 / 2020\";\r\n\t\t\t\tif (status.currentDate !== undefined) current = status.currentDate.displayText();\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"macro-status\" id=\"TimeSkipStatus\">\r\n\t\t\t\t\t\t<div className=\"status-entry\">\r\n\t\t\t\t\t\t\t<label className=\"status-label\">\r\n\t\t\t\t\t\t\t\tSkips Done\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className=\"status\">\r\n\t\t\t\t\t\t\t\t{advanced}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"status-entry\">\r\n\t\t\t\t\t\t\t<label className=\"status-label\">\r\n\t\t\t\t\t\t\t\tCurrent Date\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className=\"status\">\r\n\t\t\t\t\t\t\t\t{current}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t\r\n\t\t\tcase \"Wonder Box\":\r\n\t\t\t\tvar traded = 0;\r\n\t\t\t\tif (status.traded !== undefined) traded = status.traded;\r\n\r\n\t\t\t\tvar row = 0;\r\n\t\t\t\tif (status.currentRow !== undefined) row = status.currentRow;\r\n\r\n\t\t\t\tvar column = 0;\r\n\t\t\t\tif (status.currentColumn !== undefined) column = status.currentColumn;\r\n\r\n\t\t\t\tvar slot = \"Row: \" + row.toString() + \" | Col: \" + column.toString();\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"macro-status\" id=\"WonderBoxStatus\">\r\n\t\t\t\t\t\t<div className=\"status-entry\">\r\n\t\t\t\t\t\t\t<label className=\"status-label\">\r\n\t\t\t\t\t\t\t\tTraded\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className=\"status\">\r\n\t\t\t\t\t\t\t\t{traded}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"status-entry\">\r\n\t\t\t\t\t\t\t<label className=\"status-label\">\r\n\t\t\t\t\t\t\t\tBox Slot\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className=\"status\">\r\n\t\t\t\t\t\t\t\t{slot}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t\r\n\t\t\tcase \"Egg Hatcher\":\r\n\t\t\t\tvar hatched = 0;\r\n\t\t\t\tif (status.hatched !== undefined) hatched = status.hatched;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"macro-status\" id=\"EggHatcherStatus\">\r\n\t\t\t\t\t\t<div className=\"status-entry\">\r\n\t\t\t\t\t\t\t<label className=\"status-label\">\r\n\t\t\t\t\t\t\t\tHatched\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className=\"status\">\r\n\t\t\t\t\t\t\t\t{hatched}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass InfoOverlay extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\trender() {\r\n\t\tvar display_style = {display : \"none\"};\r\n\t\tif(this.props.show) display_style.display = \"flex\";\r\n\r\n\t\tvar sections = [];\r\n\r\n\t\tvar i = 0;\r\n\t\tfor(; i < this.props.sections.length; i++) {\r\n\t\t\tvar section = this.props.sections[i];\r\n\r\n\t\t\tsections[i] = (\r\n\t\t\t\t<div className = \"infoSection\" key = {\"infoSect_\" + i.toString()}>\r\n\t\t\t\t\t<h2 className = \"infoSectionTitle\"> {section.title} </h2>\r\n\t\t\t\t\t{section.text}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id = \"infoOverlay\" className = \"info-overlay\" style = {display_style}>\r\n\t\t\t\t<div id = \"infoOverlayOut\" onMouseDown  = {this.props.onMouseDown} onTouchStart = {this.props.onTouchStart}>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id = \"infoTextBox\" className = \"text-box\">\r\n\t\t\t\t\t<h1 className = \"infoTextTitle\"> {this.props.title} </h1>\r\n\t\t\t\t\t\t{sections}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n//\r\n// - Back End Elements\r\n//\r\n\r\nfunction coroutine(f, obj, args) {\r\n\tvar o = f.apply(obj, args);\r\n\r\n\to.next();\r\n\r\n\treturn function(x) {\r\n\t\treturn o.next(x);\r\n\t}\r\n}\r\n\r\nclass JSONManeger {\r\n\tconstructor() {\r\n\t\tthis.segments = {\r\n\t\t\tFstSkip      : {filename: \"FirstSkip.json\",           object: \"\"},\r\n\t\t\tFstSkipUS    : {filename: \"FirstSkipUS.json\",         object: \"\"},\r\n\t\t\tFstSkipCHN   : {filename: \"FirstSkipCHN.json\",        object: \"\"},\r\n\t\t\tAdvDay       : {filename: \"AdvanceDay.json\",          object: \"\"},\r\n\t\t\tAdvDayUS     : {filename: \"AdvanceDayUS.json\",        object: \"\"},\r\n\t\t\tAdvDayCHN    : {filename: \"AdvanceDayCHN.json\",       object: \"\"},\r\n\t\t\tGetEggs      : {filename: \"GetEggs.json\",             object: \"\"},\r\n\t\t\tRecenter     : {filename: \"Recenter.json\",            object: \"\"},\r\n\t\t\tOpenBox      : { filename: \"OpenBox.json\", object: \"\" },\r\n\t\t\tSelectInBox  : { filename: \"SelectInBox.json\", object: \"\" },\r\n\t\t\tStartWonder  : {filename: \"StartWonderTrade.json\",    object: \"\"},\r\n\t\t\tEndWonder    : {filename: \"ConcludeWonderTrade.json\", object: \"\"},\r\n\t\t\tHatching     : {filename: \"Hatching.json\",            object: \"\"}\r\n\t\t};\r\n\r\n\t\tvar entries = Object.entries(this.segments);\r\n\r\n\t\tthis.loadedCount = 0;\r\n\t\tthis.segmentCount = entries.length;\r\n\t\tthis.loadConcluded = false;\r\n\r\n\t\tlet i = 0;\r\n\t\tfor(; i < this.segmentCount; i++) {\r\n\t\t\tthis.loadMacro(entries[i][0]);\r\n\t\t}\r\n\t}\r\n\r\n\tasync loadMacro(key) {\r\n\t\tvar segment = this.segments[key];\r\n\r\n\t\tsegment.object = await LoadJson(MacroPath + segment.filename);\r\n\r\n\t\tthis.loadedCount += 1;\r\n\r\n\t\tif(this.loadedCount === this.segmentCount) {\r\n\t\t\tthis.loadConcluded = true;\r\n\t\t\tconsole.log(\"JSON Load Concluded\");\r\n\t\t}\r\n\t}\r\n\r\n\tgetMacro(key) {\r\n\t\tvar segment = this.segments[key];\r\n\r\n\t\tif (segment === undefined) {\r\n\t\t\tconsole.log(\"No macro associated with key: \" + key);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\tvar copy = JSON.parse(JSON.stringify(segment.object));\r\n\t\treturn copy;\r\n\t}\r\n}\r\n\r\n\r\n//\r\n// - Macro\r\n//\r\n\r\nclass MacroController {\r\n\tconstructor(jsonM, name, icon) {\r\n\t\tthis.jsonManager = jsonM;\r\n\r\n\t\tthis.name = name;\r\n\t\tthis.icon = icon;\r\n\r\n\t\tthis.parameters = {};\r\n\t\tthis.paramHandlers = {};\r\n\r\n\t\tthis.info = [];\r\n\r\n\t\tthis.state = {\r\n\t\t\tstate: MacroStates.INACTIVE,\r\n\t\t\tprogress: 0\r\n\t\t};\r\n\t}\r\n\r\n\r\n\tchangeParameter(key, value) {\r\n\t\tlet handler = this.paramHandlers[key];\r\n\r\n\t\treturn handler(value);\r\n\t}\r\n\r\n\tgetMacro(key) {\r\n\t\tif (!this.jsonManager.loadConcluded) return null;\r\n\r\n\t\treturn this.jsonManager.getMacro(key);\r\n\t}\r\n\r\n\r\n\tgetMacroState() {\r\n\t\treturn this.state.state;\r\n    }\r\n\r\n\tgetMacroProgress() {\r\n\t\treturn this.state.progress;\r\n\t}\r\n\r\n\tgetDuration() {\r\n\t\treturn 0;\r\n    }\r\n\r\n\r\n\tstart() {\r\n\t\tthis.state.state = MacroStates.STARTING;\r\n    }\r\n\r\n\treset() {\r\n\t\tthis.state.state = MacroStates.INACTIVE;\r\n    }\r\n\r\n\r\n\t// Update\r\n\tupdate() {\r\n\t\tconsole.log(\"This should have been overriden.\");\r\n    }\r\n\r\n\r\n\t// Render\r\n\tgetRenderData() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t\ticon: ImagePath + this.icon,\r\n\t\t\tstate: this.state,\r\n\t\t\tparameters: this.parameters,\r\n\t\t\tinfo: this.info\r\n\t\t};\r\n\t}\r\n}\r\n\r\nclass TimeSkipMacro extends MacroController {\r\n\tconstructor(jsonM) {\r\n\t\tsuper(jsonM, \"Time Skip\", \"timeskip_icon.png\");\r\n\r\n\t\t// Init Parameters\r\n\t\tthis.parameters.startDate     = \"2020-01-01\";\r\n\t\tthis.parameters.daysToAdvance = 1;\r\n\t\tthis.parameters.dateFormat\t  = 0;\r\n\r\n\t\tthis.currentFormat = \"\";\r\n\r\n\t\t// Method Binding\r\n\t\tthis.onStartDateChange     = this.onStartDateChange.bind(this);\r\n\t\tthis.onDaysToAdvanceChange = this.onDaysToAdvanceChange.bind(this);\r\n\t\tthis.onDateFormatChange    = this.onDateFormatChange.bind(this);\r\n\r\n\t\t// Assign methods to parameters\r\n\t\tthis.paramHandlers = {\r\n\t\t\tstartDate: this.onStartDateChange,\r\n\t\t\tdaysToAdvance: this.onDaysToAdvanceChange,\r\n\t\t\tdateFormat: this.onDateFormatChange\r\n\t\t};\r\n\r\n\t\t// Prepare help text\r\n\t\tvar text1 = (\r\n\t\t\t<p>\r\n\t\t\t\t<b>1-</b> In the <b>Console Settings</b>, turn <b>Synchronize Time</b> off.\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<b>2-</b> The <b>Date</b> in <b>Console Settings</b> must be the first of any 31 day month.\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<b>3-</b> Set <b>Skip Count</b> to the number of days to advance.\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<b>4-</b> Set <b>Date Format</b> to match your console's format.\r\n\t\t\t</p>\r\n\t\t);\r\n\r\n\t\t// Assign help text\r\n\t\tthis.info = [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"SetUp\",\r\n\t\t\t\ttext: text1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"How it works\",\r\n\t\t\t\ttext: \"The frame of the seed will advance with each time the date is advanced. This means that we can just change the day, with the only downside being that when returning to the first of the month no advancement will happen. The macro takes this into account and adds repetitions so that in the end the correct number of skips is achieved.\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"Recommendations\",\r\n\t\t\t\ttext: \"Avoid doing many skips in the Wild Area as this is known to sometimes result in game crashes. Use this macro indoors.\"\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\t// Internal state\r\n\t\tthis.state.currentDate  = new SimpleDate(1,1,2020);\r\n\t\tthis.state.daysAdvanced = 0;\r\n\t}\r\n\r\n\tgetDuration() {\r\n\t\treturn 10160 + this.parameters.daysToAdvance * 3440;\r\n    }\r\n\r\n\r\n\treset() {\r\n\t\tvar dateInfo = parseSimpleDate(this.parameters.startDate);\r\n\r\n\t\tthis.state.state        = MacroStates.INACTIVE;\r\n\t\tthis.state.currentDate  = new SimpleDate(dateInfo[0], dateInfo[1], dateInfo[2]);\r\n\t\tthis.state.daysAdvanced = 0;\r\n    }\r\n\r\n\r\n\t// Parameter Handlers\r\n\tonStartDateChange(newDate) {\r\n\t\tif (this.parameters.startDate !== newDate) {\r\n\t\t\tthis.parameters.startDate = newDate;\r\n\r\n\t\t\tvar dateInfo = parseSimpleDate(newDate);\r\n\t\t\tthis.state.currentDate = new SimpleDate(dateInfo[0], dateInfo[1], dateInfo[2]);\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n    }\r\n\r\n\tonDaysToAdvanceChange(days) {\r\n\t\tif (this.parameters.daysToAdvance !== days) {\r\n\t\t\tthis.parameters.daysToAdvance = days;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonDateFormatChange(format) {\r\n\t\tif (this.parameters.dateFormat !== format) {\r\n\t\t\tthis.parameters.dateFormat = format;\r\n\r\n\t\t\tswitch (format) {\r\n\t\t\t\tdefault:\r\n\t\t\t\tcase 0: // WORLD\r\n\t\t\t\t\tthis.currentFormat = \"\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 1: // US\r\n\t\t\t\t\tthis.currentFormat = \"US\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 2: // Chinese\r\n\t\t\t\t\tthis.currentFormat = \"CHN\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\t// Build Step\r\n\tAdvanceDay(days) {\r\n\t\tvar macro = this.getMacro(\"AdvDay\" + this.currentFormat);\r\n\r\n\t\tmacro[0].count = days;\r\n\r\n\t\treturn macro;\r\n\t}\r\n\r\n\tInitMacro() {\r\n\t\treturn this.getMacro(\"FstSkip\" + this.currentFormat);\r\n\t}\r\n\r\n\r\n\t// Update\r\n\tupdate() {\r\n\t\tvar response = { state: 0, macroStep: undefined };\r\n\r\n\t\tswitch (this.state.state) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MacroStates.STARTING: // Starting\r\n\t\t\t\tresponse.macroStep = this.InitMacro();\r\n\r\n\t\t\t\tthis.state.state = MacroStates.PLAYING; // Go to Day Skips\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MacroStates.PLAYING: // Advancing\r\n\t\t\t\tif (!this.state.currentDate.isLastDayOfMonth()) {\r\n\t\t\t\t\tthis.state.daysAdvanced += 1;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.state.currentDate.Day = 0;\r\n                }\r\n\r\n\t\t\t\tthis.state.currentDate.increment();\r\n\r\n\t\t\t\t// If goal has not been achieved\r\n\t\t\t\tif (this.parameters.daysToAdvance > this.state.daysAdvanced) {\r\n\t\t\t\t\tresponse.macroStep = this.AdvanceDay(1);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tresponse.macroStep = generateButtonPress(\"home\", 100, 1000, 2);\r\n\r\n\t\t\t\t\tthis.state.state = MacroStates.FINISHED; // Go to Concluded\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.state.progress = this.state.daysAdvanced / this.parameters.daysToAdvance;\r\n\r\n\t\tresponse.state = this.state.state;\r\n\r\n\t\treturn response;\r\n    }\r\n}\r\n\r\nclass WonderBoxMacro extends MacroController {\r\n\tconstructor(jsonM) {\r\n\t\tsuper(jsonM, \"Wonder Box\", \"wonderbox_icon.png\");\r\n\r\n\t\tthis.parameters.count = 1;\r\n\r\n\t\tthis.onCountChange = this.onCountChange.bind(this);\r\n\r\n\t\tthis.paramHandlers = {\r\n\t\t\tcount: this.onCountChange\r\n\t\t};\r\n\r\n\r\n\t\tvar text1 = (\r\n\t\t\t<p>\r\n\t\t\t\t<b>1-</b> In-Game, open your PC and go to the box with the pokemon to be wonder traded.\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<b>2-</b> Make sure there are no empty spots between pokemon.\r\n\t\t\t\tThe macro will start trading from the top left corner and go left to right, top to bottom.\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<b>3-</b> Exit all menus.\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<b>4-</b> Set the <b>Count</b> parameter to how many pokemon you want to trade away from that box.\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<b>5-</b> The macro will pause after starting the trade. Press play after you see the trade has completed.\r\n\t\t\t</p>\r\n\t\t);\r\n\r\n\t\tthis.info = [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"How to\",\r\n\t\t\t\ttext: text1\r\n\t\t\t}\r\n\t\t];\r\n\r\n\r\n\t\t// Internal State\r\n\t\tthis.state.phase = 0;\r\n\r\n\t\tthis.state.traded        = 0;\r\n\t\tthis.state.currentRow    = 0;\r\n\t\tthis.state.currentColumn = 0;\r\n\t}\r\n\r\n\r\n\treset() {\r\n\t\tthis.state.state = MacroStates.INACTIVE;\r\n\r\n\t\tthis.state.traded        = 0;\r\n\t\tthis.state.currentRow    = 0;\r\n\t\tthis.state.currentColumn = 0;\r\n    }\r\n\r\n\r\n\t// Parameter Handlers\r\n\tonCountChange(count) {\r\n\t\tif (this.parameters.count !== count) {\r\n\t\t\tthis.parameters.count = count;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\t// Build Macro\r\n\tSelectInBox(column, row) {\r\n\t\tvar segments = this.getMacro(\"SelectInBox\");\r\n\r\n\t\tlet dx = column;\r\n\t\tlet dy = row;\r\n\r\n\t\tif (dx > 0) {\r\n\t\t\tsegments[0].macro[0].count = dx;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsegments[0].macro[1].count = -1 * dx;\r\n\t\t}\r\n\r\n\t\tif (dy > 0) {\r\n\t\t\tsegments[0].macro[2].count = dy;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsegments[0].macro[3].count = -1 * dy;\r\n\t\t}\r\n\r\n\t\treturn segments;\r\n\t}\r\n\r\n\tConcludeTrade() {\r\n\t\tvar segments = this.getMacro(\"EndWonder\");\r\n\r\n\t\tsegments[0].macro[2].offTime = this.parameters.waitTime * 1000;\r\n\r\n\t\treturn segments;\r\n\t}\r\n\r\n\r\n\tupdate() {\r\n\t\tvar response = { state: 0, macroStep: undefined };\r\n\r\n\t\tif (this.state.state === MacroStates.PAUSED)\r\n\t\t\tthis.state.state = MacroStates.PLAYING;\r\n\r\n\t\tswitch (this.state.state) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MacroStates.STARTING: // Start the trade\r\n\t\t\t\tresponse.macroStep = [];\r\n\r\n\t\t\t\tresponse.macroStep = response.macroStep.concat(this.getMacro(\"StartWonder\"));\r\n\t\t\t\tresponse.macroStep = response.macroStep.concat(this.SelectInBox(this.state.currentColumn, this.state.currentRow));\r\n\t\t\t\tresponse.macroStep = response.macroStep.concat(generateButtonPress(\"a\",120,240,20));\r\n\r\n\t\t\t\tthis.state.state = MacroStates.PAUSED; // Go to Paused\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MacroStates.PLAYING: // Complete the trade\r\n\t\t\t\tresponse.macroStep = [];\r\n\r\n\t\t\t\tthis.state.currentColumn += 1;\r\n\r\n\t\t\t\tif (this.state.currentColumn >= 6) {\r\n\t\t\t\t\tthis.state.currentColumn = 0;\r\n\t\t\t\t\tthis.state.currentRow += 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.state.traded += 1;\r\n\r\n\t\t\t\tresponse.macroStep = response.macroStep.concat(generateButtonPress(\"y\", 120, 25000, 1));\r\n\r\n\t\t\t\tif (this.state.traded < this.parameters.count) {\r\n\t\t\t\t\tthis.state.state = MacroStates.STARTING;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.state.state = MacroStates.FINISHED;\r\n                }\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.state.progress = this.state.traded / this.parameters.count;\r\n\r\n\t\tresponse.state = this.state.state;\r\n\r\n\t\treturn response;\r\n\t}\r\n}\r\n\r\nclass EggHatcherMacro extends MacroController {\r\n\tconstructor(jsonM) {\r\n\t\tsuper(jsonM, \"Egg Hatcher\", \"egghatcher_icon.png\");\r\n\r\n\r\n\t\tthis.parameters.eggCycles = 5;\r\n\t\tthis.parameters.ability   = false;\r\n\t\tthis.parameters.eggsInBox = 1;\r\n\r\n\r\n\t\tthis.onEggCyclesChange  = this.onEggCyclesChange.bind(this);\r\n\t\tthis.onHasAbilityChange = this.onHasAbilityChange.bind(this);\r\n\t\tthis.onEggsInBoxChange  = this.onEggsInBoxChange.bind(this);\r\n\r\n\r\n\t\tthis.paramHandlers = {\r\n\t\t\teggCycles: this.onEggCyclesChange,\r\n\t\t\tability: this.onHasAbilityChange,\r\n\t\t\teggsInBox: this.onEggsInBoxChange\r\n\t\t};\r\n\r\n\r\n\t\tvar text1 = (\r\n\t\t\t<p>\r\n\t\t\t\t<b>1-</b> Open your PC and navigate to the Box with the eggs. Make sure that the box was filled from up to down, left to right.\r\n\t\t\t\tThis means the eggs should be placed column per column not row per row as is normal, if the box is full this doesn't matter.\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<b>2-</b> You must leave the <b>Pokmon</b> option selected when exiting the game's menu.\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<b>3-</b> When starting the macro, the <b>Player Character</b> must be near the <b>Nursery</b> at the Wild Area and not on the bike.\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<b>4-</b> Set the <b>Egg Cycles</b> parameter to how many cycles the egg takes to hatch, this can be checked on sites like Bulbapedia.\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<b>5-</b> Check the <b>Hatch Ability</b> box if the first pokemon in the party has one of the following abilities: Flame Body, Magma Armor or Steam Engine.\r\n\t\t\t\t<br />\r\n\t\t\t\t<br />\r\n\t\t\t\t<b>6-</b> Set the <b>Eggs in Box</b> parameter to how many eggs you have in the box to be hatched.\r\n\t\t\t</p>\r\n\t\t);\r\n\r\n\t\tthis.info = [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"SetUp\",\r\n\t\t\t\ttext: text1\r\n\t\t\t}\r\n\t\t];\r\n\r\n\r\n\t\t// Internal State\r\n\t\tthis.state.phase = 0;\r\n\r\n\t\tthis.state.hatched      = 0;\r\n\t\tthis.state.currentBatch = 0;\r\n\t}\r\n\r\n\r\n\treset() {\r\n\t\tthis.state.phase = 0;\r\n\r\n\t\tthis.state.hatched      = 0;\r\n\t\tthis.state.currentBatch = 0;\r\n\t}\r\n\r\n\r\n\t// Parameter Handlers\r\n\tonEggCyclesChange(cycles) {\r\n\t\tcycles = 5 * (parseInt(cycles) + 1);\r\n\r\n\t\tif (this.parameters.eggCycles !== cycles) {\r\n\t\t\tthis.parameters.eggCycles = cycles;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonHasAbilityChange(bool) {\r\n\t\tif (this.parameters.ability !== bool) {\r\n\t\t\tthis.parameters.ability = bool;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonEggsInBoxChange(count) {\r\n\t\tif (this.parameters.eggsInBox !== count) {\r\n\t\t\tthis.parameters.eggsInBox = count;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\t// Build Macro\r\n\tWithdrawBatch(eggCount) {\r\n\t\tlet segments = this.getMacro(\"GetEggs\");\r\n\r\n\t\t//Get the first egg\r\n\t\tlet firstEgg = segments[0];\r\n\r\n\t\tfirstEgg.macro[1].count = this.state.currentBatch;\r\n\t\tfirstEgg.macro[3].count = this.state.currentBatch + 1;\r\n\r\n\t\tsegments[0] = firstEgg;\r\n\r\n\t\t//Get the remaining eggs\r\n\t\tlet remEggs = segments[0];\r\n\r\n\t\tremEggs.count = eggCount;\r\n\r\n\t\tif (eggCount > 0) {\r\n\t\t\tremEggs.macro[1].count = this.state.currentBatch + 1;\r\n\t\t\tremEggs.macro[3].count = this.state.currentBatch + 1;\r\n\t\t}\r\n\r\n\t\tsegments[1] = remEggs;\r\n\r\n\t\t// Exit PC to Menu\r\n\t\tsegments = segments.concat(generateButtonPress(\"b\", 180, 1720, 2));\r\n\r\n\t\treturn segments;\r\n    }\r\n\r\n\tHatchSegment(eggsInParty) {\r\n\t\tlet segments = this.getMacro(\"Hatching\");\r\n\r\n\t\t// Calculate steps to hatch egg\r\n\t\tlet cycles = this.parameters.eggCycles;\r\n\t\tif (this.parameters.ability) cycles = cycles / 2;\r\n\r\n\t\t// Calculate time to hatch\r\n\t\tlet time = cycles * 6400;\r\n\r\n\t\tsegments[0].macro[2].onTime = time;\r\n\t\tsegments[0].macro[3].onTime = time;\r\n\r\n\t\t// Nudge forward to hatch consecutive eggs\r\n\t\tsegments[1].count = eggsInParty;\r\n\r\n\t\treturn segments;\r\n\t}\r\n\r\n\r\n\tupdate() {\r\n\t\tvar response = { state: 0, macroStep: undefined };\r\n\r\n\t\tvar hatching = 0;\r\n\r\n\t\tif (this.state.state === MacroStates.PAUSED)\r\n\t\t\tthis.state.state = MacroStates.PLAYING;\r\n\r\n\t\tswitch (this.state.state) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MacroStates.STARTING: // Get a batch of eggs\r\n\t\t\t\tresponse.macroStep = [];\r\n\r\n\t\t\t\tresponse.macroStep = response.macroStep.concat(this.getMacro(\"OpenBox\"));\r\n\r\n\t\t\t\thatching = Math.min(this.parameters.eggsInBox - this.state.hatched, 5);\r\n\r\n\t\t\t\tresponse.macroStep = response.macroStep.concat(this.WithdrawBatch(hatching));\r\n\r\n\t\t\t\tresponse.macroStep = response.macroStep.concat(this.getMacro(\"Recenter\"));\r\n\r\n\t\t\t\tthis.state.state = MacroStates.PLAYING; // Go to Playing\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MacroStates.PLAYING: // Hatch the eggs\r\n\t\t\t\tresponse.macroStep = [];\r\n\r\n\t\t\t\tswitch (this.state.phase) {\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 0: // Hatch\r\n\t\t\t\t\t\t// Hatch Eggs\r\n\t\t\t\t\t\tresponse.macroStep = response.macroStep.concat(this.HatchSegment(hatching));\r\n\r\n\t\t\t\t\t\tthis.state.phase = 1;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 1: // Reset\r\n\t\t\t\t\t\tthis.state.hatched += hatching;\r\n\t\t\t\t\t\thatching = 0;\r\n\r\n\t\t\t\t\t\tthis.state.currentBatch += 1;\r\n\r\n\t\t\t\t\t\t// Re-select the Boxes\r\n\t\t\t\t\t\tresponse.macroStep = response.macroStep.concat(generateButtonPress(    \"x\", 180,  840, 1));\r\n\t\t\t\t\t\tresponse.macroStep = response.macroStep.concat(generateButtonPress(\"right\", 180,  240, 1));\r\n\t\t\t\t\t\tresponse.macroStep = response.macroStep.concat(generateButtonPress(   \"up\", 180,  240, 1));\r\n\t\t\t\t\t\tresponse.macroStep = response.macroStep.concat(generateButtonPress(    \"b\", 180, 1720, 1));\r\n\t\t\t\t\t\tresponse.macroStep = response.macroStep.concat(generateButtonPress( \"plus\", 180, 1200, 1));\r\n\r\n\t\t\t\t\t\t// Check for end\r\n\t\t\t\t\t\tif (this.state.hatched === this.parameters.eggsInBox) {\r\n\t\t\t\t\t\t\tthis.state.state = MacroStates.FINISHED;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tthis.state.state = MacroStates.STARTING;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.state.phase = 0;\r\n\t\t\t\t\t\tbreak;\r\n                }\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.state.progress = this.state.traded / this.parameters.count;\r\n\r\n\t\tresponse.state = this.state.state;\r\n\r\n\t\treturn response;\r\n\t}\r\n}\r\n\r\n//\r\n// - Macro Builders\r\n//\r\n\r\n/*\r\nclass MacroBuilder {\r\n\tconstructor(jsonM, name, icon) {\r\n\t\tthis.jsonManager = jsonM;\r\n\r\n\t\tthis.name = name;\r\n\t\tthis.icon = icon;\r\n\r\n\t\tthis.macro = 0;\r\n\t\tthis.macroJSON = [];\r\n\r\n\t\tthis.parameters = {};\r\n\t\tthis.paramHandlers = {};\r\n\r\n\t\tthis.info = [];\r\n\t}\r\n\r\n\tchangeParameter(key, value) {\r\n\t\tlet handler = this.paramHandlers[key];\r\n\r\n\t\treturn handler(value);\r\n\t}\r\n\r\n\tgetMacro(key) {\r\n\t\tif(!this.jsonManager.loadConcluded) return null;\r\n\r\n\t\treturn this.jsonManager.getMacro(key);\r\n\t}\r\n\r\n\tconcatToMacro(segment) {\r\n\t\tthis.macroJSON = this.macroJSON.concat(segment);\r\n\t}\r\n\r\n\t// Render\r\n\tgetRenderData() {\r\n\t\treturn {\r\n\t\t\tname : this.name,\r\n\t\t\ticon : ImagePath + this.icon,\r\n\t\t\tparameters : this.parameters,\r\n\t\t\tinfo : this.info\r\n\t\t};\r\n\t}\r\n}\r\n\r\nclass LotoIDMacroBuilder extends MacroBuilder {\r\n\tconstructor(jsonM) {\r\n\t\tsuper(jsonM, \"Loto ID\", \"lotoid_icon.png\");\r\n\r\n\t\tthis.parameters.attempts  = 1;\r\n\t\tthis.parameters.getFirst  = true;\r\n\t\tthis.parameters.dateFormat = 0;\r\n\r\n\t\tthis.currentFormat = \"\";\r\n\r\n\t\tthis.onAttemptsChange = this.onAttemptsChange.bind(this);\r\n\t\tthis.onGetFirstChange = this.onGetFirstChange.bind(this);\r\n\t\tthis.onDateFormatChange = this.onDateFormatChange.bind(this);\r\n\r\n\t\tthis.paramHandlers = {\r\n\t\t\tattempts   : this.onAttemptsChange,\r\n\t\t\tgetFirst   : this.onGetFirstChange,\r\n\t\t\tdateFormat : this.onDateFormatChange\r\n\t\t};\r\n\r\n\t\tvar text1 = (\r\n\t\t\t<p>\r\n\t\t\t\t<b>1-</b> In the <b>Console Settings</b>, turn <b>Synchronize Time</b> off.\r\n\t\t\t\t<br/>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<b>2-</b> Position the character in front of the PC, facing it.\r\n\t\t\t\t<br/>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<b>3-</b> Check the <b>First Day Loto</b> box only if you have the Loto still available.\r\n\t\t\t\t<br/>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<b>4-</b> Set <b>Attempts</b> to how many times you want to try the Loto.\r\n\t\t\t\t<br/>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<b>5-</b> Set <b>Date Format</b> to the your Switch's region date format.\r\n\t\t\t</p>\r\n\t\t);\r\n\r\n\t\tthis.info = [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"SetUp\",\r\n\t\t\t\ttext: text1\r\n\t\t\t}\r\n\t\t];\r\n\t}\r\n\r\n\t// Parameter Handlers\r\n\tonAttemptsChange(count) {\r\n\t\tif(this.parameters.attempts !== count) {\r\n\t\t\tthis.parameters.attempts = count;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonGetFirstChange(bool) {\r\n\t\tif(this.parameters.getFirst !== bool) {\r\n\t\t\tthis.parameters.getFirst = bool;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonDateFormatChange(format) {\r\n\t\tif(this.parameters.dateFormat !== format) {\r\n\t\t\tthis.parameters.dateFormat = format;\r\n\r\n\t\t\tswitch(format) {\r\n\t\t\t\tdefault:\r\n\t\t\t\tcase 0: // WORLD\r\n\t\t\t\t\tthis.currentFormat = \"\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 1: // US\r\n\t\t\t\t\tthis.currentFormat = \"US\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 2: // Chinese\r\n\t\t\t\t\tthis.currentFormat = \"CHN\";\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Build Macro\r\n\tbuild() {\r\n\t\tif(!this.jsonManager.loadConcluded) return null;\r\n\r\n\t\tthis.macroJSON = []; // Clear Macro JSON\r\n\r\n\t\tvar counter = 0;\r\n\r\n\t\tif(this.parameters.getFirst) {\r\n\t\t\tthis.concatToMacro(this.getMacro(\"LotoID\"));\r\n\r\n\t\t\tcounter = 1;\r\n\t\t}\r\n\r\n\t\t// While End Date has not been reached\r\n\t\twhile(counter < this.parameters.attempts) {\r\n\t\t\tthis.concatToMacro(this.getMacro(\"Universal\" + this.currentFormat));\r\n\t\t\tcounter++;\r\n\r\n\t\t\tthis.concatToMacro(generateButtonPress(\"home\", 100, 1000, 2));\r\n\r\n\t\t\tthis.concatToMacro(this.getMacro(\"LotoID\"));\r\n\t\t}\r\n\r\n\t\tthis.macro = new Macro(this.name, this.icon, this.macroJSON);\r\n\r\n\t\treturn this.macro;\r\n\t}\r\n}\r\n\r\nclass EggHatcherMacroBuilder extends MacroBuilder {\r\n\tconstructor(jsonM) {\r\n\t\tsuper(jsonM, \"Egg Hatcher\", \"egghatcher_icon.png\");\r\n\r\n\t\tthis.parameters.eggCycles = 5;\r\n\t\tthis.parameters.ability   = false;\r\n\t\tthis.parameters.eggCharm  = false;\r\n\t\tthis.parameters.eggsInBox = 1;\r\n\r\n\t\tthis.onEggCyclesChange   = this.onEggCyclesChange.bind(this);\r\n\t\tthis.onHasAbilityChange  = this.onHasAbilityChange.bind(this);\r\n\t\tthis.onEggsInBoxChange   = this.onEggsInBoxChange.bind(this);\r\n\r\n\t\tthis.paramHandlers = {\r\n\t\t\teggCycles : this.onEggCyclesChange,\r\n\t\t\tability   : this.onHasAbilityChange,\r\n\t\t\teggsInBox : this.onEggsInBoxChange\r\n\t\t};\r\n\r\n\t\tvar text1 = (\r\n\t\t\t<p>\r\n\t\t\t\t<b>1-</b> Open your PC and navigate to the Box with the eggs. Make sure that the box was filled from up to down, left to right.\r\n\t\t\t\tThis means the eggs should be placed column per column not row per row as is normal, if the box is full this doesn't matter.\r\n\t\t\t\t<br/>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<b>2-</b> You must leave the <b>Pokmon</b> option selected when exiting the game's menu.\r\n\t\t\t\t<br/>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<b>3-</b> When starting the macro, the <b>Player Character</b> must be near the <b>Nursery</b> at the Wild Area and not on the bike.\r\n\t\t\t\t<br/>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<b>4-</b> Set the <b>Egg Cycles</b> parameter to how many cycles the egg takes to hatch, this can be checked on sites like Bulbapedia.\r\n\t\t\t\t<br/>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<b>5-</b> Check the <b>Hatch Ability</b> box if the first pokemon in the party has one of the following abilities: Flame Body, Magma Armor or Steam Engine.\r\n\t\t\t\t<br/>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<b>6-</b> Set the <b>Eggs in Box</b> parameter to how many eggs you have in the box to be hatched.\r\n\t\t\t</p>\r\n\t\t);\r\n\r\n\t\tthis.info = [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"SetUp\",\r\n\t\t\t\ttext: text1\r\n\t\t\t}\r\n\t\t];\r\n\t}\r\n\r\n\t// Parameter Handlers\r\n\tonEggCyclesChange(cycles) {\r\n\t\tcycles = 5 * (parseInt(cycles) + 1);\r\n\r\n\t\tif(this.parameters.eggCycles !== cycles) {\r\n\t\t\tthis.parameters.eggCycles = cycles;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonHasAbilityChange(bool) {\r\n\t\tif(this.parameters.ability !== bool) {\r\n\t\t\tthis.parameters.ability = bool;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonEggsInBoxChange(count) {\r\n\t\tif(this.parameters.eggsInBox !== count) {\r\n\t\t\tthis.parameters.eggsInBox = count;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Build Macro\r\n\tInBoxSegment(type, cColumn, cRow, tColumn, tRow) {\r\n\t\tvar segments = this.getMacro(type + \"InBox\");\r\n\r\n\t\tlet dx = tColumn - cColumn;\r\n\t\tlet dy = tRow - cRow;\r\n\r\n\t\tif(dx > 0) {\r\n\t\t\tsegments[0].macro[0].count = dx;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsegments[0].macro[1].count = -1 * dx;\r\n\t\t}\r\n\r\n\t\tif(dy > 0) {\r\n\t\t\tsegments[0].macro[2].count = dy;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsegments[0].macro[3].count = -1 * dy;\r\n\t\t}\r\n\r\n\t\tif(type === \"Select\") {\r\n\t\t\tsegments[0].macro[6].offTime = 600;\r\n\t\t}\r\n\r\n\t\tthis.concatToMacro(segments);\r\n\t}\r\n\r\n\tHatchSegment(eggsInParty) {\r\n\t\tlet segments = this.getMacro(\"Hatching\");\r\n\r\n\t\t// Calculate steps to hatch egg\r\n\t\tlet cycles = this.parameters.eggCycles;\r\n\t\tif(this.parameters.ability) cycles = cycles / 2;\r\n\r\n\t\t// Calculate time to hatch\r\n\t\tlet time = cycles * 6400;\r\n\r\n\t\tsegments[0].macro[2].onTime = time;\r\n\t\tsegments[0].macro[3].onTime = time;\r\n\r\n\t\tsegments[1].count = eggsInParty;\r\n\r\n\t\tthis.concatToMacro(segments);\r\n\t}\r\n\r\n\tbuild() {\r\n\t\tif(!this.jsonManager.loadConcluded) return null;\r\n\r\n\t\tthis.macroJSON = []; // Clear Macro JSON\r\n\r\n\t\tlet count  = 0;\r\n\r\n\t\tlet sX = 0;\r\n\r\n\t\twhile(count < this.parameters.eggsInBox) {\r\n\t\t\tthis.concatToMacro(this.getMacro(\"OpenBox\"));\r\n\r\n\t\t\t// Get Eggs into the Party\r\n\t\t\tlet sY = 0;\r\n\r\n\t\t\tlet cX = 0;\r\n\t\t\tlet cY = 0;\r\n\r\n\t\t\twhile(sY < 5 && count < this.parameters.eggsInBox) {\r\n\t\t\t\tthis.InBoxSegment(\"Select\", cX, cY, sX, sY);\r\n\r\n\t\t\t\tcX = sX;\r\n\t\t\t\tcY = sY;\r\n\r\n\t\t\t\tthis.InBoxSegment(\"Place\", cX, cY, -1, 1 + sY);\r\n\r\n\t\t\t\tcX = -1;\r\n\t\t\t\tcY = 1 + sY;\r\n\r\n\t\t\t\tsY++;\r\n\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\r\n\t\t\tsX++;\r\n\r\n\t\t\t// Exit PC to Menu\r\n\t\t\tthis.concatToMacro(generateButtonPress(   \"b\", 180, 1480, 1));\r\n\t\t\tthis.concatToMacro(generateButtonPress(   \"b\", 180, 1720, 1));\r\n\r\n\t\t\t// Select Map\r\n\t\t\tthis.concatToMacro(generateButtonPress(\"left\", 180,  240, 1));\r\n\t\t\tthis.concatToMacro(generateButtonPress(\"down\", 180,  240, 1));\r\n\r\n\t\t\t// Recenter at Nursery\r\n\t\t\tthis.concatToMacro(generateButtonPress(   \"a\", 180, 2400, 3));\r\n\r\n\t\t\t// Hatch Eggs\r\n\t\t\tthis.HatchSegment(sY);\r\n\r\n\t\t\t// Select the PC\r\n\t\t\tthis.concatToMacro(generateButtonPress(    \"x\", 180,  840, 1));\r\n\t\t\tthis.concatToMacro(generateButtonPress(\"right\", 180,  240, 1));\r\n\t\t\tthis.concatToMacro(generateButtonPress(   \"up\", 180,  240, 1));\r\n\t\t\tthis.concatToMacro(generateButtonPress(    \"b\", 180, 1720, 1));\r\n\t\t\tthis.concatToMacro(generateButtonPress( \"plus\", 180, 1200, 1));\r\n\t\t}\r\n\r\n\t\tthis.macro = new Macro(this.name, this.icon, this.macroJSON);\r\n\r\n\t\treturn this.macro;\r\n\t}\r\n}\r\n\r\nclass BreedingMacroBuilder extends MacroBuilder {\r\n\tconstructor(jsonM) {\r\n\t\tsuper(jsonM, \"Breeding\", \"egghatcher_icon.png\");\r\n\r\n\t\tthis.parameters.eggCycles = 5;\r\n\t\tthis.parameters.ability   = false;\r\n\t\tthis.parameters.eggCharm  = false;\r\n\r\n\t\tthis.onEggCyclesChange   = this.onEggCyclesChange.bind(this);\r\n\t\tthis.onHasAbilityChange  = this.onHasAbilityChange.bind(this);\r\n\r\n\t\tthis.paramHandlers = {\r\n\t\t\teggCycles : this.onEggCyclesChange,\r\n\t\t\tability   : this.onHasAbilityChange\r\n\t\t};\r\n\r\n\t\tvar text1 = (\r\n\t\t\t<p>\r\n\t\t\t\t<b>1-</b> Open your PC and navigate to the Box with the eggs. Make sure that the box was filled from up to down, left to right.\r\n\t\t\t\tThis means the eggs should be placed column per column not row per row as is normal, if the box is full this doesn't matter.\r\n\t\t\t\t<br/>\r\n\t\t\t\t<br/>\r\n\t\t\t\t<b>2-</b> You must leave the <b>Pokmon</b> option selected when exiting the game's menu.\r\n\t\t\t</p>\r\n\t\t);\r\n\r\n\t\tthis.info = [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"SetUp\",\r\n\t\t\t\ttext: text1\r\n\t\t\t}\r\n\t\t];\r\n\t}\r\n\r\n\t// Parameter Handlers\r\n\tonEggCyclesChange(cycles) {\r\n\t\tcycles = 5 * (parseInt(cycles) + 1);\r\n\r\n\t\tif(this.parameters.eggCycles !== cycles) {\r\n\t\t\tthis.parameters.eggCycles = cycles;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonHasAbilityChange(bool) {\r\n\t\tif(this.parameters.ability !== bool) {\r\n\t\t\tthis.parameters.ability = bool;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Build Macro\r\n\tHatchSegment() {\r\n\t\tlet segments = this.getMacro(\"Hatching\");\r\n\r\n\t\t// Calculate steps to hatch egg\r\n\t\tlet cycles = this.parameters.eggCycles;\r\n\t\tif(this.parameters.ability) cycles = cycles / 2;\r\n\r\n\t\t// Calculate time to hatch\r\n\t\tlet time = cycles * 6400;\r\n\r\n\t\tsegments[0].macro[2].onTime = time;\r\n\t\tsegments[0].macro[3].onTime = time;\r\n\r\n\t\tsegments[1].count = 1;\r\n\r\n\t\tthis.concatToMacro(segments);\r\n\t}\r\n\r\n\tBackToNursery() {\r\n\t\t// Open Menu\r\n\t\tthis.concatToMacro(generateButtonPress(   \"x\", 180, 1480, 1));\r\n\r\n\t\t// Select Map\r\n\t\tthis.concatToMacro(generateButtonPress(\"left\", 180,  240, 1));\r\n\t\tthis.concatToMacro(generateButtonPress(\"down\", 180,  240, 1));\r\n\r\n\t\t// Recenter at Nursery\r\n\t\tthis.concatToMacro(generateButtonPress(   \"a\", 180, 2400, 3));\r\n\t}\r\n\r\n\tPickUpEgg() {\r\n\t\t// Get Off Bike\r\n\t\tthis.concatToMacro(generateButtonPress(\"plus\", 120, 360, 1));\r\n\r\n\t\t// Walk towards breeder\r\n\t\tthis.concatToMacro(generateJoystickPush(\"left\", 3000, 240, 100, 270));\r\n\r\n\t\t// Rotate to breeder\r\n\t\tthis.concatToMacro(generateJoystickPush(\"left\",  500, 120, 100, 180));\r\n\r\n\t\t// Dialogue up to select pokemon to swap\r\n\t\tthis.concatToMacro(generateButtonPress(   \"a\", 1000, 120, 5));\r\n\r\n\t\t// Select just hatched pokemon\r\n\t\tthis.concatToMacro(generateButtonPress(\"down\",  240, 120, 1));\r\n\r\n\t\t// Finish dialogue\r\n\t\tthis.concatToMacro(generateButtonPress(   \"a\", 1000, 120, 3));\r\n\t}\r\n\r\n\tbuild() {\r\n\t\tif(!this.jsonManager.loadConcluded) return null;\r\n\r\n\t\tthis.macroJSON = []; // Clear Macro JSON\r\n\r\n\t\tlet count = 0;\r\n\r\n\t\twhile(count < this.parameters.eggsInBox) {\r\n\t\t\tthis.concatToMacro(this.getMacro(\"OpenBox\"));\r\n\r\n\t\t\t// Hatch Egg\r\n\t\t\tthis.HatchSegment();\r\n\r\n\t\t\t// Go back to the Nursery\r\n\t\t\tthis.BackToNursery();\r\n\r\n\t\t\t// Pick Up Egg\r\n\t\t\tthis.PickUpEgg();\r\n\r\n\t\t\t// Select the PC\r\n\t\t\tthis.concatToMacro(generateButtonPress(    \"x\", 180,  840, 1));\r\n\t\t\tthis.concatToMacro(generateButtonPress(\"right\", 180,  240, 1));\r\n\t\t\tthis.concatToMacro(generateButtonPress(   \"up\", 180,  240, 1));\r\n\t\t\tthis.concatToMacro(generateButtonPress(    \"b\", 180, 1720, 1));\r\n\t\t\tthis.concatToMacro(generateButtonPress( \"plus\", 180, 1200, 1));\r\n\t\t}\r\n\r\n\t\tthis.macro = new Macro(this.name, this.icon, this.macroJSON);\r\n\r\n\t\treturn this.macro;\r\n\t}\r\n}\r\n*/\r\n\r\n\r\n//\r\n// - APP Components\r\n//\r\n\r\nclass MacroExecuter {\r\n\tconstructor() {\r\n\t\tthis.state = MacroStates.INACTIVE;\r\n\r\n\t\tthis.onWait = false;\r\n\r\n\t\tthis.executing = null;\r\n\r\n\t\tthis.commands = [];\r\n\t}\r\n\r\n\r\n\texecute(toExecute) {\r\n\t\tvar f = function* (toExecute) {\r\n\t\t\tvar info = { state: this.state, abort: false };\r\n\r\n\t\t\t// For each Segment\r\n\t\t\tvar i = 0;\r\n\t\t\tfor(; i < toExecute.length; i++) {\r\n\t\t\t\tvar segment = toExecute[i];\r\n\r\n\t\t\t\tvar steps = segment.macro;\r\n\t\t\t\tvar reps  = segment.count;\r\n\r\n\t\t\t\t// For each Repetition of the Segment\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\tfor(; j < reps; j++) {\r\n\r\n\t\t\t\t\t// For each Step of the Segment\r\n\t\t\t\t\tvar k = 0;\r\n\t\t\t\t\tfor(; k < steps.length; k++) {\r\n\r\n\t\t\t\t\t\t// If play has not been pressed or has been paused\r\n\t\t\t\t\t\twhile (this.state !== PlayerStates.EXECUTING) {\r\n\t\t\t\t\t\t\tinfo = yield undefined; // Yield\r\n\r\n\t\t\t\t\t\t\tif(info.abort) return;\r\n\r\n\t\t\t\t\t\t\tthis.state = info.state;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Get current Step\r\n\t\t\t\t\t\tvar step = steps[k];\r\n\r\n\t\t\t\t\t\t// Make command\r\n\t\t\t\t\t\tlet command = this.makeCommand(step.button,  true, step.strength, step.angle);\r\n\t\t\t\t\t\tlet reset   = this.makeCommand(step.button, false,             0,          0);\r\n\r\n\t\t\t\t\t\t// Check if input blocks progress\r\n\t\t\t\t\t\tlet block = step.block === undefined || step.block === true;\r\n\r\n\t\t\t\t\t\t// For each repetition of the Step\r\n\t\t\t\t\t\tvar l = 0;\r\n\t\t\t\t\t\tfor(l = 0; l < step.count; l++) {\r\n\t\t\t\t\t\t\tthis.commands.push(command);\r\n\r\n\t\t\t\t\t\t\t// Set timed command\r\n\t\t\t\t\t\t\tthis.timedCommand(reset, block, Math.max(step.onTime, 20));\r\n\r\n\t\t\t\t\t\t\tyield this.commands;\r\n\t\t\t\t\t\t\tthis.commands = [];\r\n\r\n\t\t\t\t\t\t\t// Wait\r\n\t\t\t\t\t\t\twhile(this.onWait) {\r\n\t\t\t\t\t\t\t\tinfo = yield undefined;\r\n\t\t\t\t\t\t\t\tif(info.abort) return;\r\n\t\t\t\t\t\t\t\tthis.state = info.state;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// If there is a buffer before the next button press\r\n\t\t\t\t\t\t\tif(block === true && step.offTime > 0) {\r\n\t\t\t\t\t\t\t\tthis.onWait = true;\r\n\r\n\t\t\t\t\t\t\t\t// Set timer for the wait before pressing the next button\r\n\t\t\t\t\t\t\t\tthis.timedCommand(null, block, Math.max(step.offTime, 20));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tyield this.commands;\r\n\t\t\t\t\t\t\tthis.commands = [];\r\n\r\n\t\t\t\t\t\t\t// Wait for timer to elapse and to not be paused\r\n\t\t\t\t\t\t\twhile(this.onWait || this.state === PlayerStates.PAUSED) {\r\n\t\t\t\t\t\t\t\tinfo = yield undefined;\r\n\t\t\t\t\t\t\t\tif(info.abort) return;\r\n\t\t\t\t\t\t\t\tthis.state = info.state;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.currentOverallStep++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t};\r\n\r\n\t\t// Create the Coroutine\r\n\t\tthis.executing = coroutine(f, this, [toExecute]);\r\n\t}\r\n\r\n\r\n\tmakeCommand(button, pressed, strength, angle) {\r\n\t\treturn {\r\n\t\t\tbutton   : button,\r\n\t\t\tpressed  : pressed,\r\n\t\t\tstrength : strength,\r\n\t\t\tangle    : angle\r\n\t\t};\r\n\t}\r\n\r\n\ttimedCommand(command, blocking, duration) {\r\n\t\tsetTimeout(this.issueCommand, duration, this, command, blocking); // New Timer\r\n\r\n\t\t// Block Macro progress\r\n\t\tthis.onWait = blocking;\r\n\t}\r\n\r\n\tissueCommand(obj, command, blocking) {\r\n\t\tif(command !== null) {\r\n\t\t\tobj.commands.push(command);\r\n\t\t}\r\n\r\n\t\t// If step was blocking, unblock\r\n\t\tif(blocking) obj.onWait = false;\r\n\t}\r\n\r\n\r\n\treset() {\r\n\t\tthis.state = PlayerStates.INACTIVE;\r\n\r\n\t\tif(this.onWait) {\r\n\t\t\tthis.onWait = false;\r\n\r\n\t\t\tclearTimeout(this.waitTimeout);\r\n\r\n\t\t\tthis.waitTimeout = null;\r\n\t\t}\r\n\r\n\t\tif (this.executing !== null) {\r\n\t\t\tthis.executing({state : this.state, abort : true});\r\n\r\n\t\t\tthis.executing = null;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass MacroPlayer {\r\n\tconstructor() {\r\n\t\tthis.state = {\r\n\t\t\tselectedMacro: 0,\r\n\t\t\tplayState: PlayerStates.INACTIVE,\r\n\t\t\tmacroProgress: 0,\r\n\t\t\tmacroDuration: 0,\r\n\t\t\tmacroRunTime: 0,\r\n\t\t\tloadConcluded : false\r\n\t\t};\r\n\r\n\t\t// Create JSON Manager\r\n\t\tthis.jsonManager = new JSONManeger();\r\n\r\n\t\t// Create Macro Controllers\r\n\t\tthis.controllers = [];\r\n\t\tthis.controllers[0] = new TimeSkipMacro(this.jsonManager);\r\n\t\tthis.controllers[1] = new WonderBoxMacro(this.jsonManager);\r\n\t\tthis.controllers[2] = new EggHatcherMacro(this.jsonManager);\r\n\r\n\t\t// Bind Input Methods\r\n\t\tthis.selectMacro     = this.selectMacro.bind(this);\r\n\t\tthis.changeParameter = this.changeParameter.bind(this);\r\n\r\n\t\t// Create Macro Executer\r\n\t\tthis.executer = new MacroExecuter();\r\n\t}\r\n\r\n\r\n\tcheckLoadConcluded() {\r\n\t\tthis.state.loadConcluded = this.jsonManager.loadConcluded;\r\n\t}\r\n\r\n\r\n\tselectMacro(index) {\r\n\t\tif(this.state.selectedMacro === index) return false;\r\n\r\n\t\tplayClickSound();\r\n\r\n\t\tvar selected = this.controllers[this.state.selectedMacro];\r\n\r\n\t\tvar macroState = selected.getMacroState();\r\n\r\n\t\tif(macroState !== MacroStates.INACTIVE) {\r\n\t\t\tselected.reset();\r\n\r\n\t\t\tthis.state.playState     = PlayerStates.INACTIVE;\r\n\t\t\tthis.state.macroProgress = 0;\r\n\r\n\t\t\tthis.executer.reset();\r\n\t\t}\r\n\r\n\t\tthis.state.selectedMacro = index;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tchangeParameter(key, value) {\r\n\t\tlet controller = this.controllers[this.state.selectedMacro];\r\n\r\n\t\tcontroller.changeParameter(key, value);\r\n\t}\r\n\r\n\r\n\tplay() {\r\n\t\tswitch (this.state.playState) {\r\n\t\t\tdefault:\r\n\t\t\tcase PlayerStates.WAITING:\r\n\t\t\tcase PlayerStates.EXECUTING:\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tcase PlayerStates.PAUSED:\r\n\t\t\t\tif (this.executer.executing !== undefined) {\r\n\t\t\t\t\tthis.state.playState = PlayerStates.EXECUTING;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.state.playState = PlayerStates.WAITING;\r\n                }\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tcase PlayerStates.INACTIVE:\r\n\t\t\tcase PlayerStates.CONCLUDED:\r\n\t\t\t\tthis.reset();\r\n\r\n\t\t\t\tvar selected = this.controllers[this.state.selectedMacro];\r\n\r\n\t\t\t\tselected.start();\r\n\r\n\t\t\t\tthis.state.macroDuration = selected.getDuration();\r\n\t\t\t\tthis.state.macroRunTime  = 0;\r\n\r\n\t\t\t\tthis.state.playState = PlayerStates.WAITING;\r\n\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\tpause() {\r\n\t\tif (this.state.playState === PlayerStates.WAITING ||\r\n\t\t\tthis.state.playState === PlayerStates.EXECUTING) {\r\n\t\t\tthis.state.playState = PlayerStates.PAUSED;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\treset() {\r\n\t\tvar selected = this.controllers[this.state.selectedMacro];\r\n\r\n\t\tif (this.state.playState !== PlayerStates.INACTIVE) {\r\n\t\t\tselected.reset();\r\n\r\n\t\t\tthis.state.playState = PlayerStates.INACTIVE;\r\n\t\t\tthis.state.macroProgress = 0;\r\n\t\t\tthis.state.macroDuration = 0;\r\n\t\t\tthis.state.macroRunTime  = 0;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\tgetMacroState() {\r\n\t\treturn {\r\n\t\t\tmacroState: this.state.playState,\r\n\t\t\tmacroProgress: this.state.macroProgress,\r\n\t\t\tmacroDuration: this.state.macroDuration,\r\n\t\t\tmacroRunTime: this.state.macroRunTime\r\n\t\t};\r\n\t}\r\n\r\n\tgetAllMacroData() {\r\n\t\tlet dataArray = [];\r\n\r\n\t\tlet i = 0;\r\n\t\tfor(; i < this.controllers.length; i++) {\r\n\t\t\tlet controller = this.controllers[i];\r\n\r\n\t\t\tdataArray[i] = controller.getRenderData();\r\n\t\t}\r\n\r\n\t\treturn dataArray;\r\n\t}\r\n\r\n\tgetMacroRenderData() {\r\n\t\tvar controller = this.controllers[this.state.selectedMacro];\r\n\r\n\t\treturn controller.getRenderData();\r\n\t}\r\n\r\n\r\n\tupdate(currentTime) {\r\n\t\tvar response  = undefined;\r\n\t\tvar runResult = undefined;\r\n\r\n\t\tif(!this.state.loadConcluded) {\r\n\t\t\tthis.checkLoadConcluded();\r\n\t\t}\r\n\r\n\t\t// If Load has been completed\r\n\t\tif(this.state.loadConcluded) {\r\n\t\t\t// Get selected Macro's Controller\r\n\t\t\tvar selected = this.controllers[this.state.selectedMacro];\r\n\r\n\t\t\t// If waiting for the Macro controller to issue the next step\r\n\t\t\tif (this.state.playState === PlayerStates.WAITING) {\r\n\t\t\t\tvar result = selected.update(currentTime);\r\n\r\n\t\t\t\tthis.state.macroProgress = selected.getMacroProgress() * 100;\r\n\r\n\t\t\t\t// If there was a result from updating the Controller\r\n\t\t\t\tif (result !== undefined && result !== null) {\r\n\t\t\t\t\tvar macro = result.macroStep;\r\n\r\n\t\t\t\t\t// If a new macro step was issued\r\n\t\t\t\t\tif (macro !== undefined) {\r\n\t\t\t\t\t\tthis.executer.execute(macro); // Start execution\r\n\r\n\t\t\t\t\t\tthis.state.playState = PlayerStates.EXECUTING; // Go to Executing\r\n\t\t\t\t\t}\r\n                }\r\n            }\r\n\r\n\t\t\t// Give Executer Orders and get result\r\n\t\t\tswitch (this.state.playState) {\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tcase PlayerStates.EXECUTING:\r\n\t\t\t\t\tthis.state.macroRunTime += 20;\r\n\r\n\t\t\t\t\trunResult = this.executer\r\n\t\t\t\t\t\t.executing({ state: this.state.playState, abort: false });\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase PlayerStates.PAUSED:\r\n\t\t\t\t\tif (this.executer.executing !== undefined) {\r\n\t\t\t\t\t\trunResult = this.executer\r\n\t\t\t\t\t\t\t.executing({ state: this.state.playState, abort: false });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t// If a result was obtained\r\n\t\t\tif(runResult !== undefined) {\r\n\t\t\t\t// If the result includes a value\r\n\t\t\t\tif(runResult.value !== undefined) {\r\n\t\t\t\t\tresponse = runResult.value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If this Step execution has concluded\r\n\t\t\t\tif (runResult.done) {\r\n\t\t\t\t\tvar macroState = selected.getMacroState();\r\n\r\n\t\t\t\t\tswitch (macroState) {\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tthis.state.playState = PlayerStates.WAITING;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MacroStates.PAUSED:\r\n\t\t\t\t\t\t\tthis.state.playState = PlayerStates.PAUSED;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MacroStates.FINISHED:\r\n\t\t\t\t\t\t\tthis.state.playState = PlayerStates.CONCLUDED;\r\n\t\t\t\t\t\t\tbreak;\r\n                    }\r\n\r\n\t\t\t\t\tthis.executer.executing = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn response;\r\n\t}\r\n}\r\n\r\nclass KeyLogger {\r\n\tconstructor() {\r\n\t\tthis.keys = {\r\n\t\t\ta               : {pressed : false, pendingLog: null},\r\n\t\t\tb               : {pressed : false, pendingLog: null},\r\n\t\t\tx               : {pressed : false, pendingLog: null},\r\n\t\t\ty               : {pressed : false, pendingLog: null},\r\n\t\t\tl               : {pressed : false, pendingLog: null},\r\n\t\t\tlsl             : {pressed : false, pendingLog: null},\r\n\t\t\tlsr             : {pressed : false, pendingLog: null},\r\n\t\t\tr               : {pressed : false, pendingLog: null},\r\n\t\t\trsl             : {pressed : false, pendingLog: null},\r\n\t\t\trsr             : {pressed : false, pendingLog: null},\r\n\t\t\tplus            : {pressed : false, pendingLog: null},\r\n\t\t\tminus           : {pressed : false, pendingLog: null},\r\n\t\t\tup              : {pressed : false, pendingLog: null},\r\n\t\t\tright           : {pressed : false, pendingLog: null},\r\n\t\t\tleft            : {pressed : false, pendingLog: null},\r\n\t\t\tdown            : {pressed : false, pendingLog: null},\r\n\t\t\tleft_stick      : {pressed : false, pendingLog: null},\r\n\t\t\tright_stick     : {pressed : false, pendingLog: null},\r\n\t\t\tleft_stick_dir  : {pressed : false, pendingLog: null},\r\n\t\t\tright_stick_dir : {pressed : false, pendingLog: null},\r\n\t\t\thome            : {pressed : false, pendingLog: null}\r\n\t\t};\r\n\r\n\t\tthis.startTime = 0;\r\n\r\n\t\tthis.log = [];\r\n\t\tthis.log_count = 0;\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.keys = {\r\n\t\t\ta               : {pressed : false, pendingLog: null},\r\n\t\t\tb               : {pressed : false, pendingLog: null},\r\n\t\t\tx               : {pressed : false, pendingLog: null},\r\n\t\t\ty               : {pressed : false, pendingLog: null},\r\n\t\t\tl               : {pressed : false, pendingLog: null},\r\n\t\t\tlsl             : {pressed : false, pendingLog: null},\r\n\t\t\tlsr             : {pressed : false, pendingLog: null},\r\n\t\t\tr               : {pressed : false, pendingLog: null},\r\n\t\t\trsl             : {pressed : false, pendingLog: null},\r\n\t\t\trsr             : {pressed : false, pendingLog: null},\r\n\t\t\tplus            : {pressed : false, pendingLog: null},\r\n\t\t\tminus           : {pressed : false, pendingLog: null},\r\n\t\t\tup              : {pressed : false, pendingLog: null},\r\n\t\t\tright           : {pressed : false, pendingLog: null},\r\n\t\t\tleft            : {pressed : false, pendingLog: null},\r\n\t\t\tdown            : {pressed : false, pendingLog: null},\r\n\t\t\tleft_stick      : {pressed : false, pendingLog: null},\r\n\t\t\tright_stick     : {pressed : false, pendingLog: null},\r\n\t\t\tleft_stick_dir  : {pressed : false, pendingLog: null},\r\n\t\t\tright_stick_dir : {pressed : false, pendingLog: null},\r\n\t\t\thome            : {pressed : false, pendingLog: null}\r\n\t\t};\r\n\r\n\t\tthis.startTime = 0;\r\n\r\n\t\tthis.log = [];\r\n\t\tthis.log_count = 0;\r\n\t}\r\n\r\n\tpressKey(key, time) {\r\n\t\tif(key !== \"buffer\") {\r\n\t\t\tlet info = this.keys[key];\r\n\r\n\t\t\t// If key is not pressed\r\n\t\t\tif(info.pressed === false) {\r\n\t\t\t\tinfo.pressed = true;\r\n\r\n\t\t\t\tif(this.startTime === 0) {\r\n\t\t\t\t\tthis.startTime = time;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinfo.pendingLog = this.addLogEntry(key, time - this.startTime);\r\n\t\t\t}\r\n\r\n\t\t\tthis.keys[key] = info;\r\n\t\t}\r\n\t}\r\n\r\n\taddLogEntry(key, time) {\r\n\t\tlet entry = {index: this.log_count, key: key, start: time, duration: 0}\r\n\r\n\t\tthis.log[this.log_count] = entry;\r\n\r\n\t\tthis.log_count++;\r\n\r\n\t\treturn entry;\r\n\t}\r\n\r\n\treleaseKey(key, time) {\r\n\t\tif(key !== \"buffer\") {\r\n\t\t\tlet info = this.keys[key];\r\n\r\n\t\t\tif(info.pressed === true) {\r\n\t\t\t\tinfo.pressed = false;\r\n\r\n\t\t\t\tlet entry = info.pendingLog;\r\n\t\t\t\tinfo.pendingLog = null;\r\n\r\n\t\t\t\tentry.duration = time - entry.start - this.startTime;\r\n\r\n\t\t\t\tthis.log[entry.index] = entry;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetPressed() {\r\n\t\tlet pressedKeys = [];\r\n\r\n\t\tfor(let entry in this.keys) {\r\n\t\t\tlet info = this.keys[entry];\r\n\r\n\t\t\tif(info.pressed === true) {\r\n\t\t\t\tpressedKeys.push(entry);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn pressedKeys;\r\n\t}\r\n\r\n\tupdate(key, pressed) {\r\n\t\tlet time = (new Date()).getTime();\r\n\r\n\t\t// If key is being pressed\r\n\t\tif(pressed) {\r\n\t\t\tthis.pressKey(key, time);\r\n\t\t}\r\n\t\t// If key is being released\r\n\t\telse {\r\n\t\t\tthis.releaseKey(key, time);\r\n\t\t}\r\n\t}\r\n\r\n\trenderPressed() {\r\n\t\tlet info = Object.entries(this.keys);\r\n\r\n\t\tlet render = [];\r\n\t\tlet count  =  0;\r\n\r\n\t\tlet i = 0;\r\n\t\tfor(; i < info.length; i++) {\r\n\t\t\tlet keyData = info[i];\r\n\r\n\t\t\tif(keyData[1].pressed === true) {\r\n\t\t\t\trender[count] = (\r\n\t\t\t\t\t<div className = \"pressedKey\" key = {keyData[0]}>\r\n\t\t\t\t\t\t{keyData[0]}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id = \"PressedKeys\">\r\n\t\t\t\t<b> Pressed </b>\r\n\t\t\t\t{render}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderLogged() {\r\n\t\tvar keyLogs = [];\r\n\r\n\t\tif(this.log_count > 0) {\r\n\t\t\tvar i = 0;\r\n\t\t\tfor(; i < Math.min(3, this.log_count); i++) {\r\n\t\t\t\tvar l = this.log[this.log_count - (i + 1)];\r\n\t\t\t\tkeyLogs.push(\r\n\t\t\t\t\t<KeyLog key = {\"keylog_\" + i} index = {l.index.toString()}\r\n\t\t\t\t\t\tpressedKey = {l.key} start = {l.start} duration = {l.duration}/>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id = \"KeyLogs\">\r\n\t\t\t\t{keyLogs}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n//\r\n// - APP\r\n//\r\n\r\nclass App extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\r\n\t\tthis.onButtonEvent   = this.onButtonEvent.bind(this);\r\n\t\tthis.selectMacro     = this.selectMacro.bind(this);\r\n\t\tthis.parameterChange = this.parameterChange.bind(this);\r\n\r\n\t\tthis.macroPlayer = new MacroPlayer();\r\n\r\n\t\tthis.keyLogger = new KeyLogger();\r\n\t\tthis.currentTime = 0;\r\n\r\n\t\tthis.state = {displayStartM : true,\r\n\t\t\t\t\t  selectedMacro :  0,\r\n\t\t\t\t\t  macroState    : -1,\r\n\t\t\t\t\t  macroProgress :  0,\r\n\t\t\t\t\t  macroDuration :  0,\r\n\t\t\t\t\t  macroRunTime  :  0,\r\n\t\t\t\t\t  displayInfo   : false\r\n\t\t};\r\n\t}\r\n\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.UpdateTimerId = setInterval(\r\n\t\t\t() => this.update(),\r\n\t\t\t20\r\n\t\t);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.UpdateTimerId);\r\n\t}\r\n\r\n\r\n\tupdate() {\r\n\t\tthis.currentTime += 20;\r\n\r\n\t\tvar res = this.macroPlayer.update(this.currentTime);\r\n\r\n\t\tthis.setState(this.macroPlayer.getMacroState());\r\n\r\n\t\t// If there was an Update\r\n\t\tif(res !== undefined) {\r\n\t\t\t// Iterate the Log\r\n\t\t\tlet i;\r\n\t\t\tfor(i = 0; i < res.length; i++) {\r\n\t\t\t\tlet command = res[i];\r\n\r\n\t\t\t\tconsole.log(command);\r\n\r\n\t\t\t\t// If it was a JoyStick Update\r\n\t\t\t\tif(command.button === \"right_stick_dir\" ||\r\n\t\t\t\t\t command.button === \"left_stick_dir\") {\r\n\t\t\t\t\tthis.handleSwitchJoySticks(command.button, command.strength, command.angle);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If it was a Key Update\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.handleSwitchKeys(command.button, command.pressed);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.keyLogger.update(command.button, command.pressed);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tonButtonEvent(name) {\r\n\t\tvar audio = new Audio(process.env.PUBLIC_URL + \"/assets/click.mp3\");\r\n\t\taudio.play();\r\n\r\n\t\tswitch (name) {\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\r\n\t\t\tcase \"startMessage\":\r\n\t\t\t\tlet pressedSM = !this.state.displayStartM;\r\n\t\t\t\tthis.setState({ displayStartM: pressedSM });\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"play\":\r\n\t\t\t\tthis.macroPlayer.play();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"pause\":\r\n\t\t\t\tthis.macroPlayer.pause();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"reset\":\r\n\t\t\t\tif(this.macroPlayer.reset()) {\r\n\t\t\t\t\tvar pressedKeys = this.keyLogger.getPressed();\r\n\r\n\t\t\t\t\tlet i;\r\n\t\t\t\t\tfor(i = 0; i < pressedKeys.length; i++) {\r\n\t\t\t\t\t\tlet key = pressedKeys[i];\r\n\r\n\t\t\t\t\t\tif(key === \"left_stick_dir\" ||\r\n\t\t\t\t\t\t\t key === \"right_stick_dir\") {\r\n\t\t\t\t\t\t\tthis.handleSwitchJoySticks(key, 0, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tthis.handleSwitchKeys(key, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.keyLogger.clear();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"info\":\r\n\t\t\t\tlet pressedI = !this.state.displayInfo;\r\n\t\t\t\tthis.setState({displayInfo: pressedI});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.setState(this.macroPlayer.getMacroState());\r\n\t}\r\n\r\n\r\n\tselectMacro(index) {\r\n\t\tif(this.macroPlayer.selectMacro(index)) {\r\n\t\t\tthis.keyLogger.clear();\r\n\t\t}\r\n\t}\r\n\r\n\tparameterChange(key, value) {\r\n\t\tthis.macroPlayer.changeParameter(key, value);\r\n\t}\r\n\r\n\r\n\thandleSwitchJoySticks(joystick, strength, angle) {\r\n\t\tlet rads = degToRad(angle);\r\n\r\n\t\tif(window.joyconJS === undefined) return;\r\n\r\n\t\tif(joystick === \"right_stick_dir\") {\r\n\t\t\twindow.joyconJS.onRightJoystick(strength, rads);\r\n\t\t}\r\n\r\n\t\tif(joystick === \"left_stick_dir\") {\r\n\t\t\twindow.joyconJS.onLeftJoystick(strength, rads);\r\n\t\t}\r\n\t}\r\n\r\n\thandleSwitchKeys(name, pressed) {\r\n\t\tif(window.joyconJS === undefined) return;\r\n\r\n\t\tif(name === \"minus\") {\r\n\t\t\twindow.joyconJS.onMinus(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"left-stick\") {\r\n\t\t\twindow.joyconJS.onLeftJoystickPressed(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"up\") {\r\n\t\t\twindow.joyconJS.onUp(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"right\") {\r\n\t\t\twindow.joyconJS.onRight(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"down\") {\r\n\t\t\twindow.joyconJS.onDown(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"left\") {\r\n\t\t\twindow.joyconJS.onLeft(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"l\") {\r\n\t\t\twindow.joyconJS.onL(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"lsl\") {\r\n\t\t\twindow.joyconJS.onLeftSL(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"lsr\") {\r\n\t\t\twindow.joyconJS.onLeftSR(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"plus\") {\r\n\t\t\twindow.joyconJS.onPlus(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"a\") {\r\n\t\t\twindow.joyconJS.onA(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"b\") {\r\n\t\t\twindow.joyconJS.onB(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"x\") {\r\n\t\t\twindow.joyconJS.onX(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"y\") {\r\n\t\t\twindow.joyconJS.onY(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"r\") {\r\n\t\t\twindow.joyconJS.onR(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"rsl\") {\r\n\t\t\twindow.joyconJS.onRightSL(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"rsr\") {\r\n\t\t\twindow.joyconJS.onRightSR(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"right-stick\") {\r\n\t\t\twindow.joyconJS.onRightJoystickPressed(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"home\") {\r\n\t\t\twindow.joyconJS.onHome(pressed);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\trenderStartMessage() {\r\n\t\tconst text = (\r\n\t\t\t<b> \"lorem ipsum\" </b>\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<div id=\"Start Message\">\r\n\t\t\t\t<InfoOverlay show={this.state.displayStartM}\r\n\t\t\t\t\ttitle=\"Welcome\" sections={text}\r\n\t\t\t\t\tonMouseDown={e => this.onButtonEvent(\"startMessage\")}\r\n\t\t\t\t\tonTouchStart={e => this.onButtonEvent(\"startMessage\")} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderMacros() {\r\n\t\tif(!this.macroPlayer.state.loadConcluded) return (<b> Loading </b>);\r\n\r\n\t\tlet selected = this.macroPlayer.state.selectedMacro;\r\n\r\n\t\tlet data = this.macroPlayer.getAllMacroData();\r\n\r\n\t\tlet index = -1;\r\n\r\n\t\treturn data.map((entry) => {\r\n\t\t\t\tindex++;\r\n\r\n\t\t\t\tvar isSelected = selected === index;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MacroButton key = {\"macro_\" + index.toString()} index = {index}\r\n\t\t\t\t\t\tselected = {isSelected} name = {entry.name} src = {entry.icon}\r\n\t\t\t\t\t\tclickHandler = {this.selectMacro}/>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\trenderParameters() {\r\n\t\tif(!this.macroPlayer.state.loadConcluded) return (<b> Loading </b>);\r\n\r\n\t\tlet data = this.macroPlayer.getMacroRenderData();\r\n\r\n\t\treturn (\r\n\t\t\t<ParameterInput key = {\"macroParams\"}\r\n\t\t\t\tmacro = {data.name} parameters = {data.parameters}\r\n\t\t\t\teventHandler = {this.parameterChange}/>\r\n\t\t);\r\n\t}\r\n\r\n\trenderStatus() {\r\n\t\tif (!this.macroPlayer.state.loadConcluded) return (<b> Loading </b>);\r\n\r\n\t\tlet data = this.macroPlayer.getMacroRenderData();\r\n\r\n\t\treturn (\r\n\t\t\t<StatusTable key={\"macroStatus\"}\r\n\t\t\t\tmacro={data.name} status={data.state} />\r\n\t\t);\r\n    }\r\n\r\n\trenderInfo() {\r\n\t\tlet data = this.macroPlayer.getMacroRenderData();\r\n\t\tlet name = data.name;\r\n\t\tlet info = data.info;\r\n\r\n\t\treturn (\r\n\t\t\t<div id = \"Info\">\r\n\t\t\t\t<button className = \"info-button\" id = \"InfoButton\"\r\n\t\t\t\t\tonMouseUp    = {e => this.onButtonEvent(\"info\")}\r\n\t\t\t\t\tonTouchStart = {e => this.onButtonEvent(\"info\")}>\r\n\t\t\t\t\tInfo\r\n\t\t\t\t</button>\r\n\t\t\t\t<InfoOverlay show = {this.state.displayInfo}\r\n\t\t\t\t\ttitle = {name} sections = {info}\r\n\t\t\t\t\tonMouseUp    = {e => this.onButtonEvent(\"info\")}\r\n\t\t\t\t\tonTouchStart = {e => this.onButtonEvent(\"info\")}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderTime() {\r\n\t\tvar runMins = Math.floor(this.state.macroRunTime / 60000);\r\n\t\tif (runMins < 10) runMins = \"0\" + runMins;\r\n\r\n\t\tvar runSecs = Math.floor((this.state.macroRunTime % 60000) / 1000);\r\n\t\tif (runSecs < 10) runSecs = \"0\" + runSecs;\r\n\r\n\t\tvar runMili = ((this.state.macroRunTime % 60000) % 1000);\r\n\t\tif (runMili < 10) runMili = \"000\" + runMili;\r\n\t\telse if (runMili < 100) runMili = \"00\" + runMili;\r\n\t\telse if (runMili < 1000) runMili = \"0\" + runMili;\r\n\r\n\t\tvar runTime = runMins + \":\" + runSecs + \":\" + runMili;\r\n\r\n\t\t\r\n\t\tvar durMins = Math.floor(this.state.macroDuration / 60000);\r\n\t\tif (durMins < 10) durMins = \"0\" + durMins;\r\n\r\n\t\tvar durSecs = Math.floor((this.state.macroDuration % 60000) / 1000);\r\n\t\tif (durSecs < 10) durSecs = \"0\" + durSecs;\r\n\r\n\t\tvar durMili = ((this.state.macroDuration % 60000) % 1000);\r\n\t\tif (durMili < 10) durMili = \"000\" + durMili;\r\n\t\telse if (durMili < 100) durMili = \"00\" + durMili;\r\n\t\telse if (durMili < 1000) durMili = \"0\" + durMili;\r\n\r\n\t\tvar durTime = durMins + \":\" + durSecs + \":\" + durMili;\r\n\r\n\t\tvar time = runTime + \" / \" + durTime;\r\n\t\t\r\n\r\n\t\treturn (\r\n\t\t\t<div id=\"MacroTime\">\r\n\t\t\t\t{time}\r\n\t\t\t</div>\r\n\t\t);\r\n    }\r\n\r\n\r\n\trender() {\r\n\t\tconst startM = this.renderStartMessage();\r\n\r\n\t\tconst macros     = this.renderMacros();\r\n\t\tconst parameters = this.renderParameters();\r\n\t\tconst status     = this.renderStatus();\r\n\t\tconst info       = this.renderInfo();\r\n\t\tconst time       = this.renderTime();\r\n\r\n\t\tconst current = this.macroPlayer.state.playState;\r\n\r\n\t\tconst appIcon = ImagePath + \"macro_app_icon.png\";\r\n\r\n\t\tconst resetIcon = ImagePath + \"reset_icon.png\";\r\n\t\tconst playIcon  = ImagePath + \"play_icon.png\";\r\n\t\tconst pauseIcon = ImagePath + \"pause_icon.png\";\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<div className=\"App-header\">\r\n\t\t\t\t\t<img className=\"app-icon\" alt=\"AppIcon\" src={appIcon} />\r\n\t\t\t\t\t<b className = \"App-title\"\r\n\t\t\t\t\t\tstyle = {{color: \"black\"}}> POKMACROS </b>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"body\">\r\n\t\t\t\t\t{startM}\r\n\t\t\t\t\t<div id = \"Macros\">\r\n\t\t\t\t\t\t{macros}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id = \"MacroInfo\">\r\n\t\t\t\t\t\t{parameters}\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t{status}\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t{info}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"Player\">\r\n\t\t\t\t\t\t<ProgressBar key=\"progressbar\" percentage={this.state.macroProgress} />\r\n\t\t\t\t\t\t{time}\r\n\t\t\t\t\t\t<div id=\"PlayerButtons\">\r\n\t\t\t\t\t\t\t<PlayerButton id = \"ResetButton\" selected = {current === MacroStates.INACTIVE} name = \"Reset\"\r\n\t\t\t\t\t\t\t\tsrc = {resetIcon} clickHandler = {e => this.onButtonEvent(\"reset\")} />\r\n\r\n\t\t\t\t\t\t\t<PlayerButton id = \"PlayButton\"  selected = {current === MacroStates.PLAYING}  name = \"Play\"\r\n\t\t\t\t\t\t\t\tsrc = {playIcon}  clickHandler = {e => this.onButtonEvent(\"play\")} />\r\n\r\n\t\t\t\t\t\t\t<PlayerButton id = \"PauseButton\" selected = {current === MacroStates.PAUSED}   name = \"Pause\"\r\n\t\t\t\t\t\t\t\t\tsrc={pauseIcon} clickHandler={e => this.onButtonEvent(\"pause\")} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}