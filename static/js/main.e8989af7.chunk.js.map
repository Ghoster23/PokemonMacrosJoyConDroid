{"version":3,"sources":["App.js","index.js"],"names":["MacroStates","ConvertDate","date","toISOString","slice","ProgressBar","props","width","percentage","className","style","CheckBox","state","handleChange","bind","event","this","onChange","target","checked","type","React","Component","DateInput","value","Date","readOnly","readonly","ParameterInput","active","locked","handleSDChange","handleEDChange","onStartDateChange","onEndDateChange","macro","id","name","startDate","endDate","Macro","paths","repetitions","i","onWait","waitTimeout","runner","segments","totalSteps","currentOverallStep","length","path","count","undefined","fetch","then","response","json","initSegmentInfo","console","log","push","steps","reps","sum","map","step","reduce","a","b","f","info","abort","segment","j","k","res","button","pressed","l","wait","Math","max","onTime","offTime","args","o","apply","next","x","coroutine","duration","setTimeout","resume","obj","clearTimeout","App","onButtonEvent","onUseParams","macros","selectedMacro","today","tomorrow","setDate","getDate","macroState","macroProgress","useParams","UpdateTimerId","setInterval","update","clearInterval","currentMacro","setState","progress","handleSwitchKeys","done","reset","audio","Audio","play","startRunner","playPressed","pausePressed","resetPressed","toggle","newDate","getTime","window","joyconJS","handleArrowKeys","onHome","homePressed","onPlus","plusPressed","onA","aPressed","onB","bPressed","onX","xPressed","onY","yPressed","onRightSL","slPressed","onRightSR","srPressed","onRightJoystickPressed","stickPressed","downPressed","upPressed","leftPressed","rightPressed","index","selected","background","color","key","onClick","e","setMacro","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e8989af7.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\n\nconst MacroStates = {\n\tINACTIVE: 0,\n\tPLAYING:  1,\n\tPAUSED:   2,\n\tFINISHED: 3\n}\n\nfunction ConvertDate(date) {\n\treturn date.toISOString().slice(0,10);\n}\n\n// React Components\nfunction ProgressBar(props) {\n\tconst width = { width : `${props.percentage}%` };\n\n\treturn (\n\t\t<div className = \"progress-bar\">\n\t\t\t<div className = \"filler\" style = {width} />\n\t\t</div>\n\t);\n}\n\nclass CheckBox extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t}\n\n\thandleChange(event) {\n\t\tthis.props.onChange(event.target.checked);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<input type = \"checkbox\" checked = {this.props.checked} onChange = {this.handleChange} />\n\t\t);\n\t}\n}\n\nclass DateInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t}\n\n\thandleChange(event) {\n\t\tif(event.target.value === \"\") {\n\t\t\tthis.props.onChange(ConvertDate(new Date()));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.props.onChange(event.target.value);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<input type = \"date\" className = \"date-input\" readOnly = {this.props.readonly}\n\t\t\tvalue = {this.props.date} onChange = {this.handleChange}/>\n\t\t);\n\t}\n}\n\nclass ParameterInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {active : false, locked : false};\n\n\t\tthis.handleSDChange = this.handleSDChange.bind(this);\n\t\tthis.handleEDChange = this.handleEDChange.bind(this);\n\t}\n\n\thandleSDChange(date) {\n\t\tthis.props.onStartDateChange(date);\n\t}\n\n\thandleEDChange(date) {\n\t\tthis.props.onEndDateChange(date);\n\t}\n\n\trender() {\n\t\tvar macro = '';\n\n\t\tvar readonly = (!this.props.active || this.props.locked);\n\n\t\tswitch(this.props.macro) {\n\t\t\tdefault:\n\t\t\tbreak;\n\n\t\t\tcase 0:\n\t\t\t\tmacro = (\n\t\t\t\t\t<div className = \"MacroParameters\" id = \"TimeSkipParams\">\n\t\t\t\t\t\t<label className = \"Parameter\">\n\t\t\t\t\t\t\tStart Date\n\t\t\t\t\t\t\t<DateInput id = \"startDate\" name = \"start-date\"\n\t\t\t\t\t\t\t\tdate = {this.props.startDate} onChange = {this.handleSDChange}\n\t\t\t\t\t\t\t\treadonly = {readonly}/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label className = \"Parameter\">\n\t\t\t\t\t\t\tEnd Date\n\t\t\t\t\t\t\t<DateInput id = \"endDate\" name = \"end-date\"\n\t\t\t\t\t\t\t\tdate = {this.props.endDate} onChange = {this.handleEDChange}\n\t\t\t\t\t\t\t\treadonly = {readonly}/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\treturn (\n\t\t\t\t\t<input type = \"checkbox\" checked = {this.props.checked} onChange = {this.handleChange} />\n\t\t\t\t);\n\n\t\t\tcase 2:\n\t\t\t\treturn (\n\t\t\t\t\t<input type = \"checkbox\" checked = {this.props.checked} onChange = {this.handleChange} />\n\t\t\t\t);\n\t\t}\n\n\t\treturn macro;\n\t}\n}\n\n// Coroutine Wrapper\nfunction coroutine(f, args) {\n\tvar o = f.apply(args);\n\n\to.next();\n\n\treturn function(x) {\n\t\treturn o.next(x);\n\t}\n}\n\nfunction BuildTimeSkipMacro(startDate, days) {\n\tvar paths = [];\n\tvar reps  = [];\n\n\n}\n\nclass Macro {\n\tconstructor(name, paths, repetitions) {\n\t\tthis.name = name;\n\n\t\tthis.state = MacroStates.INACTIVE;\n\n\t\tthis.onWait = false;\n\t\tthis.waitTimeout = null;\n\n\t\tthis.runner = null;\n\n\t\tthis.segments = [];\n\n\t\tthis.totalSteps = 0;\n\t\tthis.currentOverallStep = 0;\n\n\t\tvar i;\n\t\tfor(i = 0; i < paths.length; i++) {\n\t\t\tvar path  = paths[i];\n\t\t\tvar count = 1;\n\n\t\t\tif(repetitions !== undefined) {\n\t\t\t\tcount = repetitions[i];\n\t\t\t}\n\n\t\t\tfetch(path)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(json => this.initSegmentInfo(json, count));\n\t\t}\n\n\t\tconsole.log(this.totalSteps);\n\t}\n\n\tinitSegmentInfo(json, count) {\n\t\tthis.segments.push({steps : json, reps : count});\n\n\t\tvar sum = json.map((step) => step.count).reduce((a, b) => a + b, 0);\n\n\t\tthis.totalSteps = this.totalSteps + sum * count;\n\t}\n\n\tprogress() {\n\t\tif(this.totalSteps === 0) return 0;\n\n\t\treturn this.currentOverallStep / this.totalSteps;\n\t}\n\n\tstartRunner() {\n\t\tvar f = function* () {\n\t\t\tthis.currentOverallStep = 0;\n\n\t\t\tvar info = {state : this.state, abort : false};\n\n\t\t\t// For each Segment of the Macro\n\t\t\tvar i = 0;\n\t\t\tfor(; i < this.segments.length; i++) {\n\t\t\t\tvar segment = this.segments[i];\n\n\t\t\t\tvar steps = segment.steps;\n\t\t\t\tvar reps  = segment.reps;\n\n\t\t\t\t// For each Repetition of the Segment\n\t\t\t\tvar j = 0;\n\t\t\t\tfor(; j < reps; j++) {\n\n\t\t\t\t\t// For each Step of the Segment\n\t\t\t\t\tvar k = 0;\n\t\t\t\t\tfor(; k < steps.length; k++) {\n\n\t\t\t\t\t\t// If play has not been pressed or has been paused\n\t\t\t\t\t\twhile(this.state !== MacroStates.PLAYING) {\n\t\t\t\t\t\t\tinfo = yield undefined; // Yield\n\n\t\t\t\t\t\t\tif(info.abort) return;\n\n\t\t\t\t\t\t\tthis.state = info.state;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Get current Step\n\t\t\t\t\t\tvar step = steps[k];\n\n\t\t\t\t\t\t// Make the response to the App\n\t\t\t\t\t\tvar res = { button : step.button, pressed : true };\n\n\t\t\t\t\t\t// For each repetition of the Step\n\t\t\t\t\t\tvar l = 0;\n\t\t\t\t\t\tfor(l = 0; l < step.count; l++) {\n\t\t\t\t\t\t\tres.pressed = true; // Signal that the button is pressed\n\n\t\t\t\t\t\t\t// Set timer for the duration of the button press\n\t\t\t\t\t\t\tthis.wait(Math.max(step.onTime, 20));\n\n\t\t\t\t\t\t\t// Wait\n\t\t\t\t\t\t\twhile(this.onWait) {\n\t\t\t\t\t\t\t\tinfo = yield res;\n\t\t\t\t\t\t\t\tif(info.abort) return;\n\t\t\t\t\t\t\t\tthis.state = info.state;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tres.pressed = false; // Signal the the button is not pressed\n\n\t\t\t\t\t\t\t// Set timer for the wait before pressing the next button\n\t\t\t\t\t\t\tthis.wait(Math.max(step.offTime, 20));\n\n\t\t\t\t\t\t\t// Wait for timer to elapse and to not be paused\n\t\t\t\t\t\t\twhile(this.onWait || this.state === MacroStates.PAUSED) {\n\t\t\t\t\t\t\t\tinfo = yield res;\n\t\t\t\t\t\t\t\tif(info.abort) return;\n\t\t\t\t\t\t\t\tthis.state = info.state;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.currentOverallStep++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t};\n\n\t\t// Create the Coroutine\n\t\tthis.runner = coroutine(f, this);\n\t}\n\n\twait(duration) {\n\t\tthis.waitTimeout = setTimeout(this.resume, duration, this);\n\t\tthis.onWait = true;\n\t}\n\n\tresume(obj) {\n\t\tobj.onWait = false;\n\t}\n\n\treset() {\n\t\tthis.state = MacroStates.INACTIVE;\n\n\t\tif(this.onWait) {\n\t\t\tthis.onWait = false;\n\n\t\t\tclearTimeout(this.waitTimeout);\n\n\t\t\tthis.waitTimeout = null;\n\t\t}\n\n\t\tthis.currentOverallStep = 0;\n\n\t\tif(this.runner !== null) {\n\t\t\tthis.runner({state : this.state, abort : true});\n\n\t\t\tthis.runner = null;\n\t\t}\n\t}\n}\n\nclass App extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {};\n\n\t\tthis.onButtonEvent = this.onButtonEvent.bind(this);\n\n\t\tthis.onUseParams = this.onUseParams.bind(this);\n\n\t\tthis.onStartDateChange = this.onStartDateChange.bind(this);\n\t\tthis.onEndDateChange = this.onEndDateChange.bind(this);\n\n\t\tthis.macros = [];\n\t\tthis.macros[0] = new Macro(\"Skip First Day\", [\"./macros/SkipFirstDay.json\"], [1]);\n\t\tthis.macros[1] = new Macro(\"Skip First Day\", [\"./macros/SkipFirstDay.json\"], [1]);\n\n\t\tthis.selectedMacro = 0;\n\n\t\tvar today = new Date();\n\t\tvar tomorrow = new Date();\n\t\ttomorrow.setDate(tomorrow.getDate() + 1);\n\n\t\tthis.state = {selectedMacro : this.selectedMacro,\n\t\t\t\t\t  macroState : this.macros[this.selectedMacro].state,\n\t\t\t\t\t  macroProgress : 0,\n\t\t\t\t\t  useParams : false,\n\t\t\t\t\t  locked : false,\n\t\t\t\t\t  startDate : ConvertDate(today),\n\t\t\t\t\t  endDate : ConvertDate(tomorrow)};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.UpdateTimerId = setInterval(\n\t\t\t() => this.update(),\n\t\t\t20\n\t\t);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.UpdateTimerId);\n\t}\n\n\tupdate() {\n\t\tvar currentMacro = this.macros[this.selectedMacro];\n\n\t\tthis.setState({selectedMacro : this.selectedMacro});\n\t\tthis.setState({macroState : currentMacro.state});\n\t\tthis.setState({macroProgress : currentMacro.progress() * 100});\n\n\t\tif(currentMacro.state === MacroStates.FINISHED) return;\n\n\t\tvar runner = currentMacro.runner;\n\n\t\tif(runner === null) return;\n\n\t\tvar res = runner({state : currentMacro.state, abort : false});\n\n\t\tif(res !== undefined) {\n\t\t\tif(res.value !== undefined) {\n\t\t\t\tthis.handleSwitchKeys(res.value.button, res.value.pressed);\n\t\t\t}\n\n\t\t\tif(res.done) currentMacro.state = MacroStates.FINISHED;\n\t\t}\n\t}\n\n\tsetMacro(id) {\n\t\tthis.selectedMacro = id;\n\n\t\tvar currentMacro = this.macros[this.selectedMacro];\n\n\t\tif(currentMacro.state !== MacroStates.INACTIVE) {\n\t\t\tcurrentMacro.reset();\n\t\t\tconsole.log(\"reset\");\n\t\t}\n\t}\n\n\tonButtonEvent(name, pressed) {\n\t\tvar audio = new Audio(\"/click.mp3\");\n\n\t\tif(pressed) {\n\t\t\taudio.play();\n\t\t}\n\n\t\tvar currentMacro = this.macros[this.selectedMacro];\n\n\t\tswitch (name) {\n\t\t\tdefault:\n\t\t\treturn;\n\n\t\t\tcase \"play\":\n\t\t\t\tswitch(currentMacro.state) {\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase MacroStates.PLAYING:\n\t\t\t\t\tcase MacroStates.PAUSED:\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase MacroStates.INACTIVE:\n\t\t\t\t\t\tcurrentMacro.startRunner();\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase MacroStates.FINISHED:\n\t\t\t\t\t\tcurrentMacro.reset();\n\n\t\t\t\t\t\tcurrentMacro.startRunner();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcurrentMacro.state = MacroStates.PLAYING;\n\n\t\t\t\tthis.setState({playPressed: pressed});\n\t\t\tbreak;\n\n\t\t\tcase \"pause\":\n\t\t\t\tif(currentMacro.state === MacroStates.PLAYING) {\n\t\t\t\t\tcurrentMacro.state = MacroStates.PAUSED;\n\t\t\t\t}\n\n\t\t\t\tthis.setState({pausePressed: pressed});\n\t\t\tbreak;\n\n\t\t\tcase \"reset\":\n\t\t\t\tif(currentMacro.state !== MacroStates.INACTIVE) {\n\t\t\t\t\tcurrentMacro.reset();\n\t\t\t\t\tconsole.log(\"reset\");\n\t\t\t\t}\n\n\t\t\t\tthis.setState({resetPressed: pressed});\n\t\t\tbreak;\n\t\t}\n\n\t\tthis.setState({macroState : currentMacro.state});\n\t}\n\n\tonUseParams() {\n\t\tvar toggle = !this.state.useParams;\n\n\t\tthis.setState({ useParams : toggle });\n\t}\n\n\tonStartDateChange(newDate) {\n\t\tvar startDate = new Date(newDate);\n\t\tvar endDate   = new Date(this.state.endDate);\n\n\t\tthis.setState({startDate : newDate});\n\n\t\tif(startDate >= endDate) {\n\t\t\tendDate = new Date(startDate.getTime());\n\t\t\tendDate.setDate(endDate.getDate() + 1);\n\n\t\t\tthis.setState({endDate : ConvertDate(endDate)});\n\t\t}\n\t}\n\n\tonEndDateChange(newDate) {\n\t\tvar endDate   = new Date(newDate);\n\t\tvar startDate = new Date(this.state.startDate);\n\n\t\tthis.setState({endDate : newDate});\n\n\t\tif(startDate >= endDate) {\n\t\t\tstartDate = new Date(endDate.getTime());\n\t\t\tstartDate.setDate(startDate.getDate() - 1);\n\n\t\t\tthis.setState({startDate : ConvertDate(startDate)});\n\t\t}\n\t}\n\n\thandleSwitchKeys(name, pressed) {\n\t\tconsole.log(name + \" : \" + pressed);\n\n\t\tif(window.joyconJS === undefined) return;\n\n\t\tthis.handleArrowKeys(name, pressed);\n\n\t\tif(name === \"home\") {\n\t\t\twindow.joyconJS.onHome(pressed);\n\t\t\tthis.setState({homePressed: pressed});\n\t\t}\n\n\t\tif(name === \"plus\") {\n\t\t\twindow.joyconJS.onPlus(pressed);\n\t\t\tthis.setState({plusPressed: pressed});\n\t\t}\n\n\t\tif(name === \"a\") {\n\t\t\twindow.joyconJS.onA(pressed);\n\t\t\tthis.setState({aPressed: pressed});\n\t\t}\n\n\t\tif(name === \"b\") {\n\t\t\twindow.joyconJS.onB(pressed);\n\t\t\tthis.setState({bPressed: pressed});\n\t\t}\n\n\t\tif(name === \"x\") {\n\t\t\twindow.joyconJS.onX(pressed);\n\t\t\tthis.setState({xPressed: pressed});\n\t\t}\n\n\t\tif(name === \"y\") {\n\t\t\twindow.joyconJS.onY(pressed);\n\t\t\tthis.setState({yPressed: pressed});\n\t\t}\n\n\t\tif(name === \"sl\") {\n\t\t\twindow.joyconJS.onRightSL(pressed);\n\t\t\tthis.setState({slPressed: pressed});\n\t\t}\n\n\t\tif(name === \"sr\") {\n\t\t\twindow.joyconJS.onRightSR(pressed);\n\t\t\tthis.setState({srPressed: pressed});\n\t\t}\n\n\t\tif(name === \"stick\") {\n\t\t\twindow.joyconJS.onRightJoystickPressed(pressed);\n\t\t\tthis.setState({stickPressed: pressed});\n\t\t}\n\t}\n\n\thandleArrowKeys(name, pressed) {\n\t\tvar x = 0;\n\t\tvar y = 0;\n\n\t\tif (name === \"down\"  ||  name === \"up\"   ||\n\t\t\tname === \"right\" ||  name === \"left\") {\n\n\t\t\tif(name === \"down\") {\n\t\t\t\ty += pressed? 1 : 0;\n\t\t\t\tthis.setState({downPressed: pressed});\n\n\t\t\t} else {\n\t\t\t\ty += this.state.downPressed? 1 : 0;\n\t\t\t}\n\n\t\t\tif(name === \"up\") {\n\t\t\t\ty += pressed? -1 : 0;\n\t\t\t\tthis.setState({upPressed: pressed});\n\n\t\t\t} else {\n\t\t\t\ty += this.state.upPressed? -1 : 0;\n\t\t\t}\n\n\t\t\tif(name === \"left\") {\n\t\t\t\tx += pressed? -1 : 0;\n\t\t\t\tthis.setState({leftPressed: pressed});\n\n\t\t\t} else {\n\t\t\t\tx += this.state.leftPressed? -1 : 0;\n\t\t\t}\n\n\t\t\tif(name === \"right\") {\n\t\t\t\tx += pressed? 1 : 0;\n\t\t\t\tthis.setState({rightPressed: pressed});\n\n\t\t\t} else {\n\t\t\t\tx += this.state.rightPressed? 1 : 0;\n\t\t\t}\n\n\t\t\t//if (x === 0 && y === 0) {\n\t\t\t//    window.joyconJS.onRightJoystick(0,0);\n\t\t\t//\n\t\t\t//} else {\n\t\t\t//    window.joyconJS.onRightJoystick(100, Math.atan2(x, y));\n\t\t\t//}\n\t\t}\r\n\t}\n\n\trender() {\n\t\tconst macros = this.macros.map((macro, index) => {\n\t\t\tvar selected = this.selectedMacro === index;\n\t\t\tvar style = (selected ? {background : \"black\", color : \"white\"} : {background : \"white\", color : \"black\"});\n\n\t\t\treturn (\n\t\t\t\t<div className = \"Macro\">\n\t\t\t\t\t<button key = {index} className = \"MacroButton\" id = {macro.name} style = {style} onClick = {e => this.setMacro(index)}>\n\t\t\t\t\t\t{macro.name}\n\t\t\t\t\t</button>\n\t\t\t\t\t<ParameterInput key = \"paramInput\"\n\t\t\t\t\t\tactive = {selected} locked = {this.state.locked}\n\t\t\t\t\t\tmacro = {index}\n\t\t\t\t\t\tstartDate = {this.state.startDate} onStartDateChange = {this.onStartDateChange}\n\t\t\t\t\t\tendDate   = {this.state.endDate}   onEndDateChange   = {this.onEndDateChange} />\n\t\t\t\t</div>\n\t\t\t)\n\t\t});\n\n\t\treturn (\n\t\t\t<div className = \"App\">\n\t\t\t\t<div className = \"App-header\">\n\t\t\t\t\t{this.state.selectedMacro + \" \" + this.state.macroState}\n\t\t\t\t</div>\n\t\t\t\t<div id = \"body\">\n\t\t\t\t\t<div id = \"Macros\">\n\t\t\t\t\t\t{macros}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id = \"MacroParameters\">\n\t\t\t\t\t\t<label id = \"ParamCheckBox\">\n\t\t\t\t\t\t\tUse Parameters:\n\t\t\t\t\t\t\t<CheckBox key = \"useParams\" checked = {this.state.useParams} onChange = {this.onUseParams}/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<ProgressBar key = \"progress\" percentage = {this.state.macroProgress} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id = \"PlayerButtons\" className = \"Buttons\">\n\t\t\t\t\t\t<button key = \"reset\" className = \"MacroButton\" id = \"Reset\"\n\t\t\t\t\t\t\tonMouseDown  = {e => this.onButtonEvent(\"reset\", true)}\n\t\t\t\t\t\t\tonMouseUp    = {e => this.onButtonEvent(\"reset\", false)}\n\t\t\t\t\t\t\tonTouchStart = {e => this.onButtonEvent(\"reset\", true)}\n\t\t\t\t\t\t\tonTouchEnd   = {e => this.onButtonEvent(\"reset\", false)}>\n\t\t\t\t\t\t\tReset\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button key = \"play\" className = \"MacroButton\" id = \"Play\"\n\t\t\t\t\t\t\tonMouseDown  = {e => this.onButtonEvent(\"play\", true)}\n\t\t\t\t\t\t\tonMouseUp    = {e => this.onButtonEvent(\"play\", false)}\n\t\t\t\t\t\t\tonTouchStart = {e => this.onButtonEvent(\"play\", true)}\n\t\t\t\t\t\t\tonTouchEnd   = {e => this.onButtonEvent(\"play\", false)}>\n\t\t\t\t\t\t\tPlay\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button key = \"pause\" className = \"MacroButton\" id = \"Pause\"\n\t\t\t\t\t\t\tonMouseDown  = {e => this.onButtonEvent(\"pause\", true)}\n\t\t\t\t\t\t\tonMouseUp    = {e => this.onButtonEvent(\"pause\", false)}\n\t\t\t\t\t\t\tonTouchStart = {e => this.onButtonEvent(\"pause\", true)}\n\t\t\t\t\t\t\tonTouchEnd   = {e => this.onButtonEvent(\"pause\", false)}>\n\t\t\t\t\t\t\tPause\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}