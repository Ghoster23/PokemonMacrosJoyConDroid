{"version":3,"sources":["App.js","index.js"],"names":["MacroStates","arrayFindIndex","array","toFind","found","forEach","item","i","ConvertDate","date","toISOString","slice","LoadJson","path","a","async","res","fetch","then","response","json","ProgressBar","props","width","percentage","className","style","KeyLog","key","ind","pressedKey","onTime","offTime","DateInput","state","handleChange","bind","event","target","value","this","onChange","Date","type","readOnly","readonly","React","Component","ParameterInput","active","locked","macro","params","parameters","id","name","startDate","eventHandler","endDate","TimeSkipMacroBuilder","filenames","FstSkipD","FstSkipM","FstSkipY","AdvDay","AdvMonth","AdvYear","AdvYearLp","AdvDec","loaded","count","loadedCount","loadConcluded","daysInMonth","currentDate","macroJSON","keys","k","loadMacro","filename","JSON","parse","stringify","segment","concat","year","days","getMacro","getMonth","getFullYear","concatToMacro","cYear","cMonth","cDay","getDate","eYear","eMonth","eDay","daysToGo","AdvanceDay","setDate","AdvanceMonth","isLeapYear","sd","ed","InitMacro","NextMacroStep","Macro","KeyLogger","log","log_count","active_count","time","logKeyPress","splice","logKeyRelease","entry","pressed","pressKey","releaseKey","map","index","keyLogs","Math","min","l","push","icon","segments","onWait","waitTimeout","runner","totalSteps","currentOverallStep","length","j","subTotal","f","info","abort","steps","reps","step","button","wait","max","args","o","apply","next","x","coroutine","duration","setTimeout","resume","obj","clearTimeout","MacroPlayer","selectedMacro","playState","macroProgress","today","tomorrow","macroBuilders","macroParamsDirty","macros","Array","fill","concluded","buildMacro","Audio","play","currentMacro","reset","onStartDateChange","onEndDateChange","newDate","getTime","build","startRunner","console","macroState","renderData","builder","undefined","checkLoadConcluded","runResult","done","progress","App","onButtonEvent","parameterChange","macroPlayer","keyLogger","currentTime","UpdateTimerId","setInterval","update","clearInterval","setState","getMacroState","handleSwitchKeys","audio","pause","clear","changeParameter","window","joyconJS","onMinus","onLeftJoystickPressed","onUp","onRight","onDown","onLeft","onLeftSL","onLeftSR","onPlus","onA","onB","onX","onY","onRightSL","onRightSR","onRightJoystickPressed","onHome","getMacrosRenderData","render","selected","background","onClick","e","selectMacro","src","alt","renderPressed","logging","renderLogged","renderMacros","backgroundImage","color","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.98ff0d3e.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './App.css';\r\n\r\nconst MacroStates = {\r\n\tINACTIVE: 0,\r\n\tPLAYING:  1,\r\n\tPAUSED:   2,\r\n\tFINISHED: 3\r\n}\r\n\r\nfunction arrayFindIndex(array, toFind) {\r\n\tvar found = -1;\r\n\r\n\tarray.forEach((item, i) => {\r\n\t\tif(item === toFind) found = i;\r\n\t});\r\n\r\n\treturn found;\r\n}\r\n\r\nfunction ConvertDate(date) {\r\n\treturn date.toISOString().slice(0,10);\r\n}\r\n\r\nasync function LoadJson(path) {\r\n\tvar res = null;\r\n\r\n\tres = await fetch(path).then(response => { return response.json(); } );\r\n\r\n\treturn res;\r\n}\r\n\r\n// React Components\r\nfunction ProgressBar(props) {\r\n\tconst width = { width : `${props.percentage}%` };\r\n\r\n\treturn (\r\n\t\t<div className = \"progress-bar\">\r\n\t\t\t<div className = \"filler\" style = {width} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction KeyLog(props) {\r\n\treturn (\r\n\t\t<div key = {props.ind} className = \"key-log\">\r\n\t\t\t<b className = \"key-log-cell\"> {props.pressedKey} </b>\r\n\t\t\t<b className = \"key-log-cell\"> {props.onTime} </b>\r\n\t\t\t<b className = \"key-log-cell\"> {props.offTime} </b>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n/*\r\nclass CheckBox extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tthis.props.onChange(event.target.checked);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<input type = \"checkbox\" checked = {this.props.checked} onChange = {this.handleChange} />\r\n\t\t);\r\n\t}\r\n}\r\n*/\r\n\r\nclass DateInput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tif(event.target.value === \"\") {\r\n\t\t\tthis.props.onChange(ConvertDate(new Date()));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.props.onChange(event.target.value);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<input type = \"date\" className = \"date-input\" readOnly = {this.props.readonly}\r\n\t\t\tvalue = {this.props.date} onChange = {this.handleChange}/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass ParameterInput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {active : false, locked : false};\r\n\t}\r\n\r\n\trender() {\r\n\t\tvar macro = '';\r\n\r\n\t\tvar readonly = (!this.props.active || this.props.locked);\r\n\r\n\t\tvar params = this.props.parameters;\r\n\r\n\t\tswitch(this.props.macro) {\r\n\t\t\tdefault:\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 0:\r\n\t\t\t\tmacro = (\r\n\t\t\t\t\t<div className = \"macro-parameters\" id = \"TimeSkipParams\">\r\n\t\t\t\t\t\t<label className = \"parameter\">\r\n\t\t\t\t\t\t\tStart Date\r\n\t\t\t\t\t\t\t<DateInput id = \"startDate\" name = \"start-date\"\r\n\t\t\t\t\t\t\t\tdate = {params.startDate}\r\n\t\t\t\t\t\t\t\tonChange = {date => this.props.eventHandler(\"startDate\", date)}\r\n\t\t\t\t\t\t\t\treadonly = {readonly}/>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label className = \"parameter\">\r\n\t\t\t\t\t\t\tEnd Date\r\n\t\t\t\t\t\t\t<DateInput id = \"endDate\" name = \"end-date\"\r\n\t\t\t\t\t\t\t\tdate = {params.endDate}\r\n\t\t\t\t\t\t\t\tonChange = {date => this.props.eventHandler(\"endDate\", date)}\r\n\t\t\t\t\t\t\t\treadonly = {readonly}/>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"macro-parameters\" id = \"TimeSkipParams\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"macro-parameters\" id = \"TimeSkipParams\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn macro;\r\n\t}\r\n}\r\n\r\n// Coroutine Wrapper\r\nfunction coroutine(f, args) {\r\n\tvar o = f.apply(args);\r\n\r\n\to.next();\r\n\r\n\treturn function(x) {\r\n\t\treturn o.next(x);\r\n\t}\r\n}\r\n\r\nclass TimeSkipMacroBuilder {\r\n\tconstructor() {\r\n\t\tthis.filenames = {\r\n\t\t\tFstSkipD  : \"FirstSkipDay.json\",\r\n\t\t\tFstSkipM  : \"FirstSkipDayMonth.json\",\r\n\t\t\tFstSkipY  : \"FirstSkipDayMonthYear.json\",\r\n\t\t\tAdvDay    : \"AdvanceDay.json\",\r\n\t\t\tAdvMonth  : \"AdvanceMonth.json\",\r\n\t\t\tAdvYear   : \"AdvanceYear.json\",\r\n\t\t\tAdvYearLp : \"AdvanceYearLeap.json\",\r\n\t\t\tAdvDec    : \"AdvanceDecember.json\"\r\n\t\t};\r\n\r\n\t\tthis.loaded = {\r\n\t\t\tFstSkipD  : \"\",\r\n\t\t\tFstSkipM  : \"\",\r\n\t\t\tFstSkipY  : \"\",\r\n\t\t\tAdvDay    : \"\",\r\n\t\t\tAdvMonth  : \"\",\r\n\t\t\tAdvYear   : \"\",\r\n\t\t\tAdvDec    : \"\",\r\n\t\t\tAdvYearLp : \"\",\r\n\t\t\tcount     :  8\r\n\t\t};\r\n\t\tthis.loadedCount = 0;\r\n\t\tthis.loadConcluded = false;\r\n\r\n\t\tthis.daysInMonth = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n\r\n\t\tthis.startDate = 0;\r\n\t\tthis.endDate   = 0;\r\n\r\n\t\tthis.currentDate = 0;\r\n\r\n\t\tthis.macro = 0;\r\n\t\tthis.macroJSON = [];\r\n\r\n\t\tvar keys = [\"FstSkipD\", \"FstSkipM\", \"FstSkipY\", \"AdvDay\",\r\n\t\t\"AdvMonth\", \"AdvYear\", \"AdvYearLp\", \"AdvDec\"];\r\n\r\n\t\tfor(var k in keys) {\r\n\t\t\tthis.loadMacro(keys[k]);\r\n\t\t}\r\n\t}\r\n\r\n\tasync loadMacro(key) {\r\n\t\tvar filename = this.filenames[key];\r\n\r\n\t\tthis.loaded[key] = await LoadJson(\"./macros/\" + filename);\r\n\r\n\t\tthis.loadedCount += 1;\r\n\r\n\t\tif(this.loadedCount === this.loaded.count) {\r\n\t\t\tthis.loadConcluded = true;\r\n\t\t}\r\n\t}\r\n\r\n\tgetMacro(key) {\r\n\t\tvar copy = JSON.parse(JSON.stringify(this.loaded[key]));\r\n\t\treturn copy;\r\n\t}\r\n\r\n\tconcatToMacro(segment) {\r\n\t\tthis.macroJSON = this.macroJSON.concat(segment);\r\n\t}\r\n\r\n\tisLeapYear(year) {\r\n\t\tif(year % 4 === 0) {\r\n\t\t\tif(year % 100 !== 0 || year % 400 === 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tAdvanceDay(days = 1) {\r\n\t\tvar macro = this.getMacro(\"AdvDay\");\r\n\r\n\t\tmacro.count = days;\r\n\r\n\t\treturn macro;\r\n\t}\r\n\r\n\tAdvanceMonth(days = 31) {\r\n\t\tvar macro = this.getMacro(\"AdvMonth\");\r\n\r\n\t\tvar segment = macro[0];\r\n\r\n\t\tsegment.count = days;\r\n\t\tmacro[0] = segment;\r\n\r\n\t\treturn macro;\r\n\t}\r\n\r\n\tInitMacro() {\r\n\t\t// If the day after the start is in the next Month\r\n\t\tif(this.startDate.getMonth() < this.currentDate.getMonth()) {\r\n\t\t\t// If the day after the start is in the next Year\r\n\t\t\tif(this.startDate.getFullYear() < this.currentDate.getFullYear()) {\r\n\t\t\t\tthis.concatToMacro(this.getMacro(\"FstSkipY\"));  // Advance the Day, Month and Year\r\n\t\t\t}\r\n\r\n\t\t\t// It is in the same Year\r\n\t\t\telse {\r\n\t\t\t\tthis.concatToMacro(this.getMacro(\"FstSkipM\"));  // Advance the Day and Month\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// It is in the same Month\r\n\t\telse {\r\n\t\t\tthis.concatToMacro(this.getMacro(\"FstSkipD\"));\r\n\t\t}\r\n\t}\r\n\r\n\tNextMacroStep() {\r\n\t\tvar cYear  = this.currentDate.getFullYear();\r\n\t\tvar cMonth = this.currentDate.getMonth();\r\n\t\tvar cDay   = this.currentDate.getDate();\r\n\r\n\t\tvar eYear  = this.endDate.getFullYear();\r\n\t\tvar eMonth = this.endDate.getMonth();\r\n\t\tvar eDay   = this.endDate.getDate();\r\n\r\n\t\tvar daysToGo = 0;\r\n\r\n\t\t// If Target Year has been reached\r\n\t\tif(cYear === eYear) {\r\n\t\t\t// If Target Month has been reached\r\n\t\t\tif(cMonth === eMonth) {\r\n\t\t\t\tdaysToGo = eDay - cDay;\r\n\r\n\t\t\t\tthis.concatToMacro(this.AdvanceDay(daysToGo));\r\n\r\n\t\t\t\tthis.currentDate.setDate(cDay + daysToGo);\r\n\t\t\t}\r\n\r\n\t\t\t// Not at Target Month and at the start of a Month\r\n\t\t\telse if(cDay === 1){\r\n\t\t\t\tlet i = cMonth;\r\n\t\t\t\tfor(; i < eMonth; i++) {\r\n\t\t\t\t\tdaysToGo = this.daysInMonth[i];\r\n\r\n\t\t\t\t\tthis.macro.concat(this.AdvanceMonth(daysToGo));\r\n\r\n\t\t\t\t\tthis.currentDate.setDate(cDay + daysToGo);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Not at Target Month and not at the start of a Month\r\n\t\t\telse {\r\n\t\t\t\tdaysToGo = this.daysInMonth[cMonth] - cDay + 1;\r\n\r\n\t\t\t\tthis.macro.concat(this.AdvanceMonth(daysToGo));\r\n\r\n\t\t\t\tthis.currentDate.setDate(cDay + daysToGo);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Not at Target Year and at the start of a Month\r\n\t\telse if(cDay === 1){\r\n\t\t\t// If it's January\r\n\t\t\tif(cMonth === 0) {\r\n\t\t\t\t// If it's a Leap Year\r\n\t\t\t\tif(this.isLeapYear(cYear)) {\r\n\t\t\t\t\tthis.concatToMacro(this.getMacro(\"AdvYearLp\"));\r\n\r\n\t\t\t\t\tthis.currentDate.setDate(cDay + 366);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If Not\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.concatToMacro(this.getMacro(\"AdvYear\"));\r\n\r\n\t\t\t\t\tthis.currentDate.setDate(cDay + 365);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// If it's December\r\n\t\t\telse if(cMonth === 11) {\r\n\t\t\t\tthis.concatToMacro(this.getMacro(\"AdvDec\"));\r\n\r\n\t\t\t\tthis.currentDate.setDate(cDay + 31);\r\n\t\t\t}\r\n\r\n\t\t\t// Other Months\r\n\t\t\telse {\r\n\t\t\t\tlet i = cMonth;\r\n\t\t\t\tfor(; i < 11; i++) {\r\n\t\t\t\t\tdaysToGo = this.daysInMonth[i];\r\n\r\n\t\t\t\t\t// If it's February and not a Leap Year\r\n\t\t\t\t\tif(i === 1 && !this.isLeapYear(cYear)) {\r\n\t\t\t\t\t\tdaysToGo -= 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.concatToMacro(this.AdvanceMonth(daysToGo));\r\n\r\n\t\t\t\t\tthis.currentDate.setDate(cDay + daysToGo);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Not Target Year and not at the start of next Month\r\n\t\telse {\r\n\t\t\t// If it is December\r\n\t\t\tif(cMonth === 11) {\r\n\t\t\t\tvar macro = this.getMacro(\"AdvDec\");\r\n\r\n\t\t\t\tvar segment = macro[0];\r\n\t\t\t\tsegment.count = 31 - cDay;\r\n\t\t\t\tmacro[0] = segment;\r\n\r\n\t\t\t\tthis.concatToMacro(macro);\r\n\t\t\t}\r\n\r\n\t\t\t// Any other Month\r\n\t\t\telse {\r\n\t\t\t\tdaysToGo = this.daysInMonth[cMonth] - cDay;\r\n\r\n\t\t\t\tthis.concatToMacro(this.AdvanceMonth(daysToGo));\r\n\r\n\t\t\t\tthis.currentDate.setDate(cDay + daysToGo);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tbuild(sd, ed) {\r\n\t\tif(!this.loadConcluded) return null;\r\n\r\n\t\tthis.macroJSON = [];\r\n\r\n\t\tthis.startDate = new Date(sd);\r\n\t\tthis.endDate   = new Date(ed);\r\n\r\n\t\tthis.currentDate = new Date(sd);\r\n\t\tthis.currentDate.setDate(this.currentDate.getDate() + 1);\r\n\r\n\t\tthis.InitMacro();\r\n\r\n\t\t// While end Date has not been reached\r\n\t\twhile(this.currentDate < this.endDate) {\r\n\t\t\tthis.NextMacroStep();\r\n\t\t}\r\n\r\n\t\tthis.macro = new Macro(\"Time Skip\", \"./images/timeskip_icon.png\", this.macroJSON);\r\n\r\n\t\treturn this.macro;\r\n\t}\r\n}\r\n\r\nclass KeyLogger {\r\n\tconstructor() {\r\n\t\tthis.log = [];\r\n\t\tthis.log_count = 0;\r\n\r\n\t\tthis.active = [];\r\n\t\tthis.active_count = 0;\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.log = [];\r\n\t\tthis.log_count = 0;\r\n\r\n\t\tthis.active = [];\r\n\t\tthis.active_count = 0;\r\n\t}\r\n\r\n\tpressKey(key, time) {\r\n\t\tvar ind = arrayFindIndex(this.active, key);\r\n\r\n\t\t// If key is not pressed\r\n\t\tif(ind === -1) {\r\n\t\t\tthis.active[this.active_count] = key;\r\n\t\t\tthis.active_count++;\r\n\r\n\t\t\tthis.logKeyPress(key, time);\r\n\t\t}\r\n\t}\r\n\r\n\tlogKeyPress(key, time) {\r\n\t\tthis.log[this.log_count] = {key: key, onTime: time, offTime: ''};\r\n\r\n\t\tthis.log_count++;\r\n\t}\r\n\r\n\treleaseKey(key, time) {\r\n\t\tif(this.active_count > 0) {\r\n\t\t\tvar ind = arrayFindIndex(this.active, key);\r\n\r\n\t\t\t// If key is pressed\r\n\t\t\tif(ind !== -1) {\r\n\t\t\t\tthis.active.splice(ind, 1);\r\n\t\t\t\tthis.active_count--;\r\n\r\n\t\t\t\tthis.logKeyRelease(key, time);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlogKeyRelease(key, time) {\r\n\t\tvar i = 0;\r\n\t\tfor(; i < this.log_count; i++) {\r\n\t\t\tvar entry = this.log[this.log_count - (i + 1)];\r\n\r\n\t\t\tif(entry.key === key && entry.offTime === '') {\r\n\t\t\t\tentry.offTime = time;\r\n\t\t\t\tthis.log[i] = entry;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdate(key, pressed, time) {\r\n\t\t// If key is being pressed\r\n\t\tif(pressed) {\r\n\t\t\tthis.pressKey(key, time);\r\n\t\t}\r\n\t\t// If key is being released\r\n\t\telse {\r\n\t\t\tthis.releaseKey(key, time);\r\n\t\t}\r\n\t}\r\n\r\n\trenderPressed() {\r\n\t\tvar pressed = this.active.map((key, index) => {\r\n\t\t\treturn (\r\n\t\t\t\t<div className = \"pressedKey\" key = {key}>\r\n\t\t\t\t\t{key}\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<div id = \"PressedKeys\">\r\n\t\t\t\t<b> Pressed </b>\r\n\t\t\t\t{pressed}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderLogged() {\r\n\t\tvar keyLogs = [];\r\n\r\n\t\tif(this.log_count > 0) {\r\n\t\t\tvar i = 0;\r\n\t\t\tfor(; i < Math.min(3, this.log_count); i++) {\r\n\t\t\t\tvar l = this.log[this.log_count - (i + 1)];\r\n\t\t\t\tkeyLogs.push(<KeyLog key = {\"keylog_\" + i} pressedKey = {l.key} onTime = {l.onTime} offTime = {l.offTime}/>);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id = \"KeyLogs\">\r\n\t\t\t\t{keyLogs}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass Macro {\r\n\tconstructor(name, icon, segments) {\r\n\t\tthis.name = name;\r\n\t\tthis.icon = icon;\r\n\r\n\t\tthis.state = MacroStates.INACTIVE;\r\n\r\n\t\tthis.onWait = false;\r\n\t\tthis.waitTimeout = null;\r\n\r\n\t\tthis.runner = null;\r\n\r\n\t\tthis.segments = segments;\r\n\r\n\t\tthis.totalSteps = 0;\r\n\t\tthis.currentOverallStep = 0;\r\n\r\n\t\tvar i;\r\n\t\tfor(i = 0; i < this.segments.length; i++) {\r\n\t\t\tvar segment = this.segments[i];\r\n\r\n\t\t\tvar subTotal = 0;\r\n\r\n\t\t\tvar j;\r\n\t\t\tfor(j = 0; j < segment.macro.length; j++) {\r\n\t\t\t\tvar step = segment.macro[j];\r\n\r\n\t\t\t\tsubTotal += step.count;\r\n\t\t\t}\r\n\r\n\t\t\tthis.totalSteps += subTotal * segment.count;\r\n\t\t}\r\n\t}\r\n\r\n\tprogress() {\r\n\t\tif(this.totalSteps === 0) return 0;\r\n\r\n\t\treturn this.currentOverallStep / this.totalSteps;\r\n\t}\r\n\r\n\tstartRunner() {\r\n\t\tvar f = function* () {\r\n\t\t\tthis.currentOverallStep = 0;\r\n\r\n\t\t\tvar info = {state : this.state, abort : false};\r\n\r\n\t\t\t// For each Segment of the Macro\r\n\t\t\tvar i = 0;\r\n\t\t\tfor(; i < this.segments.length; i++) {\r\n\t\t\t\tvar segment = this.segments[i];\r\n\r\n\t\t\t\tvar steps = segment.macro;\r\n\t\t\t\tvar reps  = segment.count;\r\n\r\n\t\t\t\t// For each Repetition of the Segment\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\tfor(; j < reps; j++) {\r\n\r\n\t\t\t\t\t// For each Step of the Segment\r\n\t\t\t\t\tvar k = 0;\r\n\t\t\t\t\tfor(; k < steps.length; k++) {\r\n\r\n\t\t\t\t\t\t// If play has not been pressed or has been paused\r\n\t\t\t\t\t\twhile(this.state !== MacroStates.PLAYING) {\r\n\t\t\t\t\t\t\tinfo = yield undefined; // Yield\r\n\r\n\t\t\t\t\t\t\tif(info.abort) return;\r\n\r\n\t\t\t\t\t\t\tthis.state = info.state;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Get current Step\r\n\t\t\t\t\t\tvar step = steps[k];\r\n\r\n\t\t\t\t\t\t// Make the response to the App\r\n\t\t\t\t\t\tvar res = { button : step.button, pressed : true, time : 0};\r\n\r\n\t\t\t\t\t\t// For each repetition of the Step\r\n\t\t\t\t\t\tvar l = 0;\r\n\t\t\t\t\t\tfor(l = 0; l < step.count; l++) {\r\n\t\t\t\t\t\t\tres.pressed = true; // Signal that the button is pressed\r\n\r\n\t\t\t\t\t\t\t// Set timer for the duration of the button press\r\n\t\t\t\t\t\t\tthis.wait(Math.max(step.onTime, 20));\r\n\r\n\t\t\t\t\t\t\tres.time = step.onTime;\r\n\r\n\t\t\t\t\t\t\tyield res;\r\n\r\n\t\t\t\t\t\t\t// Wait\r\n\t\t\t\t\t\t\twhile(this.onWait) {\r\n\t\t\t\t\t\t\t\tinfo = yield undefined;\r\n\t\t\t\t\t\t\t\tif(info.abort) return;\r\n\t\t\t\t\t\t\t\tthis.state = info.state;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tres.pressed = false; // Signal the the button is not pressed\r\n\r\n\t\t\t\t\t\t\t// Set timer for the wait before pressing the next button\r\n\t\t\t\t\t\t\tthis.wait(Math.max(step.offTime, 20));\r\n\r\n\t\t\t\t\t\t\tres.time = step.offTime;\r\n\r\n\t\t\t\t\t\t\tyield res;\r\n\r\n\t\t\t\t\t\t\t// Wait for timer to elapse and to not be paused\r\n\t\t\t\t\t\t\twhile(this.onWait || this.state === MacroStates.PAUSED) {\r\n\t\t\t\t\t\t\t\tinfo = yield undefined;\r\n\t\t\t\t\t\t\t\tif(info.abort) return;\r\n\t\t\t\t\t\t\t\tthis.state = info.state;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.currentOverallStep++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t};\r\n\r\n\t\t// Create the Coroutine\r\n\t\tthis.runner = coroutine(f, this);\r\n\t}\r\n\r\n\twait(duration) {\r\n\t\tthis.waitTimeout = setTimeout(this.resume, duration, this);\r\n\t\tthis.onWait = true;\r\n\t}\r\n\r\n\tresume(obj) {\r\n\t\tobj.onWait = false;\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.state = MacroStates.INACTIVE;\r\n\r\n\t\tif(this.onWait) {\r\n\t\t\tthis.onWait = false;\r\n\r\n\t\t\tclearTimeout(this.waitTimeout);\r\n\r\n\t\t\tthis.waitTimeout = null;\r\n\t\t}\r\n\r\n\t\tthis.currentOverallStep = 0;\r\n\r\n\t\tif(this.runner !== null) {\r\n\t\t\tthis.runner({state : this.state, abort : true});\r\n\r\n\t\t\tthis.runner = null;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass MacroPlayer {\r\n\tconstructor() {\r\n\t\tthis.state = { selectedMacro : 0,\r\n\t\t\tplayState     : 0,\r\n\t\t\tmacroProgress : 0,\r\n\t\t\tloadConcluded : false\r\n\t\t};\r\n\r\n\t\tvar today = new Date();\r\n\t\tvar tomorrow = new Date();\r\n\t\ttomorrow.setDate(tomorrow.getDate() + 1);\r\n\r\n\t\tthis.parameters = {\r\n\t\t\tstartDate : ConvertDate(today),\r\n\t\t\tendDate   : ConvertDate(tomorrow)\r\n\t\t};\r\n\r\n\t\tthis.macroBuilders = [];\r\n\t\tthis.macroBuilders[0] = new TimeSkipMacroBuilder();\r\n\t\tthis.macroParamsDirty = [false];\r\n\r\n\t\tthis.macros = Array(this.macroBuilders.length).fill(null);\r\n\t}\r\n\r\n\tcheckLoadConcluded() {\r\n\t\tvar concluded = true;\r\n\r\n\t\tvar i = 0;\r\n\t\tfor(; i < this.macroBuilders.length; i++) {\r\n\t\t\tvar builder = this.macroBuilders[i];\r\n\r\n\t\t\t// If builder is not fully loaded\r\n\t\t\tif(!builder.loadConcluded) {\r\n\t\t\t\tconcluded = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// If it has loaded\r\n\t\t\telse {\r\n\t\t\t\t// If macro has not been built\r\n\t\t\t\tif(this.macros[i] === null) {\r\n\t\t\t\t\tthis.buildMacro(i); // Build macro\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.state.loadConcluded = concluded;\r\n\t}\r\n\r\n\tselectMacro(index) {\r\n\t\tif(this.state.selectedMacro === index) return;\r\n\r\n\t\tvar audio = new Audio(\"/click.mp3\");\r\n\t\taudio.play();\r\n\r\n\t\tvar currentMacro = this.macros[this.state.selectedMacro];\r\n\r\n\t\tif(currentMacro.state !== MacroStates.INACTIVE) {\r\n\t\t\tcurrentMacro.reset();\r\n\r\n\t\t\tthis.state.playState = MacroStates.INACTIVE;\r\n\t\t\tthis.state.macroProgress = 0;\r\n\t\t}\r\n\r\n\t\tthis.state.selectedMacro = index;\r\n\t}\r\n\r\n\tchangeParameter(key, value) {\r\n\t\tswitch(key) {\r\n\t\t\tdefault:\r\n\t\t\treturn;\r\n\r\n\t\t\tcase \"startDate\":\r\n\t\t\t\tthis.onStartDateChange(value);\r\n\t\t\t\tthis.macroParamsDirty[0] = true;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"endDate\":\r\n\t\t\t\tthis.onEndDateChange(value);\r\n\t\t\t\tthis.macroParamsDirty[0] = true;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tonStartDateChange(newDate) {\r\n\t\tif(this.parameters.startDate !== newDate) {\r\n\t\t\tvar startDate = new Date(newDate);\r\n\t\t\tvar endDate   = new Date(this.parameters.endDate);\r\n\r\n\t\t\tthis.parameters.startDate = newDate;\r\n\r\n\t\t\tif(startDate >= endDate) {\r\n\t\t\t\tendDate = new Date(startDate.getTime());\r\n\t\t\t\tendDate.setDate(endDate.getDate() + 1);\r\n\r\n\t\t\t\tthis.parameters.endDate = ConvertDate(endDate);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonEndDateChange(newDate) {\r\n\t\tif(this.state.endDate !== newDate) {\r\n\t\t\tvar endDate   = new Date(newDate);\r\n\t\t\tvar startDate = new Date(this.parameters.startDate);\r\n\r\n\t\t\tthis.parameters.endDate = newDate;\r\n\r\n\t\t\tif(startDate >= endDate) {\r\n\t\t\t\tstartDate = new Date(endDate.getTime());\r\n\t\t\t\tstartDate.setDate(startDate.getDate() - 1);\r\n\r\n\t\t\t\tthis.parameters.startDate = ConvertDate(startDate);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\tvar index = this.state.selectedMacro;\r\n\r\n\t\tvar currentMacro = this.macros[index];\r\n\r\n\t\tswitch(currentMacro.state) {\r\n\t\t\tdefault:\r\n\t\t\tcase MacroStates.PLAYING:\r\n\t\t\tcase MacroStates.PAUSED:\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase MacroStates.INACTIVE:\r\n\t\t\tcase MacroStates.FINISHED:\r\n\t\t\t\tif(currentMacro.state === MacroStates.FINISHED) {\r\n\t\t\t\t\tcurrentMacro.reset();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.macroParamsDirty[index]) {\r\n\t\t\t\t\tthis.macroParamsDirty[index] = false;\r\n\r\n\t\t\t\t\tvar builder = this.macroBuilders[index];\r\n\r\n\t\t\t\t\tcurrentMacro = builder\r\n\t\t\t\t\t\t.build(this.parameters.startDate,\r\n\t\t\t\t\t\t\t\tthis.parameters.endDate);\r\n\r\n\t\t\t\t\tthis.macros[0] = currentMacro;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrentMacro.startRunner();\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcurrentMacro.state = MacroStates.PLAYING;\r\n\r\n\t\tthis.state.playState = MacroStates.PLAYING;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpause() {\r\n\t\tvar currentMacro = this.macros[this.state.selectedMacro];\r\n\r\n\t\tif(currentMacro.state === MacroStates.PLAYING) {\r\n\t\t\tcurrentMacro.state = MacroStates.PAUSED;\r\n\t\t\tconsole.log(\"paused\");\r\n\t\t\tthis.state.playState = MacroStates.PAUSED;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\treset() {\r\n\t\tvar currentMacro = this.macros[this.state.selectedMacro];\r\n\r\n\t\tif(currentMacro.state !== MacroStates.INACTIVE) {\r\n\t\t\tcurrentMacro.reset();\r\n\r\n\t\t\tthis.state.playState = MacroStates.INACTIVE\r\n\t\t\tthis.state.macroProgress = 0;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetMacroState() {\r\n\t\treturn { macroState : this.state.playState,\r\n\t\t\t\tmacroProgress : this.state.macroProgress };\r\n\t}\r\n\r\n\tgetMacrosRenderData() {\r\n\t\tvar renderData = [];\r\n\r\n\t\tvar i = 0;\r\n\t\tfor(; i < this.macros.length; i++) {\r\n\t\t\tvar macro = this.macros[i];\r\n\r\n\t\t\trenderData[i] = {\r\n\t\t\t\tname : macro.name,\r\n\t\t\t\ticon : macro.icon,\r\n\t\t\t\tparameters : this.parameters\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn renderData;\r\n\t}\r\n\r\n\tbuildMacro(index) {\r\n\t\tvar builder = this.macroBuilders[index];\r\n\r\n\t\tswitch(index) {\r\n\t\t\tdefault:\r\n\t\t\treturn;\r\n\r\n\t\t\tcase 0: // Time Skip\r\n\t\t\t\tthis.macros[0] = builder\r\n\t\t\t\t\t.build(this.parameters.startDate,\r\n\t\t\t\t\t\t\tthis.parameters.endDate);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tupdateMacros() {\r\n\t\tvar i = 0;\r\n\t\tfor(; i < this.macroBuilders.length; i++) {\r\n\t\t\tvar dirty   = this.macroParamsDirty[i];\r\n\r\n\t\t\tif(dirty) {\r\n\t\t\t\tthis.buildMacro(i);\r\n\r\n\t\t\t\tthis.macroParamsDirty[i] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tvar response = undefined;\r\n\r\n\t\tif(!this.state.loadConcluded) {\r\n\t\t\tthis.checkLoadConcluded();\r\n\t\t}\r\n\r\n\t\t// If Load has been completed\r\n\t\tif(this.state.loadConcluded) {\r\n\t\t\tvar runResult = undefined;\r\n\r\n\t\t\t// Get current Macro\r\n\t\t\tvar currentMacro = this.macros[this.state.selectedMacro];\r\n\r\n\t\t\tif(currentMacro === undefined) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(currentMacro.state);\r\n\t\t\tswitch(currentMacro.state) {\r\n\t\t\t\tdefault:\r\n\t\t\t\tcase MacroStates.INACTIVE:\r\n\t\t\t\tcase MacroStates.FINISHED:\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tcase MacroStates.PLAYING:\r\n\t\t\t\t\trunResult = currentMacro\r\n\t\t\t\t\t\t.runner({state : currentMacro.state, abort : false});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase MacroStates.PAUSED:\r\n\t\t\t\t\trunResult = currentMacro\r\n\t\t\t\t\t\t.runner({state : currentMacro.state, abort : false});\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t// If a result was obtained\r\n\t\t\tif(runResult !== undefined) {\r\n\t\t\t\t// If the result includes a value\r\n\t\t\t\tif(runResult.value !== undefined) {\r\n\t\t\t\t\tresponse = runResult.value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(runResult.done) currentMacro.state = MacroStates.FINISHED;\r\n\t\t\t}\r\n\r\n\t\t\tthis.state.playState = currentMacro.state;\r\n\t\t\tthis.state.macroProgress = currentMacro.progress() * 100;\r\n\t\t}\r\n\r\n\t\treturn response;\r\n\t}\r\n}\r\n\r\nclass App extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\r\n\t\tthis.onButtonEvent   = this.onButtonEvent.bind(this);\r\n\t\tthis.parameterChange = this.parameterChange.bind(this);\r\n\r\n\t\tthis.macroPlayer = new MacroPlayer();\r\n\r\n\t\tthis.keyLogger = new KeyLogger();\r\n\t\tthis.currentTime = 0;\r\n\r\n\t\tthis.state = {selectedMacro :  0,\r\n\t\t\t\t\t  macroState    : -1,\r\n\t\t\t\t\t  macroProgress :  0,\r\n\t\t\t\t\t  locked        : false\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.UpdateTimerId = setInterval(\r\n\t\t\t() => this.update(),\r\n\t\t\t20\r\n\t\t);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.UpdateTimerId);\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tthis.currentTime += 20;\r\n\r\n\t\tvar res = this.macroPlayer.update(this.currentTime);\r\n\r\n\t\tthis.setState(this.macroPlayer.getMacroState());\r\n\r\n\t\tif(res !== undefined) {\r\n\t\t\tthis.handleSwitchKeys(res.button, res.pressed);\r\n\t\t\tthis.keyLogger.update(res.button, res.pressed, res.time);\r\n\t\t}\r\n\t}\r\n\r\n\tonButtonEvent(name, pressed) {\r\n\t\tvar audio = new Audio(\"/click.mp3\");\r\n\r\n\t\tif(pressed) {\r\n\t\t\taudio.play();\r\n\t\t}\r\n\r\n\t\tswitch (name) {\r\n\t\t\tdefault:\r\n\t\t\treturn;\r\n\r\n\t\t\tcase \"play\":\r\n\t\t\t\tthis.macroPlayer.play();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"pause\":\r\n\t\t\t\tthis.macroPlayer.pause();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"reset\":\r\n\t\t\t\tif(this.macroPlayer.reset()) {\r\n\t\t\t\t\tthis.keyLogger.clear();\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.setState(this.macroPlayer.getMacroState());\r\n\t}\r\n\r\n\tparameterChange(key, value) {\r\n\t\tthis.macroPlayer.changeParameter(key, value);\r\n\t}\r\n\r\n\thandleSwitchKeys(name, pressed) {\r\n\t\tif(window.joyconJS === undefined) return;\r\n\r\n\t\tif(name === \"minus\") {\r\n\t\t\twindow.joyconJS.onMinus(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"left-stick\") {\r\n\t\t\twindow.joyconJS.onLeftJoystickPressed(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"up\") {\r\n\t\t\twindow.joyconJS.onUp(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"right\") {\r\n\t\t\twindow.joyconJS.onRight(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"down\") {\r\n\t\t\twindow.joyconJS.onDown(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"left\") {\r\n\t\t\twindow.joyconJS.onLeft(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"lsl\") {\r\n\t\t\twindow.joyconJS.onLeftSL(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"lsr\") {\r\n\t\t\twindow.joyconJS.onLeftSR(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"plus\") {\r\n\t\t\twindow.joyconJS.onPlus(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"a\") {\r\n\t\t\twindow.joyconJS.onA(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"b\") {\r\n\t\t\twindow.joyconJS.onB(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"x\") {\r\n\t\t\twindow.joyconJS.onX(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"y\") {\r\n\t\t\twindow.joyconJS.onY(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"rsl\") {\r\n\t\t\twindow.joyconJS.onRightSL(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"rsr\") {\r\n\t\t\twindow.joyconJS.onRightSR(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"right-stick\") {\r\n\t\t\twindow.joyconJS.onRightJoystickPressed(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"home\") {\r\n\t\t\twindow.joyconJS.onHome(pressed);\r\n\t\t}\r\n\t}\r\n\r\n\trenderMacros() {\r\n\t\tif(!this.macroPlayer.state.loadConcluded) return (<b> Loading </b>);\r\n\r\n\t\tvar macros = this.macroPlayer.getMacrosRenderData();\r\n\r\n\t\tvar render = [];\r\n\r\n\t\tvar i = 0;\r\n\t\tfor(; i < macros.length; i++) {\r\n\t\t\tlet macro = macros[i];\r\n\r\n\t\t\tlet selected = this.macroPlayer.state.selectedMacro === i;\r\n\r\n\t\t\tlet style = {background : \"white\"};\r\n\t\t\tif(selected) style = {background : \"black\"};\r\n\r\n\t\t\trender[i] = (\r\n\t\t\t\t<div key = {\"macro_\" + i} className = \"macro\">\r\n\t\t\t\t\t<div key = {\"macroButton_\" + i} className = \"macro-button\" id = {macro.name}\r\n\t\t\t\t\t\tstyle = {style} onClick = {e => this.selectMacro(i)}>\r\n\t\t\t\t\t\t<img className = \"icon\" src = {macro.icon} alt = {\"Icon\" + macro.name}/>\r\n\t\t\t\t\t\t{macro.name}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ParameterInput key = {\"macroParams_\" + i}\r\n\t\t\t\t\t\tactive = {selected} locked = {this.state.locked}\r\n\t\t\t\t\t\tmacro = {i} parameters = {macro.parameters}\r\n\t\t\t\t\t\teventHandler = {this.parameterChange}/>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn render;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst pressed = this.keyLogger.renderPressed();\r\n\t\tconst logging = this.keyLogger.renderLogged();\r\n\r\n\t\tconst macros = this.renderMacros();\r\n\r\n\t\treturn (\r\n\t\t\t<div className = \"App\" style = {{backgroundImage: \"url(./images/background.png)\"}}>\r\n\t\t\t\t<div className = \"App-header\">\r\n\t\t\t\t\t<img className = \"icon\" src = \"./images/macro_app_icon.png\" alt = \"AppIcon\"/>\r\n\t\t\t\t\t<b className = \"App-title\"\r\n\t\t\t\t\t\tstyle = {{color: \"black\"}}> POKÉMACROS </b>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id = \"body\">\r\n\t\t\t\t\t{macros}\r\n\t\t\t\t\t<div id = \"Tracker\">\r\n\t\t\t\t\t\t<ProgressBar key = \"progressbar\" percentage = {this.state.macroProgress} />\r\n\t\t\t\t\t\t<div id = \"KeyLogging\">\r\n\t\t\t\t\t\t\t{pressed}\r\n\t\t\t\t\t\t\t{logging}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id = \"PlayerButtons\">\r\n\t\t\t\t\t\t<button key = \"reset\" className = \"player-button\" id = \"Reset\"\r\n\t\t\t\t\t\t\tonMouseDown  = {e => this.onButtonEvent(\"reset\", true)}\r\n\t\t\t\t\t\t\tonMouseUp    = {e => this.onButtonEvent(\"reset\", false)}\r\n\t\t\t\t\t\t\tonTouchStart = {e => this.onButtonEvent(\"reset\", true)}\r\n\t\t\t\t\t\t\tonTouchEnd   = {e => this.onButtonEvent(\"reset\", false)}>\r\n\t\t\t\t\t\t\tReset\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button key = \"play\" className = \"player-button\" id = \"Play\"\r\n\t\t\t\t\t\t\tonMouseDown  = {e => this.onButtonEvent(\"play\", true)}\r\n\t\t\t\t\t\t\tonMouseUp    = {e => this.onButtonEvent(\"play\", false)}\r\n\t\t\t\t\t\t\tonTouchStart = {e => this.onButtonEvent(\"play\", true)}\r\n\t\t\t\t\t\t\tonTouchEnd   = {e => this.onButtonEvent(\"play\", false)}>\r\n\t\t\t\t\t\t\tPlay\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button key = \"pause\" className = \"player-button\" id = \"Pause\"\r\n\t\t\t\t\t\t\tonMouseDown  = {e => this.onButtonEvent(\"pause\", true)}\r\n\t\t\t\t\t\t\tonMouseUp    = {e => this.onButtonEvent(\"pause\", false)}\r\n\t\t\t\t\t\t\tonTouchStart = {e => this.onButtonEvent(\"pause\", true)}\r\n\t\t\t\t\t\t\tonTouchEnd   = {e => this.onButtonEvent(\"pause\", false)}>\r\n\t\t\t\t\t\t\tPause\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button key = \"testA\" className = \"player-button\" id = \"testA\"\r\n\t\t\t\t\t\tonMouseDown  = {e => this.handleSwitchKeys(\"a\", true)}\r\n\t\t\t\t\t\tonMouseUp    = {e => this.handleSwitchKeys(\"a\", false)}\r\n\t\t\t\t\t\tonTouchStart = {e => this.handleSwitchKeys(\"a\", true)}\r\n\t\t\t\t\t\tonTouchEnd   = {e => this.handleSwitchKeys(\"a\", false)}>\r\n\t\t\t\t\t\tA\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}