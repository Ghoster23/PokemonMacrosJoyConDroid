{"version":3,"sources":["App.js","index.js"],"names":["MonthLength","MacroStates","arrayFindIndex","array","toFind","found","forEach","item","i","ConvertDate","date","day","getDate","toString","month","getMonth","getFullYear","LoadJson","path","a","async","res","fetch","then","response","json","MacroButton","props","style","background","selected","className","id","name","onClick","e","clickHandler","index","src","alt","ProgressBar","width","percentage","KeyLog","key","ind","pressedKey","onTime","offTime","CheckBox","state","handleChange","bind","event","this","onChange","paramKey","target","checked","type","React","Component","DateInput","value","Date","readOnly","readonly","IntegerInput","parseInt","currentTarget","max","min","ParameterInput","active","locked","params","parameters","macro","startDate","eventHandler","endDate","daysToAdvance","getFirst","attempts","SimpleDate","str","year","setFromString","days","len","rem","isLeapYear","other","date1","getTime","substr","oYear","oMonth","JSONManeger","filenames","FstSkipD","FstSkipM","FstSkipY","AdvDay","AdvMonth","AdvYear","AdvYearLp","AdvDec","LotoID","Return","loaded","count","loadedCount","loadConcluded","keys","k","loadMacro","filename","console","log","JSON","parse","stringify","MacroBuilder","jsonM","icon","jsonManager","macroJSON","paramHandlers","handler","getMacro","segment","concat","TimeSkipMacroBuilder","today","tomorrow","setDate","onStartDateChange","onEndDateChange","onDaysToAdvanceChange","newDate","compare","increment","dayDifference","decrement","maxDate","currentDate","concatToMacro","cYear","cMonth","cDay","eYear","eMonth","eDay","daysToGo","AdvanceDay","AdvanceMonth","daysToNextMonth","InitMacro","NextMacroSegment","Macro","LotoIDMacroBuilder","onAttemptsChange","onGetFirstChange","bool","AdvanceDate","KeyLogger","log_count","active_count","time","logKeyPress","splice","logKeyRelease","entry","pressed","pressKey","releaseKey","map","keyLogs","Math","l","push","segments","onWait","waitTimeout","runner","totalSteps","currentOverallStep","length","j","subTotal","f","info","abort","steps","reps","step","button","wait","args","o","apply","next","x","coroutine","duration","setTimeout","resume","obj","clearTimeout","text","seg","MacroPlayer","selectedMacro","playState","macroProgress","builders","macroCount","dirtyMacro","Array","fill","macros","selectMacro","changeParameter","concluded","buildMacro","undefined","Audio","play","currentMacro","reset","isDirty","startRunner","macroState","dataArray","builder","getRenderData","build","macroBuilders","macroParamsDirty","checkLoadConcluded","runResult","done","progress","App","onButtonEvent","parameterChange","macroPlayer","keyLogger","currentTime","UpdateTimerId","setInterval","update","clearInterval","setState","getMacroState","handleSwitchKeys","audio","pause","clear","window","joyconJS","onMinus","onLeftJoystickPressed","onUp","onRight","onDown","onLeft","onLeftSL","onLeftSR","onPlus","onA","onB","onX","onY","onRightSL","onRightSR","onRightJoystickPressed","onHome","data","getAllMacroData","isSelected","getCurrentMacroData","renderPressed","logging","renderLogged","renderMacros","renderParameters","backgroundImage","color","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a5fb4112.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './App.css';\r\n\r\nconst MonthLength = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n\r\nconst MacroStates = {\r\n\tINACTIVE: 0,\r\n\tPLAYING:  1,\r\n\tPAUSED:   2,\r\n\tFINISHED: 3\r\n}\r\n\r\nfunction arrayFindIndex(array, toFind) {\r\n\tvar found = -1;\r\n\r\n\tarray.forEach((item, i) => {\r\n\t\tif(item === toFind) found = i;\r\n\t});\r\n\r\n\treturn found;\r\n}\r\n\r\nfunction ConvertDate(date) {\r\n\tlet day   = date.getDate().toString();\r\n\tlet month = (date.getMonth() + 1).toString();\r\n\tif(date.getMonth() < 9) month = \"0\" + month;\r\n\tlet year  = date.getFullYear().toString();\r\n\r\n\treturn year + \"-\" + month + \"-\" + day;\r\n}\r\n\r\nasync function LoadJson(path) {\r\n\tvar res = null;\r\n\r\n\tres = await fetch(path).then(response => { return response.json(); } );\r\n\r\n\treturn res;\r\n}\r\n\r\n// React Components\r\nfunction MacroButton(props) {\r\n\tvar style = { background : \"white\" };\r\n\tif(props.selected) style = {background : \"black\"};\r\n\r\n\treturn (\r\n\t\t<div className = \"macro\">\r\n\t\t\t<div className = \"macro-button\" id = {props.name} style = {style}\r\n\t\t\t\tonClick = {e => props.clickHandler(props.index)}>\r\n\t\t\t\t<img className = \"icon\" src = {props.src} alt = {\"Icon \" + props.name}/>\r\n\t\t\t</div>\r\n\t\t\t<label className = \"macro-button-label\">\r\n\t\t\t\t{props.name}\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction ProgressBar(props) {\r\n\tconst width = { width : `${props.percentage}%` };\r\n\r\n\treturn (\r\n\t\t<div className = \"progress-bar\">\r\n\t\t\t<div className = \"filler\" style = {width} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction KeyLog(props) {\r\n\treturn (\r\n\t\t<div key = {props.ind} className = \"key-log\">\r\n\t\t\t<b className = \"key-log-cell\"> {props.index} </b>\r\n\t\t\t<b className = \"key-log-cell\"> {props.pressedKey} </b>\r\n\t\t\t<b className = \"key-log-cell\"> {props.onTime} </b>\r\n\t\t\t<b className = \"key-log-cell\"> {props.offTime} </b>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nclass CheckBox extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\treturn this.props.onChange(this.props.paramKey, event.target.checked);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<input type = \"checkbox\" checked = {this.props.checked} onChange = {this.handleChange} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass DateInput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tif(event.target.value === \"\") {\r\n\t\t\tthis.props.onChange(ConvertDate(new Date()));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.props.onChange(event.target.value);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<input type = \"date\" className = \"date-input\"\r\n\t\t\treadOnly = {this.props.readonly}\r\n\t\t\tvalue = {this.props.date} onChange = {this.handleChange}/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass IntegerInput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {};\r\n\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\thandleChange(event) {\r\n\t\tif(event.target.value === \"\") {\r\n\t\t\tthis.props.onChange(1);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.props.onChange(parseInt(event.currentTarget.value));\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<input type = \"number\" className = \"integer-input\"\r\n\t\t\treadOnly = {this.props.readonly}\r\n\t\t\tvalue = {this.props.value} onChange = {this.handleChange}\r\n\t\t\tmax = {this.props.max} min = {this.props.min}/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass ParameterInput extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {active : false, locked : false};\r\n\t}\r\n\r\n\trender() {\r\n\t\tvar params = this.props.parameters;\r\n\r\n\t\tswitch(this.props.macro) {\r\n\t\t\tdefault:\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"Time Skip\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"macro-parameters\" id = \"TimeSkipParams\">\r\n\t\t\t\t\t\t<div className = \"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className = \"parameter-label\">\r\n\t\t\t\t\t\t\t\tStart Date\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className = \"parameter\">\r\n\t\t\t\t\t\t\t\t<DateInput id = \"startDate\" name = \"start-date\"\r\n\t\t\t\t\t\t\t\t\tdate = {params.startDate}\r\n\t\t\t\t\t\t\t\t\tonChange = {date => this.props.eventHandler(\"startDate\", date)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className = \"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className = \"parameter-label\">\r\n\t\t\t\t\t\t\t\tEnd Date\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className = \"parameter\">\r\n\t\t\t\t\t\t\t\t<DateInput id = \"endDate\" name = \"end-date\"\r\n\t\t\t\t\t\t\t\t\tdate = {params.endDate}\r\n\t\t\t\t\t\t\t\t\tonChange = {date => this.props.eventHandler(\"endDate\", date)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className = \"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className = \"parameter-label\">\r\n\t\t\t\t\t\t\t\tSkip Count\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className = \"parameter\">\r\n\t\t\t\t\t\t\t\t<IntegerInput id = \"daysToAdvance\" name = \"days-to-advance\"\r\n\t\t\t\t\t\t\t\t\tvalue = {params.daysToAdvance}\r\n\t\t\t\t\t\t\t\t\tonChange = {value => this.props.eventHandler(\"daysToAdvance\", value)}\r\n\t\t\t\t\t\t\t\t\tmin = \"1\" max = \"10000\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\tcase \"Loto ID\":\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"macro-parameters\" id = \"LottoIDParams\">\r\n\t\t\t\t\t\t<div className = \"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className = \"parameter-label\">\r\n\t\t\t\t\t\t\t\tFirst Day Loto\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className = \"parameter\">\r\n\t\t\t\t\t\t\t\t<CheckBox id = \"firstDayLoto\" name = \"first-day-loto\"\r\n\t\t\t\t\t\t\t\t\tchecked = {params.getFirst}\r\n\t\t\t\t\t\t\t\t\tparamKey = \"getFirst\"\r\n\t\t\t\t\t\t\t\t\tonChange = {this.props.eventHandler}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className = \"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className = \"parameter-label\">\r\n\t\t\t\t\t\t\t\tStart Date\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className = \"parameter\">\r\n\t\t\t\t\t\t\t\t<DateInput id = \"startDate\" name = \"start-date\"\r\n\t\t\t\t\t\t\t\t\tdate = {params.startDate}\r\n\t\t\t\t\t\t\t\t\tonChange = {date => this.props.eventHandler(\"startDate\", date)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className = \"parameters-entry\">\r\n\t\t\t\t\t\t\t<label className = \"parameter-label\">\r\n\t\t\t\t\t\t\t\tAttempts\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className = \"parameter\">\r\n\t\t\t\t\t\t\t\t<IntegerInput id = \"Attempts\" name = \"lotto-id-attempts\"\r\n\t\t\t\t\t\t\t\t\tvalue = {params.attempts}\r\n\t\t\t\t\t\t\t\t\tonChange = {value => this.props.eventHandler(\"attempts\", value)}\r\n\t\t\t\t\t\t\t\t\tmin = \"0\" max = \"10000\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className = \"macro-parameters\" id = \"TimeSkipParams\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Coroutine Wrapper\r\nfunction coroutine(f, args) {\r\n\tvar o = f.apply(args);\r\n\r\n\to.next();\r\n\r\n\treturn function(x) {\r\n\t\treturn o.next(x);\r\n\t}\r\n}\r\n\r\nclass SimpleDate {\r\n\tconstructor(str) {\r\n\t\tthis.day   = 0;\r\n\t\tthis.month = 0;\r\n\t\tthis.year  = 0;\r\n\r\n\t\tthis.setFromString(str);\r\n\t}\r\n\r\n\tisLeapYear() {\r\n\t\tif(this.year % 4 === 0) {\r\n\t\t\tif(this.year % 100 !== 0 || this.year % 400 === 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tincrement(days) {\r\n\t\tthis.day += days;\r\n\r\n\t\tlet len = MonthLength[this.month];\r\n\r\n\t\tlet rem = this.day - len;\r\n\t\tif(this.month === 1 && !this.isLeapYear()) {\r\n\t\t\trem += 1;\r\n\t\t}\r\n\r\n\t\twhile(rem > 0) {\r\n\t\t\tthis.day = rem;\r\n\r\n\t\t\tthis.month += 1;\r\n\r\n\t\t\tif(this.month === 12) {\r\n\t\t\t\tthis.year += 1;\r\n\t\t\t\tthis.month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tlen = MonthLength[this.month];\r\n\r\n\t\t\trem = this.day - len;\r\n\t\t\tif(this.month === 1 && !this.isLeapYear()) {\r\n\t\t\t\trem += 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdecrement(days) {\r\n\t\tthis.day -= days;\r\n\r\n\t\twhile(this.day <= 0) {\r\n\t\t\tthis.month -= 1;\r\n\r\n\t\t\tif(this.month < 0) {\r\n\t\t\t\tthis.month = 11;\r\n\t\t\t\tthis.year -= 1;\r\n\t\t\t}\r\n\r\n\t\t\tlet len = MonthLength[this.month];\r\n\t\t\tif(this.month === 1 && !this.isLeapYear()) len -= 1;\r\n\r\n\t\t\tthis.day += len;\r\n\t\t}\r\n\t}\r\n\r\n\tdayDifference(other) {\r\n\t\tvar date1 = new Date(this.toString());\r\n\t\tvar date2 = new Date(other.toString());\r\n\r\n\t\tvar diff = date2.getTime() - date1.getTime();\r\n\r\n\t\treturn diff / (1000 * 60 * 60 * 24);\r\n\t}\r\n\r\n\tdaysToNextMonth() {\r\n\t\tlet len = MonthLength[this.month];\r\n\t\tif(this.month === 1 && !this.isLeapYear()) len -= 1;\r\n\r\n\t\treturn len - this.day + 1;\r\n\t}\r\n\r\n\tsetFromString(str = \"2020-01-01\") {\r\n\t\tthis.year  = parseInt(str.substr(0, 4));\r\n\t\tthis.month = parseInt(str.substr(5, 2)) - 1;\r\n\t\tthis.day   = parseInt(str.substr(8, 2));\r\n\t}\r\n\r\n\ttoString() {\r\n\t\tlet day   = this.day.toString();\r\n\t\tif(this.day <= 9) day = \"0\" + day;\r\n\r\n\t\tlet month = (this.month + 1).toString();\r\n\t\tif(this.month < 9) month = \"0\" + month;\r\n\r\n\t\tlet year  = this.year.toString();\r\n\r\n\t\treturn year + \"-\" + month + \"-\" + day;\r\n\t}\r\n\r\n\tcompare(other) {\r\n\t\tlet oYear = other.year;\r\n\r\n\t\tif(oYear === this.year) {\r\n\t\t\tlet oMonth = other.month;\r\n\r\n\t\t\tif(oMonth === this.month) {\r\n\t\t\t\treturn other.day - this.day;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn oMonth - this.month;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn oYear - this.year;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass JSONManeger {\r\n\tconstructor() {\r\n\t\tthis.filenames = {\r\n\t\t\tFstSkipD  : \"FirstSkipDay.json\",\r\n\t\t\tFstSkipM  : \"FirstSkipDayMonth.json\",\r\n\t\t\tFstSkipY  : \"FirstSkipDayMonthYear.json\",\r\n\t\t\tAdvDay    : \"AdvanceDay.json\",\r\n\t\t\tAdvMonth  : \"AdvanceMonth.json\",\r\n\t\t\tAdvYear   : \"AdvanceYear.json\",\r\n\t\t\tAdvYearLp : \"AdvanceYearLeap.json\",\r\n\t\t\tAdvDec    : \"AdvanceDecember.json\",\r\n\t\t\tLotoID    : \"LotoID.json\",\r\n\t\t\tReturn    : \"ReturnToGameFromSettings.json\"\r\n\t\t};\r\n\r\n\t\tthis.loaded = {\r\n\t\t\tFstSkipD  : \"\",\r\n\t\t\tFstSkipM  : \"\",\r\n\t\t\tFstSkipY  : \"\",\r\n\t\t\tAdvDay    : \"\",\r\n\t\t\tAdvMonth  : \"\",\r\n\t\t\tAdvYear   : \"\",\r\n\t\t\tAdvDec    : \"\",\r\n\t\t\tAdvYearLp : \"\",\r\n\t\t\tLotoID    : \"\",\r\n\t\t\tReturn    : \"\",\r\n\t\t\tcount     : 10\r\n\t\t};\r\n\r\n\t\tthis.loadedCount = 0;\r\n\t\tthis.loadConcluded = false;\r\n\r\n\t\tvar keys = [\"FstSkipD\", \"FstSkipM\", \"FstSkipY\", \"AdvDay\",\r\n\t\t\"AdvMonth\", \"AdvYear\", \"AdvYearLp\", \"AdvDec\", \"LotoID\", \"Return\"];\r\n\r\n\t\tfor(var k in keys) {\r\n\t\t\tthis.loadMacro(keys[k]);\r\n\t\t}\r\n\t}\r\n\r\n\tasync loadMacro(key) {\r\n\t\tvar filename = this.filenames[key];\r\n\r\n\t\tthis.loaded[key] = await LoadJson(\"./macros/\" + filename);\r\n\r\n\t\tthis.loadedCount += 1;\r\n\r\n\t\tif(this.loadedCount === this.loaded.count) {\r\n\t\t\tthis.loadConcluded = true;\r\n\t\t\tconsole.log(\"JSON Load Concluded\");\r\n\t\t}\r\n\t}\r\n\r\n\tgetMacro(key) {\r\n\t\tvar copy = JSON.parse(JSON.stringify(this.loaded[key]));\r\n\t\treturn copy;\r\n\t}\r\n}\r\n\r\nclass MacroBuilder {\r\n\tconstructor(jsonM, name, icon) {\r\n\t\tthis.jsonManager = jsonM;\r\n\r\n\t\tthis.name = name;\r\n\t\tthis.icon = icon;\r\n\r\n\t\tthis.macro = 0;\r\n\t\tthis.macroJSON = [];\r\n\r\n\t\tthis.parameters = {};\r\n\t\tthis.paramHandlers = {};\r\n\t}\r\n\r\n\tchangeParameter(key, value) {\r\n\t\tlet handler = this.paramHandlers[key];\r\n\r\n\t\treturn handler(value);\r\n\t}\r\n\r\n\tgetMacro(key) {\r\n\t\tif(!this.jsonManager.loadConcluded) return null;\r\n\r\n\t\treturn this.jsonManager.getMacro(key);\r\n\t}\r\n\r\n\tconcatToMacro(segment) {\r\n\t\tthis.macroJSON = this.macroJSON.concat(segment);\r\n\t}\r\n\r\n\t// Render\r\n\tgetRenderData() {\r\n\t\treturn {\r\n\t\t\tname : this.name,\r\n\t\t\ticon : this.icon,\r\n\t\t\tparameters : this.parameters\r\n\t\t};\r\n\t}\r\n}\r\n\r\nclass TimeSkipMacroBuilder extends MacroBuilder {\r\n\tconstructor(jsonM) {\r\n\t\tsuper(jsonM, \"Time Skip\", \"./images/timeskip_icon.png\");\r\n\r\n\t\t// Init Parameters\r\n\t\tvar today    = new Date();\r\n\t\tvar tomorrow = new Date();\r\n\t\ttomorrow.setDate(tomorrow.getDate() + 1);\r\n\r\n\t\tthis.parameters.startDate = ConvertDate(today);\r\n\t\tthis.parameters.endDate   = ConvertDate(tomorrow);\r\n\t\tthis.parameters.daysToAdvance = 1;\r\n\r\n\t\tthis.onStartDateChange = this.onStartDateChange.bind(this);\r\n\t\tthis.onEndDateChange   = this.onEndDateChange.bind(this);\r\n\t\tthis.onDaysToAdvanceChange = this.onDaysToAdvanceChange.bind(this);\r\n\r\n\t\tthis.paramHandlers = {\r\n\t\t\tstartDate : this.onStartDateChange,\r\n\t\t\tendDate   : this.onEndDateChange,\r\n\t\t\tdaysToAdvance : this.onDaysToAdvanceChange\r\n\t\t};\r\n\t}\r\n\r\n\t// Parameter Handlers\r\n\tonStartDateChange(newDate) {\r\n\t\tif(this.parameters.startDate !== newDate) {\r\n\t\t\tvar startDate = new SimpleDate(newDate);\r\n\t\t\tvar endDate   = new SimpleDate(this.parameters.endDate);\r\n\r\n\t\t\tthis.parameters.startDate = newDate;\r\n\r\n\t\t\tif(startDate.compare(endDate) <= 0) {\r\n\t\t\t\tendDate = new SimpleDate(startDate.toString());\r\n\t\t\t\tendDate.increment(1);\r\n\r\n\t\t\t\tthis.parameters.endDate = endDate.toString();\r\n\t\t\t}\r\n\r\n\t\t\tthis.parameters.daysToAdvance = startDate.dayDifference(endDate);\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonEndDateChange(newDate) {\r\n\t\tif(this.parameters.endDate !== newDate) {\r\n\t\t\tvar endDate   = new SimpleDate(newDate);\r\n\t\t\tvar startDate = new SimpleDate(this.parameters.startDate);\r\n\r\n\t\t\tthis.parameters.endDate = newDate;\r\n\r\n\t\t\tif(startDate.compare(endDate) <= 0) {\r\n\t\t\t\tstartDate = new SimpleDate(endDate.toString());\r\n\t\t\t\tstartDate.decrement(1);\r\n\r\n\t\t\t\tthis.parameters.startDate = startDate.toString();\r\n\t\t\t}\r\n\r\n\t\t\tthis.parameters.daysToAdvance = startDate.dayDifference(endDate);\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonDaysToAdvanceChange(days) {\r\n\t\tif(this.parameters.daysToAdvance !== days) {\r\n\t\t\tthis.parameters.daysToAdvance = days;\r\n\r\n\t\t\tvar endDate = new SimpleDate(this.parameters.startDate);\r\n\r\n\t\t\tendDate.increment(days);\r\n\r\n\t\t\tvar maxDate = new SimpleDate(\"2059-11-31\");\r\n\r\n\t\t\tif(endDate.compare(maxDate) < 0) {\r\n\t\t\t\tthis.parameters.endDate = \"2059-11-31\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.parameters.endDate = endDate.toString();\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Build Macro\r\n\tAdvanceDay(days) {\r\n\t\tvar macro = this.getMacro(\"AdvDay\");\r\n\r\n\t\tmacro[0].count = days;\r\n\r\n\t\treturn macro;\r\n\t}\r\n\r\n\tAdvanceMonth(days) {\r\n\t\tvar macro = this.getMacro(\"AdvMonth\");\r\n\r\n\t\tvar segment = macro[0];\r\n\r\n\t\tsegment.count = days - 1;\r\n\t\tmacro[0] = segment;\r\n\r\n\t\treturn macro;\r\n\t}\r\n\r\n\tInitMacro(startDate, currentDate) {\r\n\t\t// If the day after the start is in the next Month\r\n\t\tif(startDate.month < currentDate.month) {\r\n\t\t\t// If the day after the start is in the next Year\r\n\t\t\tif(startDate.year < currentDate.year) {\r\n\t\t\t\tthis.concatToMacro(this.getMacro(\"FstSkipY\"));  // Advance the Day, Month and Year\r\n\t\t\t}\r\n\r\n\t\t\t// It is in the same Year\r\n\t\t\telse {\r\n\t\t\t\tthis.concatToMacro(this.getMacro(\"FstSkipM\"));  // Advance the Day and Month\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// It is in the same Month\r\n\t\telse {\r\n\t\t\tthis.concatToMacro(this.getMacro(\"FstSkipD\"));\r\n\t\t}\r\n\r\n\t\tcurrentDate.increment(1);\r\n\t}\r\n\r\n\tNextMacroSegment(currentDate, endDate) {\r\n\t\tlet cYear  = currentDate.year;\r\n\t\tlet cMonth = currentDate.month;\r\n\t\tlet cDay   = currentDate.day;\r\n\r\n\t\tlet eYear  = endDate.year;\r\n\t\tlet eMonth = endDate.month;\r\n\t\tlet eDay   = endDate.day;\r\n\r\n\t\tlet daysToGo = 0;\r\n\r\n\t\t// If Target Year has been reached\r\n\t\tif(cYear === eYear) {\r\n\t\t\t// If Target Month has been reached\r\n\t\t\tif(cMonth === eMonth) {\r\n\t\t\t\tdaysToGo = eDay - cDay;\r\n\r\n\t\t\t\tthis.concatToMacro(this.AdvanceDay(daysToGo));\r\n\t\t\t}\r\n\r\n\t\t\t// Not at Target Month and at the start of a Month\r\n\t\t\telse if(cDay === 1){\r\n\t\t\t\tlet i = cMonth;\r\n\t\t\t\tfor(; i < eMonth; i++) {\r\n\t\t\t\t\tdaysToGo = MonthLength[i];\r\n\r\n\t\t\t\t\tthis.concatToMacro(this.AdvanceMonth(daysToGo));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Not at Target Month and not at the start of a Month\r\n\t\t\telse {\r\n\t\t\t\tdaysToGo = currentDate.daysToNextMonth();\r\n\r\n\t\t\t\tthis.concatToMacro(this.AdvanceMonth(daysToGo));\r\n\t\t\t}\r\n\r\n\t\t\tcurrentDate.increment(daysToGo);\r\n\t\t}\r\n\r\n\t\t// Not at Target Year and at the start of a Month\r\n\t\telse if(cDay === 1){\r\n\t\t\t// If it's January\r\n\t\t\tif(cMonth === 0) {\r\n\t\t\t\t// If it's a Leap Year\r\n\t\t\t\tif(this.isLeapYear(cYear)) {\r\n\t\t\t\t\tthis.concatToMacro(this.getMacro(\"AdvYearLp\"));\r\n\r\n\t\t\t\t\tcurrentDate.increment(366);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If Not\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.concatToMacro(this.getMacro(\"AdvYear\"));\r\n\r\n\t\t\t\t\tcurrentDate.increment(365);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// If it's December\r\n\t\t\telse if(cMonth === 11) {\r\n\t\t\t\tthis.concatToMacro(this.getMacro(\"AdvDec\"));\r\n\r\n\t\t\t\tcurrentDate.increment(31);\r\n\t\t\t}\r\n\r\n\t\t\t// Other Months\r\n\t\t\telse {\r\n\t\t\t\tlet i = cMonth;\r\n\t\t\t\tfor(; i < 11; i++) {\r\n\t\t\t\t\tdaysToGo = currentDate.daysToNextMonth();\r\n\r\n\t\t\t\t\tthis.concatToMacro(this.AdvanceMonth(daysToGo));\r\n\r\n\t\t\t\t\tcurrentDate.increment(daysToGo);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Not Target Year and not at the start of a Month\r\n\t\telse {\r\n\t\t\t// If it is December\r\n\t\t\tif(cMonth === 11) {\r\n\t\t\t\tvar macro = this.getMacro(\"AdvDec\");\r\n\r\n\t\t\t\tvar segment = macro[0];\r\n\t\t\t\tsegment.count = 31 - cDay;\r\n\t\t\t\tmacro[0] = segment;\r\n\r\n\t\t\t\tthis.concatToMacro(macro);\r\n\r\n\t\t\t\tcurrentDate.increment(31);\r\n\t\t\t}\r\n\r\n\t\t\t// Any other Month\r\n\t\t\telse {\r\n\t\t\t\tdaysToGo = currentDate.daysToNextMonth();\r\n\r\n\t\t\t\tthis.concatToMacro(this.AdvanceMonth(daysToGo));\r\n\r\n\t\t\t\tcurrentDate.increment(daysToGo);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tbuild() {\r\n\t\tif(!this.jsonManager.loadConcluded) return null;\r\n\r\n\t\tthis.macroJSON = []; // Clear Macro JSON\r\n\r\n\t\tvar startDate = new SimpleDate(this.parameters.startDate);\r\n\t\tvar endDate   = new SimpleDate(this.parameters.endDate);\r\n\r\n\t\tvar currentDate = new SimpleDate(this.parameters.startDate);\r\n\r\n\t\tthis.InitMacro(startDate, currentDate);\r\n\r\n\t\t// While End Date has not been reached\r\n\t\twhile(currentDate.compare(endDate) > 0) {\r\n\t\t\tthis.NextMacroSegment(currentDate, endDate);\r\n\t\t}\r\n\r\n\t\tthis.concatToMacro(this.getMacro(\"Return\"));\r\n\r\n\t\tthis.macro = new Macro(this.name, this.icon, this.macroJSON);\r\n\r\n\t\treturn this.macro;\r\n\t}\r\n}\r\n\r\nclass LotoIDMacroBuilder extends MacroBuilder {\r\n\tconstructor(jsonM) {\r\n\t\tsuper(jsonM, \"Loto ID\", \"./images/lotoid_icon.png\");\r\n\r\n\t\t// Init Parameters\r\n\t\tvar today    = new Date();\r\n\r\n\t\tthis.parameters.startDate = ConvertDate(today);\r\n\t\tthis.parameters.attempts  = 0;\r\n\t\tthis.parameters.getFirst  = true;\r\n\r\n\t\tthis.onStartDateChange = this.onStartDateChange.bind(this);\r\n\t\tthis.onAttemptsChange = this.onAttemptsChange.bind(this);\r\n\t\tthis.onGetFirstChange = this.onGetFirstChange.bind(this);\r\n\r\n\t\tthis.paramHandlers = {\r\n\t\t\tstartDate : this.onStartDateChange,\r\n\t\t\tattempts  : this.onAttemptsChange,\r\n\t\t\tgetFirst  : this.onGetFirstChange\r\n\t\t};\r\n\t}\r\n\r\n\t// Parameter Handlers\r\n\tonStartDateChange(newDate) {\r\n\t\tif(this.parameters.startDate !== newDate) {\r\n\t\t\tthis.parameters.startDate = newDate;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonAttemptsChange(count) {\r\n\t\tif(this.parameters.attempts !== count) {\r\n\t\t\tthis.parameters.attempts = count;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tonGetFirstChange(bool) {\r\n\t\tif(this.parameters.getFirst !== bool) {\r\n\t\t\tthis.parameters.getFirst = bool;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Build Macro\r\n\tAdvanceDate(currentDate) {\r\n\t\tvar tomorrow = new SimpleDate(currentDate.toString());\r\n\t\ttomorrow.increment(1);\r\n\r\n\t\t// If the day after the start is in the next Month\r\n\t\tif(currentDate.month < tomorrow.month) {\r\n\t\t\t// If the day after the start is in the next Year\r\n\t\t\tif(currentDate.year < tomorrow.year) {\r\n\t\t\t\tthis.concatToMacro(this.getMacro(\"FstSkipY\"));  // Advance the Day, Month and Year\r\n\t\t\t}\r\n\r\n\t\t\t// It is in the same Year\r\n\t\t\telse {\r\n\t\t\t\tthis.concatToMacro(this.getMacro(\"FstSkipM\"));  // Advance the Day and Month\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// It is in the same Month\r\n\t\telse {\r\n\t\t\tthis.concatToMacro(this.getMacro(\"FstSkipD\"));\r\n\t\t}\r\n\t}\r\n\r\n\tbuild() {\r\n\t\tif(!this.jsonManager.loadConcluded) return null;\r\n\r\n\t\tthis.macroJSON = []; // Clear Macro JSON\r\n\r\n\t\tvar currentDate = new SimpleDate(this.parameters.startDate);\r\n\r\n\t\tvar endDate = new SimpleDate(this.parameters.startDate);\r\n\t\tendDate.increment(this.parameters.attempts);\r\n\r\n\t\tif(this.parameters.getFirst) {\r\n\t\t\tthis.concatToMacro(this.getMacro(\"LotoID\"));\r\n\t\t}\r\n\r\n\t\t// While End Date has not been reached\r\n\t\twhile(currentDate.compare(endDate) > 0) {\r\n\t\t\tthis.AdvanceDate(currentDate);\r\n\t\t\tcurrentDate.increment(1);\r\n\r\n\t\t\tthis.concatToMacro(this.getMacro(\"Return\"));\r\n\r\n\t\t\tthis.concatToMacro(this.getMacro(\"LotoID\"));\r\n\t\t}\r\n\r\n\t\tthis.macro = new Macro(this.name, this.icon, this.macroJSON);\r\n\r\n\t\treturn this.macro;\r\n\t}\r\n}\r\n\r\nclass KeyLogger {\r\n\tconstructor() {\r\n\t\tthis.log = [];\r\n\t\tthis.log_count = 0;\r\n\r\n\t\tthis.active = [];\r\n\t\tthis.active_count = 0;\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.log = [];\r\n\t\tthis.log_count = 0;\r\n\r\n\t\tthis.active = [];\r\n\t\tthis.active_count = 0;\r\n\t}\r\n\r\n\tpressKey(key, time) {\r\n\t\tvar ind = arrayFindIndex(this.active, key);\r\n\r\n\t\t// If key is not pressed\r\n\t\tif(ind === -1) {\r\n\t\t\tthis.active[this.active_count] = key;\r\n\t\t\tthis.active_count++;\r\n\r\n\t\t\tthis.logKeyPress(key, time);\r\n\t\t}\r\n\t}\r\n\r\n\tlogKeyPress(key, time) {\r\n\t\tthis.log[this.log_count] = {index: this.log_count, key: key,\r\n\t\t\tonTime: time, offTime: ''};\r\n\r\n\t\tthis.log_count++;\r\n\t}\r\n\r\n\treleaseKey(key, time) {\r\n\t\tif(this.active_count > 0) {\r\n\t\t\tvar ind = arrayFindIndex(this.active, key);\r\n\r\n\t\t\t// If key is pressed\r\n\t\t\tif(ind !== -1) {\r\n\t\t\t\tthis.active.splice(ind, 1);\r\n\t\t\t\tthis.active_count--;\r\n\r\n\t\t\t\tthis.logKeyRelease(key, time);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlogKeyRelease(key, time) {\r\n\t\tvar i = 0;\r\n\t\tfor(; i < this.log_count; i++) {\r\n\t\t\tvar entry = this.log[this.log_count - (i + 1)];\r\n\r\n\t\t\tif(entry.key === key && entry.offTime === '') {\r\n\t\t\t\tentry.offTime = time;\r\n\t\t\t\tthis.log[i] = entry;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdate(key, pressed, time) {\r\n\t\t// If key is being pressed\r\n\t\tif(pressed) {\r\n\t\t\tthis.pressKey(key, time);\r\n\t\t}\r\n\t\t// If key is being released\r\n\t\telse {\r\n\t\t\tthis.releaseKey(key, time);\r\n\t\t}\r\n\t}\r\n\r\n\trenderPressed() {\r\n\t\tvar pressed = this.active.map((key, index) => {\r\n\t\t\treturn (\r\n\t\t\t\t<div className = \"pressedKey\" key = {key}>\r\n\t\t\t\t\t{key}\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t});\r\n\r\n\t\treturn (\r\n\t\t\t<div id = \"PressedKeys\">\r\n\t\t\t\t<b> Pressed </b>\r\n\t\t\t\t{pressed}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderLogged() {\r\n\t\tvar keyLogs = [];\r\n\r\n\t\tif(this.log_count > 0) {\r\n\t\t\tvar i = 0;\r\n\t\t\tfor(; i < Math.min(3, this.log_count); i++) {\r\n\t\t\t\tvar l = this.log[this.log_count - (i + 1)];\r\n\t\t\t\tkeyLogs.push(<KeyLog key = {\"keylog_\" + i} index = {l.index.toString()}\r\n\t\t\t\tpressedKey = {l.key} onTime = {l.onTime} offTime = {l.offTime}/>);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div id = \"KeyLogs\">\r\n\t\t\t\t{keyLogs}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass Macro {\r\n\tconstructor(name, icon, segments) {\r\n\t\tthis.name = name;\r\n\t\tthis.icon = icon;\r\n\r\n\t\tthis.state = MacroStates.INACTIVE;\r\n\r\n\t\tthis.onWait = false;\r\n\t\tthis.waitTimeout = null;\r\n\r\n\t\tthis.runner = null;\r\n\r\n\t\tthis.segments = segments;\r\n\r\n\t\tthis.totalSteps = 0;\r\n\t\tthis.currentOverallStep = 0;\r\n\r\n\t\tvar i;\r\n\t\tfor(i = 0; i < this.segments.length; i++) {\r\n\t\t\tvar segment = this.segments[i];\r\n\r\n\t\t\tvar subTotal = 0;\r\n\r\n\t\t\tvar j;\r\n\t\t\tfor(j = 0; j < segment.macro.length; j++) {\r\n\t\t\t\tvar step = segment.macro[j];\r\n\r\n\t\t\t\tsubTotal += step.count;\r\n\t\t\t}\r\n\r\n\t\t\tthis.totalSteps += subTotal * segment.count;\r\n\t\t}\r\n\t}\r\n\r\n\tprogress() {\r\n\t\tif(this.totalSteps === 0) return 0;\r\n\r\n\t\treturn this.currentOverallStep / this.totalSteps;\r\n\t}\r\n\r\n\tstartRunner() {\r\n\t\tvar f = function* () {\r\n\t\t\tthis.currentOverallStep = 0;\r\n\r\n\t\t\tvar info = {state : this.state, abort : false};\r\n\r\n\t\t\t// For each Segment of the Macro\r\n\t\t\tvar i = 0;\r\n\t\t\tfor(; i < this.segments.length; i++) {\r\n\t\t\t\tvar segment = this.segments[i];\r\n\r\n\t\t\t\tvar steps = segment.macro;\r\n\t\t\t\tvar reps  = segment.count;\r\n\r\n\t\t\t\t// For each Repetition of the Segment\r\n\t\t\t\tvar j = 0;\r\n\t\t\t\tfor(; j < reps; j++) {\r\n\r\n\t\t\t\t\t// For each Step of the Segment\r\n\t\t\t\t\tvar k = 0;\r\n\t\t\t\t\tfor(; k < steps.length; k++) {\r\n\r\n\t\t\t\t\t\t// If play has not been pressed or has been paused\r\n\t\t\t\t\t\twhile(this.state !== MacroStates.PLAYING) {\r\n\t\t\t\t\t\t\tinfo = yield undefined; // Yield\r\n\r\n\t\t\t\t\t\t\tif(info.abort) return;\r\n\r\n\t\t\t\t\t\t\tthis.state = info.state;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Get current Step\r\n\t\t\t\t\t\tvar step = steps[k];\r\n\r\n\t\t\t\t\t\t// Make the response to the App\r\n\t\t\t\t\t\tvar res = { button : step.button, pressed : true, time : 0};\r\n\r\n\t\t\t\t\t\t// For each repetition of the Step\r\n\t\t\t\t\t\tvar l = 0;\r\n\t\t\t\t\t\tfor(l = 0; l < step.count; l++) {\r\n\t\t\t\t\t\t\tres.pressed = true; // Signal that the button is pressed\r\n\r\n\t\t\t\t\t\t\t// Set timer for the duration of the button press\r\n\t\t\t\t\t\t\tthis.wait(Math.max(step.onTime, 20));\r\n\r\n\t\t\t\t\t\t\tres.time = step.onTime;\r\n\r\n\t\t\t\t\t\t\tyield res;\r\n\r\n\t\t\t\t\t\t\t// Wait\r\n\t\t\t\t\t\t\twhile(this.onWait) {\r\n\t\t\t\t\t\t\t\tinfo = yield undefined;\r\n\t\t\t\t\t\t\t\tif(info.abort) return;\r\n\t\t\t\t\t\t\t\tthis.state = info.state;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tres.pressed = false; // Signal the the button is not pressed\r\n\r\n\t\t\t\t\t\t\t// Set timer for the wait before pressing the next button\r\n\t\t\t\t\t\t\tthis.wait(Math.max(step.offTime, 20));\r\n\r\n\t\t\t\t\t\t\tres.time = step.offTime;\r\n\r\n\t\t\t\t\t\t\tyield res;\r\n\r\n\t\t\t\t\t\t\t// Wait for timer to elapse and to not be paused\r\n\t\t\t\t\t\t\twhile(this.onWait || this.state === MacroStates.PAUSED) {\r\n\t\t\t\t\t\t\t\tinfo = yield undefined;\r\n\t\t\t\t\t\t\t\tif(info.abort) return;\r\n\t\t\t\t\t\t\t\tthis.state = info.state;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.currentOverallStep++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t};\r\n\r\n\t\t// Create the Coroutine\r\n\t\tthis.runner = coroutine(f, this);\r\n\t}\r\n\r\n\twait(duration) {\r\n\t\tthis.waitTimeout = setTimeout(this.resume, duration, this);\r\n\t\tthis.onWait = true;\r\n\t}\r\n\r\n\tresume(obj) {\r\n\t\tobj.onWait = false;\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.state = MacroStates.INACTIVE;\r\n\r\n\t\tif(this.onWait) {\r\n\t\t\tthis.onWait = false;\r\n\r\n\t\t\tclearTimeout(this.waitTimeout);\r\n\r\n\t\t\tthis.waitTimeout = null;\r\n\t\t}\r\n\r\n\t\tthis.currentOverallStep = 0;\r\n\r\n\t\tif(this.runner !== null) {\r\n\t\t\tthis.runner({state : this.state, abort : true});\r\n\r\n\t\t\tthis.runner = null;\r\n\t\t}\r\n\t}\r\n\r\n\ttoString() {\r\n\t\tlet text = \"Macro - \\n\";\r\n\r\n\t\tlet i = 0;\r\n\t\tfor(; i < this.segments.length; i++) {\r\n\t\t\tlet seg = this.segments[i];\r\n\r\n\t\t\ttext += \"\\t\" + seg.name + \" x\" + seg.count.toString() + \"\\n\";\r\n\t\t}\r\n\r\n\t\treturn text;\r\n\t}\r\n}\r\n\r\nclass MacroPlayer {\r\n\tconstructor() {\r\n\t\tthis.state = { selectedMacro : 0,\r\n\t\t\tplayState     : 0,\r\n\t\t\tmacroProgress : 0,\r\n\t\t\tloadConcluded : false\r\n\t\t};\r\n\r\n\t\t// Create JSON Manager\r\n\t\tthis.jsonManager = new JSONManeger();\r\n\r\n\t\t// Create Macro Builders\r\n\t\tthis.builders = [];\r\n\t\tthis.builders[0] = new TimeSkipMacroBuilder(this.jsonManager);\r\n\t\tthis.builders[1] = new LotoIDMacroBuilder(this.jsonManager);\r\n\r\n\t\tlet macroCount = this.builders.length;\r\n\r\n\t\t// Init Dirty Bit Array\r\n\t\tthis.dirtyMacro = Array(macroCount).fill(false);\r\n\r\n\t\t// Init Macro Array\r\n\t\tthis.macros = Array(macroCount).fill(null);\r\n\r\n\t\tthis.selectMacro = this.selectMacro.bind(this);\r\n\t\tthis.changeParameter = this.changeParameter.bind(this);\r\n\t}\r\n\r\n\tcheckLoadConcluded() {\r\n\t\tvar concluded = this.jsonManager.loadConcluded;\r\n\r\n\t\tif(!concluded) return;\r\n\r\n\t\tvar i = 0;\r\n\t\tfor(; i < this.builders.length; i++) {\r\n\t\t\tthis.buildMacro(i); // Build macro\r\n\r\n\t\t\tif(this.macros[i] === null || this.macros[i] === undefined) {\r\n\t\t\t\tconcluded = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.state.loadConcluded = concluded;\r\n\t}\r\n\r\n\tselectMacro(index) {\r\n\t\tif(this.state.selectedMacro === index) return;\r\n\r\n\t\tvar audio = new Audio(\"/click.mp3\");\r\n\t\taudio.play();\r\n\r\n\t\tvar currentMacro = this.macros[this.state.selectedMacro];\r\n\r\n\t\tif(currentMacro.state !== MacroStates.INACTIVE) {\r\n\t\t\tcurrentMacro.reset();\r\n\r\n\t\t\tthis.state.playState = MacroStates.INACTIVE;\r\n\t\t\tthis.state.macroProgress = 0;\r\n\t\t}\r\n\r\n\t\tthis.state.selectedMacro = index;\r\n\t}\r\n\r\n\tchangeParameter(key, value) {\r\n\t\tlet builder = this.builders[this.state.selectedMacro];\r\n\r\n\t\tif(builder.changeParameter(key, value)) {\r\n\t\t\tthis.dirtyMacro[this.state.selectedMacro] = true;\r\n\t\t}\r\n\t}\r\n\r\n\tplay() {\r\n\t\tvar index = this.state.selectedMacro;\r\n\r\n\t\tvar currentMacro = this.macros[index];\r\n\t\tvar isDirty      = this.dirtyMacro[index];\r\n\r\n\t\tswitch(currentMacro.state) {\r\n\t\t\tdefault:\r\n\t\t\tcase MacroStates.PLAYING:\r\n\t\t\tcase MacroStates.PAUSED:\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase MacroStates.INACTIVE:\r\n\t\t\tcase MacroStates.FINISHED:\r\n\t\t\t\tif(currentMacro.state === MacroStates.FINISHED) {\r\n\t\t\t\t\tcurrentMacro.reset();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(isDirty) {\r\n\t\t\t\t\tthis.dirtyMacro[index] = false;\r\n\r\n\t\t\t\t\tthis.buildMacro(index);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcurrentMacro.startRunner();\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcurrentMacro.state = MacroStates.PLAYING;\r\n\r\n\t\tthis.state.playState = MacroStates.PLAYING;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpause() {\r\n\t\tvar currentMacro = this.macros[this.state.selectedMacro];\r\n\r\n\t\tif(currentMacro.state === MacroStates.PLAYING) {\r\n\t\t\tcurrentMacro.state = MacroStates.PAUSED;\r\n\r\n\t\t\tthis.state.playState = MacroStates.PAUSED;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\treset() {\r\n\t\tvar currentMacro = this.macros[this.state.selectedMacro];\r\n\r\n\t\tif(currentMacro.state !== MacroStates.INACTIVE) {\r\n\t\t\tcurrentMacro.reset();\r\n\r\n\t\t\tthis.state.playState = MacroStates.INACTIVE\r\n\t\t\tthis.state.macroProgress = 0;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetMacroState() {\r\n\t\treturn { macroState : this.state.playState,\r\n\t\t\t\tmacroProgress : this.state.macroProgress };\r\n\t}\r\n\r\n\tgetAllMacroData() {\r\n\t\tlet dataArray = [];\r\n\r\n\t\tlet i = 0;\r\n\t\tfor(; i < this.builders.length; i++) {\r\n\t\t\tlet builder = this.builders[i];\r\n\r\n\t\t\tdataArray[i] = builder.getRenderData();\r\n\t\t}\r\n\r\n\t\treturn dataArray;\r\n\t}\r\n\r\n\tgetCurrentMacroData() {\r\n\t\tvar builder = this.builders[this.state.selectedMacro];\r\n\r\n\t\treturn builder.getRenderData();\r\n\t}\r\n\r\n\tbuildMacro(index) {\r\n\t\tvar builder = this.builders[index];\r\n\r\n\t\tvar macro = builder.build(this.parameters);\r\n\r\n\t\tthis.macros[index] = macro;\r\n\r\n\t\tconsole.log(macro.toString());\r\n\t}\r\n\r\n\tupdateMacros() {\r\n\t\tvar i = 0;\r\n\t\tfor(; i < this.macroBuilders.length; i++) {\r\n\t\t\tvar dirty   = this.macroParamsDirty[i];\r\n\r\n\t\t\tif(dirty) {\r\n\t\t\t\tthis.buildMacro(i);\r\n\r\n\t\t\t\tthis.macroParamsDirty[i] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tvar response = undefined;\r\n\r\n\t\tif(!this.state.loadConcluded) {\r\n\t\t\tthis.checkLoadConcluded();\r\n\t\t}\r\n\r\n\t\t// If Load has been completed\r\n\t\tif(this.state.loadConcluded) {\r\n\t\t\tvar runResult = undefined;\r\n\r\n\t\t\t// Get current Macro\r\n\t\t\tvar currentMacro = this.macros[this.state.selectedMacro];\r\n\r\n\t\t\tif(currentMacro === undefined || currentMacro === null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(currentMacro.state);\r\n\t\t\tswitch(currentMacro.state) {\r\n\t\t\t\tdefault:\r\n\t\t\t\tcase MacroStates.INACTIVE:\r\n\t\t\t\tcase MacroStates.FINISHED:\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\tcase MacroStates.PLAYING:\r\n\t\t\t\t\trunResult = currentMacro\r\n\t\t\t\t\t\t.runner({state : currentMacro.state, abort : false});\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase MacroStates.PAUSED:\r\n\t\t\t\t\trunResult = currentMacro\r\n\t\t\t\t\t\t.runner({state : currentMacro.state, abort : false});\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t// If a result was obtained\r\n\t\t\tif(runResult !== undefined) {\r\n\t\t\t\t// If the result includes a value\r\n\t\t\t\tif(runResult.value !== undefined) {\r\n\t\t\t\t\tresponse = runResult.value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(runResult.done) currentMacro.state = MacroStates.FINISHED;\r\n\t\t\t}\r\n\r\n\t\t\tthis.state.playState = currentMacro.state;\r\n\t\t\tthis.state.macroProgress = currentMacro.progress() * 100;\r\n\t\t}\r\n\r\n\t\treturn response;\r\n\t}\r\n}\r\n\r\nclass App extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\r\n\t\tthis.onButtonEvent   = this.onButtonEvent.bind(this);\r\n\t\tthis.selectMacro     = this.selectMacro.bind(this);\r\n\t\tthis.parameterChange = this.parameterChange.bind(this);\r\n\r\n\t\tthis.macroPlayer = new MacroPlayer();\r\n\r\n\t\tthis.keyLogger = new KeyLogger();\r\n\t\tthis.currentTime = 0;\r\n\r\n\t\tthis.state = {selectedMacro :  0,\r\n\t\t\t\t\t  macroState    : -1,\r\n\t\t\t\t\t  macroProgress :  0,\r\n\t\t\t\t\t  locked        : false\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.UpdateTimerId = setInterval(\r\n\t\t\t() => this.update(),\r\n\t\t\t20\r\n\t\t);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.UpdateTimerId);\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tthis.currentTime += 20;\r\n\r\n\t\tvar res = this.macroPlayer.update(this.currentTime);\r\n\r\n\t\tthis.setState(this.macroPlayer.getMacroState());\r\n\r\n\t\tif(res !== undefined) {\r\n\t\t\tthis.handleSwitchKeys(res.button, res.pressed);\r\n\t\t\tthis.keyLogger.update(res.button, res.pressed, res.time);\r\n\t\t}\r\n\t}\r\n\r\n\tonButtonEvent(name, pressed) {\r\n\t\tvar audio = new Audio(\"/click.mp3\");\r\n\r\n\t\tif(pressed) {\r\n\t\t\taudio.play();\r\n\t\t}\r\n\r\n\t\tswitch (name) {\r\n\t\t\tdefault:\r\n\t\t\treturn;\r\n\r\n\t\t\tcase \"play\":\r\n\t\t\t\tthis.macroPlayer.play();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"pause\":\r\n\t\t\t\tthis.macroPlayer.pause();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"reset\":\r\n\t\t\t\tif(this.macroPlayer.reset()) {\r\n\t\t\t\t\tthis.keyLogger.clear();\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.setState(this.macroPlayer.getMacroState());\r\n\t}\r\n\r\n\tselectMacro(index) {\r\n\t\tthis.macroPlayer.selectMacro(index);\r\n\t}\r\n\r\n\tparameterChange(key, value) {\r\n\t\tthis.macroPlayer.changeParameter(key, value);\r\n\t}\r\n\r\n\thandleSwitchKeys(name, pressed) {\r\n\t\tif(window.joyconJS === undefined) return;\r\n\r\n\t\tif(name === \"minus\") {\r\n\t\t\twindow.joyconJS.onMinus(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"left-stick\") {\r\n\t\t\twindow.joyconJS.onLeftJoystickPressed(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"up\") {\r\n\t\t\twindow.joyconJS.onUp(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"right\") {\r\n\t\t\twindow.joyconJS.onRight(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"down\") {\r\n\t\t\twindow.joyconJS.onDown(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"left\") {\r\n\t\t\twindow.joyconJS.onLeft(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"lsl\") {\r\n\t\t\twindow.joyconJS.onLeftSL(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"lsr\") {\r\n\t\t\twindow.joyconJS.onLeftSR(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"plus\") {\r\n\t\t\twindow.joyconJS.onPlus(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"a\") {\r\n\t\t\twindow.joyconJS.onA(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"b\") {\r\n\t\t\twindow.joyconJS.onB(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"x\") {\r\n\t\t\twindow.joyconJS.onX(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"y\") {\r\n\t\t\twindow.joyconJS.onY(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"rsl\") {\r\n\t\t\twindow.joyconJS.onRightSL(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"rsr\") {\r\n\t\t\twindow.joyconJS.onRightSR(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"right-stick\") {\r\n\t\t\twindow.joyconJS.onRightJoystickPressed(pressed);\r\n\t\t}\r\n\r\n\t\tif(name === \"home\") {\r\n\t\t\twindow.joyconJS.onHome(pressed);\r\n\t\t}\r\n\t}\r\n\r\n\trenderMacros() {\r\n\t\tif(!this.macroPlayer.state.loadConcluded) return (<b> Loading </b>);\r\n\r\n\t\tlet selected = this.macroPlayer.state.selectedMacro;\r\n\r\n\t\tlet data = this.macroPlayer.getAllMacroData();\r\n\r\n\t\tlet index = -1;\r\n\r\n\t\treturn data.map((entry) => {\r\n\t\t\t\tindex++;\r\n\r\n\t\t\t\tvar isSelected = selected === index;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MacroButton key = {\"macro_\" + index.toString()} index = {index}\r\n\t\t\t\t\t\tselected = {isSelected} name = {entry.name} src = {entry.icon}\r\n\t\t\t\t\t\tclickHandler = {this.selectMacro}/>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\trenderParameters() {\r\n\t\tif(!this.macroPlayer.state.loadConcluded) return (<b> Loading </b>);\r\n\r\n\t\tlet data = this.macroPlayer.getCurrentMacroData();\r\n\r\n\t\treturn (\r\n\t\t\t<ParameterInput key = {\"macroParams\"}\r\n\t\t\t\tmacro = {data.name} parameters = {data.parameters}\r\n\t\t\t\teventHandler = {this.parameterChange}/>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst pressed = this.keyLogger.renderPressed();\r\n\t\tconst logging = this.keyLogger.renderLogged();\r\n\r\n\t\tconst macros = this.renderMacros();\r\n\t\tconst parameters = this.renderParameters();\r\n\r\n\t\treturn (\r\n\t\t\t<div className = \"App\" style = {{backgroundImage: \"url(./images/background.png)\"}}>\r\n\t\t\t\t<div className = \"App-header\">\r\n\t\t\t\t\t<img className = \"icon\" src = \"./images/macro_app_icon.png\" alt = \"AppIcon\"/>\r\n\t\t\t\t\t<b className = \"App-title\"\r\n\t\t\t\t\t\tstyle = {{color: \"black\"}}> POKÉMACROS </b>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id = \"body\">\r\n\t\t\t\t\t<div id = \"Macros\">\r\n\t\t\t\t\t\t\t{macros}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id = \"Parameters\">\r\n\t\t\t\t\t\t\t{parameters}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id = \"Tracker\">\r\n\t\t\t\t\t\t<ProgressBar key = \"progressbar\" percentage = {this.state.macroProgress} />\r\n\t\t\t\t\t\t<div id = \"KeyLogging\">\r\n\t\t\t\t\t\t\t{pressed}\r\n\t\t\t\t\t\t\t{logging}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id = \"PlayerButtons\">\r\n\t\t\t\t\t\t<button key = \"reset\" className = \"player-button\" id = \"Reset\"\r\n\t\t\t\t\t\t\tonMouseDown  = {e => this.onButtonEvent(\"reset\", true)}\r\n\t\t\t\t\t\t\tonMouseUp    = {e => this.onButtonEvent(\"reset\", false)}\r\n\t\t\t\t\t\t\tonTouchStart = {e => this.onButtonEvent(\"reset\", true)}\r\n\t\t\t\t\t\t\tonTouchEnd   = {e => this.onButtonEvent(\"reset\", false)}>\r\n\t\t\t\t\t\t\tReset\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button key = \"play\" className = \"player-button\" id = \"Play\"\r\n\t\t\t\t\t\t\tonMouseDown  = {e => this.onButtonEvent(\"play\", true)}\r\n\t\t\t\t\t\t\tonMouseUp    = {e => this.onButtonEvent(\"play\", false)}\r\n\t\t\t\t\t\t\tonTouchStart = {e => this.onButtonEvent(\"play\", true)}\r\n\t\t\t\t\t\t\tonTouchEnd   = {e => this.onButtonEvent(\"play\", false)}>\r\n\t\t\t\t\t\t\tPlay\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button key = \"pause\" className = \"player-button\" id = \"Pause\"\r\n\t\t\t\t\t\t\tonMouseDown  = {e => this.onButtonEvent(\"pause\", true)}\r\n\t\t\t\t\t\t\tonMouseUp    = {e => this.onButtonEvent(\"pause\", false)}\r\n\t\t\t\t\t\t\tonTouchStart = {e => this.onButtonEvent(\"pause\", true)}\r\n\t\t\t\t\t\t\tonTouchEnd   = {e => this.onButtonEvent(\"pause\", false)}>\r\n\t\t\t\t\t\t\tPause\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button key = \"testA\" className = \"player-button\" id = \"testA\"\r\n\t\t\t\t\t\tonMouseDown  = {e => this.handleSwitchKeys(\"a\", true)}\r\n\t\t\t\t\t\tonMouseUp    = {e => this.handleSwitchKeys(\"a\", false)}\r\n\t\t\t\t\t\tonTouchStart = {e => this.handleSwitchKeys(\"a\", true)}\r\n\t\t\t\t\t\tonTouchEnd   = {e => this.handleSwitchKeys(\"a\", false)}>\r\n\t\t\t\t\t\tA\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}